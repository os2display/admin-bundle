/**
 * @name Os2DisplayAdminBundle
 * @version v2.0.0
 * @link https://github.com/os2display
 */
if(angular.module("busModule").service("busService",["$rootScope","$window",function(n,e){"use strict";e.rootScopes=e.rootScopes||[],e.rootScopes.push(n),this.$emit=function(t,i){angular.forEach(e.rootScopes,function(e){e.$emit(t,i)})},this.$on=function(e,i){return n.$on(e,function(e,t){i.apply(n,[e,t])})},this.$once=function(e,i){var o=n.$on(e,function(e,t){o(),i.apply(n,[e,t])})}}]),!window.config||!window.config.itkLog)throw"itkLog Exception: window.config.itkLog does not exist";angular.module("logModule").service("logService",["busService","$http","$timeout","$log",function(o,n,e,s){"use strict";var r=window.config.itkLog;function a(e,t,i,o){return{type:e,date:new Date,timeout:t,message:o,cause:i,stacktrace:printStackTrace()}}o.$on("log.error",function(e,t){if("none"!==r.logLevel){var i=a("error",t.timeout,t.cause,t.msg);o.$emit("messages.add",i),r.logToConsole&&s.error(i),r.errorCallback&&n.post(r.errorCallback,i)}}),o.$on("log.log",function(e,t){if("all"===r.logLevel){var i=a("log",t.timeout,t.cause,t.msg);o.$emit("messages.add",i),r.logToConsole&&s.log(i)}}),o.$on("log.info",function(e,t){if("all"===r.logLevel){var i=a("info",t.timeout,t.cause,t.msg);o.$emit("messages.add",i),r.logToConsole&&s.info(i)}}),o.$on("log.warn",function(e,t){if("all"===r.logLevel){var i=a("warn",t.timeout,t.cause,t.msg);o.$emit("messages.add",i),r.logToConsole&&s.warn(i)}})}]),angular.module("mainModule").controller("BaseController",["$scope","userService","$location",function(t,i,e){"use strict";function o(e,t){return e&&e.api_data&&e.api_data.permissions&&e.api_data.permissions[t]}t.baseCurrentUser=i.getCurrentUser(),t.requireRole=function(e){return i.hasRole(e)},t.hasRole=function(e,t){return i.hasRole(e,t)},t.baseCanRead=function(e){return o(e,"can_read")},t.baseCanUpdate=function(e){return o(e,"can_update")},t.baseCanUpdateRoles=function(e){return o(e,"can_update_roles")},t.baseCanDelete=function(e){return o(e,"can_delete")},t.baseCanCreate=function(e){return o(t.baseCurrentUser,"can_create_"+e)},t.baseCanAdd=function(e){return o(t.baseCurrentUser,"can_add_"+e)},t.baseRemoveElementFromList=function(e,t,i){var o=e.findIndex(function(e){return t[i]===e[i]});return void 0!==o?e.splice(o,1):null}}]),angular.module("mainModule").controller("BaseApiController",["busService","$scope","$controller","$timeout","$q",function(s,e,t,i,r){"use strict";t("BaseController",{$scope:e});var a=[];function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}e.getEntity=function(e,t){var i=r.defer(),o=h();return a.push(s.$on("BaseApiController.returnEntity."+o,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),s.$emit("apiService.getEntity",{type:e,returnEvent:"BaseApiController.returnEntity."+o,data:t}),i.promise},e.getEntities=function(e){var i=r.defer(),t=h();return a.push(s.$on("BaseApiController.returnEntities."+t,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),s.$emit("apiService.getEntities",{type:e,returnEvent:"BaseApiController.returnEntities."+t}),i.promise},e.updateEntity=function(e,t){var i=r.defer(),o=h();return a.push(s.$on("BaseApiController.updateEntity."+o,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),s.$emit("apiService.updateEntity",{type:e,returnEvent:"BaseApiController.updateEntity."+o,data:t}),i.promise},e.createEntity=function(e,t){var i=r.defer(),o=h();return a.push(s.$on("BaseApiController.createEntity."+o,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),s.$emit("apiService.createEntity",{type:e,returnEvent:"BaseApiController.createEntity."+o,data:t}),i.promise},e.deleteEntity=function(e,t){var i=r.defer(),o=h();return a.push(s.$on("BaseApiController.deleteEntity."+o,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),s.$emit("apiService.deleteEntity",{type:e,returnEvent:"BaseApiController.deleteEntity."+o,data:t}),i.promise},e.baseApiRequest=function(e,t,i){var o=r.defer(),n=h();return a.push(s.$on("BaseApiController.baseApiRequest."+n,function(e,t){t&&t.error?o.reject(t.error):o.resolve(t)})),s.$emit("apiService.request",{method:e,url:t,returnEvent:"BaseApiController.baseApiRequest."+n,data:i}),o.promise},e.$on("$destroy",function(){for(var e in a)a[e]()})}]),angular.module("mainModule").service("apiService",["busService","$http",function(n,s){"use strict";function i(e,t,i,o){t+=(t.indexOf("?")<0?"?":"&")+"locale=da",s({method:e,url:t,data:o}).then(function(e){n.$emit(i,e.data)},function(e){401!==e.status&&n.$emit(i,e.data)})}n.$on("apiService.request",function(e,t){i(t.method,t.url,t.returnEvent,t.data)}),n.$on("apiService.getEntities",function(e,t){i("get","/api/"+t.type,t.returnEvent)}),n.$on("apiService.getEntity",function(e,t){i("get","/api/"+t.type+"/"+t.data.id,t.returnEvent)}),n.$on("apiService.createEntity",function(e,t){i("post","/api/"+t.type,t.returnEvent,t.data)}),n.$on("apiService.updateEntity",function(e,t){i("put","/api/"+t.type+"/"+t.data.id,t.returnEvent,t.data)}),n.$on("apiService.deleteEntity",function(e,t){i("delete","/api/"+t.type+"/"+t.data.id,t.returnEvent,t.data)})}]),angular.module("mainModule").service("bodyService",["busService","$location",function(e,t){"use strict";var i=[];e.$on("$locationChangeSuccess",function(){for(var e in i)angular.element("body").removeClass(i[e]);i=[]}),e.$on("bodyService.addClass",function(e,t){angular.element("body").addClass(t),i.push(t)}),e.$on("bodyService.toggleClass",function(e,t){angular.element("body").toggleClass(t),i.push(t)}),e.$on("bodyService.removeClass",function(e,t){angular.element("body").removeClass(t)})}]),angular.module("mainModule").service("menuItemService",["busService",function(i){"use strict";i.$on("menuApp.requestSubMenuItems",function(e,t){i.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"screen",items:[{title:"Opret skærm",path:"/#/screen",classes:"create-channel",activeFilter:"/screen",group:"left",weight:2},{title:"Oversigt sub",path:"/#/screen-overview",classes:"overview-right",activeFilter:"/screen-overview",group:"right",icon:"apps",weight:3}]},{mainMenuItem:"channel",items:[{title:"Oversigt",path:"/#/channel-overview",classes:"overview-right",activeFilter:"/channel-overview",group:"right",icon:"apps"},{title:"Opret kanal",path:"/#/channel",classSuffix:"create-channel",activeFilter:"/channel",group:"left"},{title:"Delte kanaler",path:"/#/shared-channel-overview",classSuffix:"overview",activeFilter:"/shared-channel-overview",group:"left"}]},{mainMenuItem:"slide",items:[{title:"Oversigt",path:"/#/slide-overview",classes:"overview-right",activeFilter:"/slide-overview",group:"right",icon:"apps"},{title:"Opret slide",path:"/#/slide",classSuffix:"create-channel",activeFilter:"/slide",group:"left"}]},{mainMenuItem:"media",items:[{title:"Oversigt",path:"/#/media-overview",classes:"overview-right",activeFilter:"/media-overview",group:"right",icon:"apps"},{title:"Upload medie",path:"/#/media/upload",classSuffix:"create-media",activeFilter:"/media/upload",group:"left"}]}])}),i.$on("menuApp.requestMainMenuItems",function(){i.$emit("menuApp.returnMainMenuItems",[{title:"Kanaler",route:"/#/channel-overview",activeFilter:"/channel",icon:"add_to_queue",weight:1},{title:"Skærme",route:"/#/screen-overview",activeFilter:"/screen",icon:"tv",weight:3},{title:"Slides",route:"/#/slide-overview",activeFilter:"/slide",icon:"dvr",weight:2},{title:"Medier",route:"/#/media-overview",activeFilter:"/media",icon:"picture_in_picture",weight:4}])}),i.$on("menuApp.requestHamburgerMenuItems",function(){i.$emit("menuApp.returnHamburgerMenuItems",[{title:"Kanaler",weight:1,items:[{title:"Oversigt",route:"/#/channel-overview",activeFilter:"/channel-overview",weight:1},{title:"Opret kanal",route:"/#/channel",activeFilter:"/channel",weight:2}]},{title:"Slides",weight:2,items:[{title:"Oversigt",route:"/#/slide-overview",activeFilter:"/slide-overview",weight:1},{title:"Opret slide",route:"/#/slide",activeFilter:"/slide",weight:2}]},{title:"Skærme",weight:3,items:[{title:"Oversigt",route:"/#/screen-overview",activeFilter:"/screen-overview",weight:1},{title:"Opret skærm",route:"/#/screen",activeFilter:"/screen",weight:2}]},{title:"Administration",weight:3,permission:"super-admin",items:[{title:"Deling",route:"/#/admin-sharing",activeFilter:"/admin-sharing",permission:"super-admin",weight:1},{title:"Skabeloner",route:"/#/admin-templates",activeFilter:"/admin-sharing",permission:"super-admin",weight:2}]}])})}]),angular.module("mainModule").service("searchService",["$q","$http","busService",function(n,o,s){"use strict";var r=null;function a(e){var i=n.defer(),t="api/auth/search"+(e?"/reauth":"");return o.get(t).success(function(e){i.resolve(e.token)}).error(function(e,t){i.reject(t)}),i.promise}function h(e){var t=n.defer();return(r=io.connect(window.config.search.address,{query:"token="+e,"force new connection":!0,"max reconnection attempts":1/0})).on("error",function(e){"Not authorized"===e?a(!0).then(function(e){h(e).then(function(e){t.resolve(e)},function(e){s.$emit("log.error",{cause:e,msg:"Search socket error."}),t.reject(e)})},function(e){s.$emit("log.error",{cause:e,msg:"Search socket error."}),t.reject(e)}):(s.$emit("log.error",{cause:e,msg:"Search socket error."}),t.reject(e))}),r.on("connect",function(){t.resolve(r)}),r.on("disconnect",function(e){}),t.promise}s.$on("searchService.request",function(e,t){var i,o={index:window.config.search.index,type:t.type,query:{match_all:{}}};void 0!==t.text&&""!==t.text&&(o.query={multi_match:{query:t.text,type:"best_fields",operator:"or",fields:t.fields,analyzer:"string_search"}}),o.sort=t.sort,void 0!==t.filter&&(o.query={filtered:{query:o.query,filter:t.filter}}),t.hasOwnProperty("pager")&&(o.size=t.pager.size,o.from=t.pager.page*t.pager.size),o.uuid=CryptoJS.MD5(JSON.stringify(o)).toString(),o.callbacks={hits:"hits-"+o.uuid,error:"error-"+o.uuid},i=n.defer(),null===r?a().then(function(e){h(e).then(function(e){i.resolve(e)},function(){i.reject("Error connecting to search service.")})},function(){a(!0).then(function(e){h(e).then(function(e){i.resolve(e)},function(){i.reject("Error connecting to search service.")})},function(){i.reject("Error re-authenticating to search service.")})}):i.resolve(r),i.promise.then(function(e){e.once(o.callbacks.hits,function(e){s.$emit(t.callbacks.hits,e)}),e.once(o.callbacks.error,function(e){s.$emit("log.error",{cause:e.message,msg:"Search error."}),s.$emit(t.callbacks.error,e.message)}),e.emit("search",o)},function e(){s.$emit("log.error",{cause:e.message,msg:"Search error."})})})}]),angular.module("mainModule").service("userService",["busService",function(t){"use strict";var o=angular.copy(OS2DISPLAY_CURRENT_USER);t.$on("userService.getCurrentUser",function(){t.$emit("userService.returnCurrentUser",o)}),t.$on("userService.apiServiceReturnCurrentUser",function(e,t){o=t}),this.updateCurrentUser=function(){t.$emit("apiService.request",{method:"get",url:"api/user/current",returnEvent:"userService.apiServiceReturnCurrentUser"})},this.getCurrentUser=function(){return o},this.hasRole=function(e,t){t=t||o;var i=Object.keys(t.api_data.roles).map(function(e){return t.api_data.roles[e]});return t&&t.api_data&&t.api_data.roles&&-1!==i.indexOf(e)},this.getCurrentUserGroups=function(e){t.$emit(e,o.groups)}}]),angular.module("mainModule").service("authHttpResponseInterceptor",["$q","$window",function(t,i){"use strict";this.responseError=function(e){if(401!==e.status)return t.reject(e);i.location.href="/logout"}}]),angular.module("datetimePicker",[]),angular.module("datetimePicker").directive("datetimePicker",["$timeout",function(r){return{scope:{config:"=",watch:"="},restrict:"A",require:"^ngModel",link:function(e,t,i,o){var n="DD/MM/YYYY HH:mm",s=null;s=e.config?e.config:{lang:"da",format:"d/m/Y H:i",scrollMonth:!1,scrollTime:!1},r(function(){o.$modelValue&&(s.value=moment(1e3*o.$modelValue).format(n)),t.datetimepicker(s),o.$formatters.unshift(function(e){return e?moment(1e3*e).format(n):""}),o.$parsers.unshift(function(e){if(""==e)return null;var t=moment(e,n);return t&&t.isValid()&&1970<=t.year()?t.unix():null}),t.bind("blur",function(){var e=moment(o.$viewValue,n);e&&e.isValid()&&1970<=e.year()?o.$modelValue=e.unix():o.$modelValue=moment().unix(),o.$setViewValue(moment(1e3*o.$modelValue).format(n)),o.$render()}),e.watch&&e.$watch(function(){return o.$modelValue},function(e){e&&(s.value=moment(1e3*e).format(n),t.datetimepicker("destroy"),t.datetimepicker(s))})})}}}]),angular.module("datetimePicker").directive("hourPicker",function(){return{restrict:"A",require:"^ngModel",link:function(e,t){t.datetimepicker({datepicker:!1,format:"G"})}}}),angular.module("datetimePicker").directive("datetimePickerText",["$timeout",function(s){return{restrict:"A",require:"^ngModel",link:function(e,t,i,o){var n="DD/MM/YYYY HH:mm";s(function(){o.$formatters.unshift(function(e){return e?moment(1e3*e).format(n):""}),o.$parsers.unshift(function(e){if(""==e)return null;var t=moment(e,n);return t&&t.isValid()&&1970<=t.year()?t.unix():null}),o.$modelValue&&(o.$setViewValue(moment(1e3*o.$modelValue).format(n)),o.$render()),t.bind("blur",function(){var e=moment(o.$viewValue,n);e&&e.isValid()&&1970<=e.year()?o.$modelValue=e.unix():o.$modelValue=moment().unix(),o.$setViewValue(moment(1e3*o.$modelValue).format(n)),o.$render()})})}}}]),angular.module("styleguideComponentsModule",[]),angular.module("styleguideComponentsModule").directive("box",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{heading:"@"},template:'<article class="box"><h2 class="heading-has-spacing-after" ng-if="heading">{{ heading }}</h2><div class="box--inner" ng-transclude></div></article>'}}),angular.module("styleguideComponentsModule").directive("buttonIconLink",function(){return{restrict:"E",replace:!0,scope:{buttonLink:"@",icon:"@",click:"&"},template:'<div class="button-icon-link has-spacing-after" ng-click="click()"><i class="icon-rounded material-icons">{{ icon }}</i><span class="button-text has-spacing-before">{{ buttonLink }}</span></div>'}}),angular.module("styleguideComponentsModule").directive("contentList",function(){return{restrict:"E",replace:!0,scope:{items:"=",max:"=",filter:"=",order:"="},template:'<div class="content-list"><content-list-item ng-repeat="item in items | filter: filter | orderBy: order | limitTo: max" item="item"></content-list-item></div>'}}),angular.module("styleguideComponentsModule").directive("contentListItem",function(){return{restrict:"E",replace:!0,scope:{item:"="},template:'<div class="content-list-item"><span class="content-list-item--link"><a href="{{ item.url }}" title="{{ item.title }}" ng-if="item.url">{{ item.title }}</a><span class="button-text {{ data.class }}" ng-if="!item.url" ng-click="item.click(item.entity)">{{ item.title }}</span></span><span class="content-list-item--text" ng-if="item.text">{{ item.text }}</span><panel-menu items="item.actions" ng-if="item.actions"></panel-menu></div>'}}),angular.module("styleguideComponentsModule").directive("panelMenu",["$document",function(e){return{restrict:"E",replace:!0,scope:{items:"="},link:function(t){function i(e){t.$apply(function(){t.menuOpen=!1,document.removeEventListener("click",i)})}t.menuOpen=!1,t.toggleMenu=function(){t.menuOpen=!t.menuOpen,setTimeout(function(){t.menuOpen&&document.addEventListener("click",i)})}},template:'<div><span class="content-list-item--icon" ng-click="toggleMenu()"><i class="icon-default material-icons">more_vert</i></span><div class="panel-menu is-positioned" ng-class="{\'is-hidden\': !menuOpen}"><div class="panel-menu--inner"><box><content-list items="items" ng-click="menuOpen = false"></content-list></box></div></div></div>'}}]),angular.module("styleguideComponentsModule").directive("popup",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="popup is-visible is-positioned"><div class="popup--dialog is-visible is-positioned"><div class="popup--content" ng-transclude></div></div></div>'}}),angular.module("ikShared").factory("mediaFactory",["$http","$q","busService",function(o,n,s){"use strict";var e={getAllMedia:function(){var t=n.defer();return o.get("/api/media").success(function(e){t.resolve(e)}).error(function(){t.reject()}),t.promise},searchMedia:function(e){var i=n.defer();e.type="Os2Display\\MediaBundle\\Entity\\Media";var t=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+t,error:"searchService.error-"+t},s.$once(e.callbacks.hits,function(e,t){i.resolve(t)}),s.$once(e.callbacks.error,function(e,t){s.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),i.reject(t)}),s.$emit("searchService.request",e),i.promise},loadMediaBulk:function(e){var i=n.defer(),t="?ids[]="+e.join("&ids[]=");return o.get("/api/bulk/media/api"+t).success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},getMedia:function(e){var i=n.defer();return o.get("/api/media/"+e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},updateMedia:function(e){var i=n.defer();return o.put("/api/media/"+e.id,e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},deleteMedia:function(e){var i=n.defer();return o.delete("/api/media/"+e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise}};return e}]),angular.module("ikShared").factory("templateFactory",["$q","$http",function(n,o){"use strict";var e={},s=OS2DISPLAY_TEMPLATES.slides,r=OS2DISPLAY_TEMPLATES.screens;return e.getSlideTemplates=function(){var i=n.defer();return null!==s?i.resolve(s):o.get("/api/templates/slides/all").success(function(e){s=e,i.resolve(s)}).error(function(e,t){i.reject(t)}),i.promise},e.getSlideTemplate=function(i){var o=n.defer();return e.getSlideTemplates().then(function(e){for(var t=0;t<e.length;t++)if(e[t].id===i)return void o.resolve(e[t]);o.reject(404)},function(e){o.reject(e)}),o.promise},e.getScreenTemplates=function(){var i=n.defer();return null!==r?i.resolve(r):o.get("/api/templates/screens/all").success(function(e){r=e,i.resolve(r)}).error(function(e,t){i.reject(t)}),i.promise},e.getScreenTemplate=function(i){var o=n.defer();return e.getScreenTemplates().then(function(e){for(var t=0;t<e.length;t++)if(e[t].id===i)return void o.resolve(e[t]);o.reject(404)},function(e){o.reject(e)}),o.promise},e.saveEnabledTemplates=function(e,t){var i=n.defer();return o.post("/api/templates/save/enabled",{screens:e,slides:t}).success(function(e,t){o.get("/api/templates/slides/enabled").success(function(e){s=e}).error(function(e,t){}),o.get("/api/templates/screens/enabled").success(function(e){r=e}).error(function(e,t){}),i.resolve(t)}).error(function(e,t){i.reject(t)}),i.promise},e.getEnabledSlideTemplates=function(){var i=n.defer();return o.get("/api/templates/slides/enabled").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.getEnabledScreenTemplates=function(){var i=n.defer();return o.get("/api/templates/screens/enabled").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e}]),angular.module("ikShared").factory("slideFactory",["$http","$q","busService",function(o,n,s){"use strict";var e={},r=null;return e.searchSlides=function(e){var i=n.defer();e.type="Os2Display\\CoreBundle\\Entity\\Slide";var t=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+t,error:"searchService.error-"+t},s.$once(e.callbacks.hits,function(e,t){i.resolve(t)}),s.$once(e.callbacks.error,function(e,t){s.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),i.reject(t)}),s.$emit("searchService.request",e),i.promise},e.getSlides=function(){var i=n.defer();return o.get("/api/slide").success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.loadSlidesBulk=function(e){var i=n.defer(),t="?ids[]="+e.join("&ids[]=");return o.get("/api/bulk/slide/api-bulk"+t).success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.clearCurrentSlide=function(){r=null},e.getEditSlide=function(e){var i=n.defer();return null==e||""===e||null!==r&&r.id==e?i.resolve(r):o.get("/api/slide/"+e).success(function(e,t){r=e,i.resolve(r)}).error(function(e,t){i.reject(t)}),i.promise},e.getSlide=function(e){var i=n.defer();return o.get("/api/slide/"+e).success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.saveSlide=function(){var i=n.defer();return o.post("/api/slide",r).success(function(e){i.resolve(e),r=null}).error(function(e,t){i.reject(t)}),i.promise},e.emptySlide=function(){return r={id:null,groups:[],published:!0,schedule_from:null,schedule_to:null,media:[],media_type:null,title:"",user:"",duration:"",orientation:"",template:"",options:null}},e}]),angular.module("ikShared").factory("screenFactory",["$http","$q","busService",function(o,n,s){"use strict";var e={},t=null;return e.searchScreens=function(e){var i=n.defer();e.type="Os2Display\\CoreBundle\\Entity\\Screen";var t=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+t,error:"searchService.error-"+t},s.$once(e.callbacks.hits,function(e,t){i.resolve(t)}),s.$once(e.callbacks.error,function(e,t){s.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),i.reject(t)}),s.$emit("searchService.request",e),i.promise},e.getScreens=function(){var i=n.defer();return o.get("/api/screen").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.loadScreensBulk=function(e){var i=n.defer(),t="?ids[]="+e.join("&ids[]=");return o.get("/api/bulk/screen/api-bulk"+t).success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.getEditScreen=function(e){var i=n.defer();return null==e||""===e?i.resolve(t):o.get("/api/screen/"+e).success(function(e){t=e,i.resolve(t)}).error(function(e,t){i.reject(t)}),i.promise},e.getScreen=function(e){var i=n.defer();return o.get("/api/screen/"+e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.saveScreen=function(){var i=n.defer();return null===t?i.reject(404):o.post("/api/screen",t).success(function(e){t.id=e,i.resolve(t)}).error(function(e,t){i.reject(t)}),i.promise},e.emptyScreen=function(){return t={id:null,template:null,groups:[],description:"",title:"",orientation:"landscape",width:1920,height:1080,channel_screen_regions:[],options:{}}},e}]),angular.module("ikShared").factory("channelFactory",["$http","$q","busService",function(o,n,s){"use strict";var e={},i={};return e.searchChannels=function(e){var i=n.defer();e.type="Os2Display\\CoreBundle\\Entity\\Channel";var t=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+t,error:"searchService.error-"+t},s.$once(e.callbacks.hits,function(e,t){i.resolve(t)}),s.$once(e.callbacks.error,function(e,t){s.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),i.reject(t)}),s.$emit("searchService.request",e),i.promise},e.getChannels=function(){var t=n.defer();return o.get("/api/channel").success(function(e){t.resolve(e)}).error(function(){t.reject()}),t.promise},e.loadChannelsBulk=function(e){var i=n.defer(),t="?ids[]="+e.join("&ids[]=");return o.get("/api/bulk/channel/api-bulk"+t).success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.getEditChannel=function(e){var t=n.defer();return null==e||""===e?t.resolve(i):o.get("/api/channel/"+e).success(function(e){i=e,t.resolve(i)}).error(function(){t.reject()}),t.promise},e.getChannel=function(e){var t=n.defer();return o.get("/api/channel/"+e).success(function(e){t.resolve(e)}).error(function(){t.reject()}),t.promise},e.emptyChannel=function(){return i={id:null,title:"",orientation:"",groups:[],created_at:parseInt((new Date).getTime()/1e3),slides:[],screens:[],sharing_indexes:[],schedule_repeat_days:[]}},e.saveChannel=function(){var e=n.defer();return o.post("/api/channel",i).success(function(){e.resolve("success"),i=null}).error(function(){e.reject("error")}),e.promise},e.channelShare=function(e){var i=n.defer();return o.post("/api/channel/share",e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e}]),angular.module("ikShared").service("sharedSearchFactory",["$q","$rootScope","$http","busService",function(s,e,r,a){"use strict";var h,l=null;function d(i){(h=io.connect(window.config.sharingService.address,{query:"token="+l,"force new connection":!0,"max reconnection attempts":1/0})).on("error",function(e){"Not authorized"===e?r.get("api/auth/sharing/reauth").success(function(e){l=e.token,d(i)}).error(function(e,t){a.$emit("log.error",{cause:t,msg:"Search socket error. Could not reauthorize."}),i.reject(t)}):(a.$emit("log.error",{cause:e,msg:"Search socket error."}),i.reject(e))}),h.on("connect",function(){i.resolve("Connected to the server.")}),h.on("disconnect",function(e){})}this.search=function(e,t){var i,o=s.defer(),n={index:t,type:e.type,query:{match_all:{}}};return void 0!==e.text&&""!==e.text&&(n.query={multi_match:{query:e.text,type:"best_fields",operator:"or",fields:e.fields,analyzer:"string_search"}}),n.sort=e.sort,void 0!==e.filter&&(n.query={filtered:{query:n.query,filter:e.filter}}),e.hasOwnProperty("pager")&&(n.size=e.pager.size,n.from=e.pager.page*e.pager.size),n.uuid=CryptoJS.MD5(JSON.stringify(n)).toString(),n.callbacks={hits:"hits-"+n.uuid,error:"error-"+n.uuid},i=s.defer(),void 0===h?null!==l?d(i):r.get("api/auth/sharing").success(function(e){l=e.token,d(i)}).error(function(e,t){a.$emit("log.error",{cause:t,msg:"Authentication (sharing) to search node failed ("+t+")"}),i.reject(t)}):i.resolve("Connected to the server."),i.promise.then(function(){h.emit("search",n),h.once(n.callbacks.hits,function(e){o.resolve(e)}),h.once(n.callbacks.error,function(e){a.$emit("log.error",{cause:e.message,msg:"Search error"}),o.reject(e.message)})}),o.promise}}]),angular.module("ikShared").factory("sharedChannelFactory",["$http","$q","sharedSearchFactory",function(o,n,i){"use strict";var e={},t=null;return e.searchChannels=function(e,t){return e.type="Os2Display\\CoreBundle\\Entity\\Channel",i.search(e,t)},e.getSharedChannel=function(e,t){var i=n.defer();return o.get("/api/sharing/channel/"+e+"/"+t).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.saveSharedChannel=function(e){var i=n.defer();return o.post("/api/sharing/channel",e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.getAvailableIndexes=function(){var i=n.defer();return null!==t?i.resolve(t):o.get("/api/sharing/available_indexes").success(function(e){t=e,i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.saveSharingIndexes=function(e){var i=n.defer();return o.post("/api/sharing/indexes",e).success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e.getSharingIndexes=function(){var i=n.defer();return o.get("/api/sharing/indexes").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},e}]),angular.module("ikShared").factory("kobaFactory",["$http","$q",function(n,s){"use strict";var e={getResources:function(){var i=s.defer();return n.get("/api/koba/resources").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},getBookingsForResource:function(e,t,i){var o=s.defer();return n.get("/api/koba/resources/"+e+"/bookings/from/"+t+"/to/"+i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise}};return e}]),angular.module("ikShared").controller("BaseSearchController",["$scope","userService","busService",function(n,e,t){"use strict";n.currentUser=e.getCurrentUser(),n.loading=!1,n.sort={created_at:"desc"},n.search_text="",n.pager={size:6,page:0},n.hits=0,n.baseQuery={fields:["name","title"],text:"",sort:{created_at:{order:"desc"}},pager:n.pager,filter:{}},n.userGroups=angular.copy(n.currentUser.api_data.viewable_groups),n.baseBuildSearchFilter=function(e){var t={query:{bool:{must:[],should:[]}}};if("all"!==n.showFromUser&&n.currentUser){var i={};i.term={user:n.currentUser.id},t.query.bool.must.push(i)}if("all"===n.showFromUser&&0===e.length&&(e=n.userGroups.map(function(e){return e.id}),t.query.bool.should.push({bool:{must:[{term:{user:n.currentUser.id}}]}})),e.length){var o="all"===n.showFromUser?"should":"must";t.query.bool[o].push({bool:{must:[{terms:{groups:e}}]}})}return t},n.onChangeText=function(){n.pager.page=0,n.updateSearch()},n.setSort=function(e,t){void 0!==n.sort[e]&&n.sort[e]===t||(n.sort={},n.sort[e]=t,n.baseQuery.sort={},n.baseQuery.sort[e]={order:t},n.updateSearch())},n.setUser=function(e,t){localStorage.setItem("overview."+t+".search_filter_default",e),n.showFromUser!==e&&(n.showFromUser=e,n.setSearchFilters())}}]),angular.module("ikShared").controller("BaseEntityController",["$scope","userService","busService","entityType","$timeout",function(i,e,t,o,n){"use strict";i.baseUnavailableGroups=[],i.userGroups=e.getCurrentUser().groups,i.$watch(o,function(e){null!=e&&e.hasOwnProperty("groups")&&n(function(){i.baseUnavailableGroups=e.groups.reduce(function(e,t){return-1===i.userGroups.findIndex(function(e){return e.id===t.id})&&e.push(t),e},[])})})}]),angular.module("ikShared").directive("ikActionsMenu",[function(){"use strict";return{restrict:"E",replace:!1,transclude:!0,scope:{},link:function(e){e.menuOpen=!1,e.toggleMenu=function(){e.menuOpen=!e.menuOpen}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/actionsMenu/actions-menu.html?"+window.config.version}}]),angular.module("ikShared").directive("ikActionReloadScreen",["$http","busService",function(t,i){"use strict";return{restrict:"E",replace:!1,scope:{id:"@"},link:function(e){e.reloadScreen=function(){!0===window.confirm("Er du sikker på at du vil genindlæse skærmen?")&&t.post("/api/screen/"+e.id+"/reload").success(function(){i.$emit("log.info",{msg:"Genindlæsning lykkedes.",timeout:3e3})}).error(function(e){i.$emit("log.error",{cause:e,msg:"Genindlæsning lykkedes ikke! Dette kan skyldes at skærmen ikke er forbundet."})})}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/actionReloadScreen/action-reload-screen.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSharedChannel",["$interval","$location",function(e,i){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"@",ikSharingIndex:"=",ikClickable:"="},link:function(t){t.slideIndex=0,t.playText="",t.$watch("ikChannel",function(e){e&&(t.ikChannel.slides.length<=0?t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/empty-channel.html?"+window.config.version:(t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/non-empty-channel.html?"+window.config.version,t.buttonState="play"),t.ikChannel.slides.forEach(function(e){$("head > link[href='"+e.css_path+"']")||$("head").append('<link rel="stylesheet" href="'+e.css_path+'" type="text/css" />')}))}),t.play=function(){angular.isDefined(t.interval)?(e.cancel(t.interval),t.interval=void 0,t.buttonState="play"):(t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length,t.interval=e(function(){t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length},2e3),t.buttonState="pause")},t.redirectToChannel=function(){t.ikClickable&&i.path("/shared-channel/"+t.ikChannel.unique_id+"/"+t.ikSharingIndex)},t.$on("$destroy",function(){angular.isDefined(t.interval)&&(e.cancel(t.interval),t.interval=void 0)})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/shared-channel-template.html?"+window.config.version}}]),angular.module("ikShared").directive("sharedChannelOverview",["sharedChannelFactory","userService","$timeout","busService",function(e,t,i,n){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@",ikSingleSlide:"="},link:function(o){o.index={},o.loading=!1,o.pickIndexDialog=!1,o.displaySharingOption=window.config.sharingService.enabled,o.sharingIndexes=[],e.getSharingIndexes().then(function(e){o.sharingIndexes=e}),o.sort={created_at:"desc"},o.currentUser=t.getCurrentUser(),o.showFromUser=localStorage.getItem("overview.shared_channel.search_filter_default")?localStorage.getItem("overview.shared_channel.search_filter_default"):"all",o.pager={size:6,page:0},o.hits=0,o.channels=[];var i={fields:"title",text:"",filter:{bool:{must:{}}},sort:{created_at:{order:"desc"}},pager:o.pager};o.updateSearch=function(){i.text=o.search_text,angular.isUndefined(o.index.index)?n.$emit("log.info",{msg:"Du skal vælge et indeks først.",timeout:3e3}):(o.loading=!0,e.searchChannels(i,o.index.index).then(function(e){o.loading=!1,o.hits=e.hits,o.channels=e.results},function(e){n.$emit("log.error",{cause:e,msg:"Hentning af søgeresultater fejlede."}),o.loading=!1}))},o.$on("channel-deleted",function(){o.updateSearch()}),o.channelSelected=function(t){if(!o.ikSelectedChannels)return!1;var i=!1;return o.ikSelectedChannels.forEach(function(e){e.unique_id==t.unique_id&&(i=!0)}),i},o.clickSharedChannel=function(e,t){o.$emit("channelSharingOverview.clickSharedChannel",e,t)},o.setIndex=function(e){o.index=e,o.pickIndexDialog=!1,o.updateSearch()},o.setUser=function(e){localStorage.setItem("overview.shared_channel.search_filter_default",e),o.showFromUser!==e&&(o.showFromUser=e,o.updateSearch())},o.setSearchFilters=function(){if(delete i.filter,"all"!==o.showFromUser&&(i.filter={bool:{must:[]}}),"all"!==o.showFromUser){var e={};e.term={user:o.currentUser.id},i.filter.bool.must.push(e)}o.updateSearch()},o.setSort=function(e,t){void 0!==o.sort[e]&&o.sort[e]===t||(o.sort={},o.sort[e]=t,i.sort={},i.sort[e]={order:t},o.updateSearch())}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannel",["$interval","$location",function(o,n){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"=",ikClickable:"="},link:function(t,e,i){t.slideIndex=0,t.playText="",i.$observe("ikChannel",function(e){e&&(t.ikChannel.slides.length<=0?t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/channel/empty.html?"+window.config.version:(t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/channel/non-empty.html?"+window.config.version,t.buttonState="play"))}),t.play=function(){angular.isDefined(t.interval)?(o.cancel(t.interval),t.interval=void 0,t.buttonState="play"):(t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length,t.interval=o(function(){t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length},2e3),t.buttonState="pause")},t.redirectToChannel=function(){t.ikClickable&&n.path("/channel/"+t.ikChannel.id)},t.$on("$destroy",function(){angular.isDefined(t.interval)&&(o.cancel(t.interval),t.interval=void 0)})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channel/channel-template.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannelOverview",["busService",function(a){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","channelFactory",function(o,n,e,s){e("BaseSearchController",{$scope:o}),o.showFromUser=localStorage.getItem("overview.channel.search_filter_default")?localStorage.getItem("overview.channel.search_filter_default"):"all",o.displaySharingOption=window.config.sharingService.enabled,o.channels=[];var r=null;o.updateSearch=function(){o.baseQuery.text=o.search_text,o.loading=!0,s.searchChannels(o.baseQuery).then(function(e){o.hits=e.hits;for(var t=[],i=0;i<e.results.length;i++)t.push(e.results[i].id);r&&t.length===r.length&&t.every(function(e,t){return e===r[t]})?o.loading=!1:(r=t,s.loadChannelsBulk(t).then(function(e){o.channels=e,o.loading=!1},function(e){a.$emit("log.error",{cause:e,msg:"Kunne ikke loade søgeresultatet."}),o.loading=!1}))})},o.$on("channel-deleted",function(){o.updateSearch()}),o.channelSelected=function(t){if(!o.ikSelectedChannels)return!1;var i=!1;return o.ikSelectedChannels.forEach(function(e){e.id===t.id&&(i=!0)}),i},o.channelOverviewClickChannel=function(e){o.$emit("channelOverview.clickChannel",e)},o.setSearchFilters=function(){delete o.baseQuery.filter;var e=n("filter")(o.userGroups,{selected:!0},!0).map(function(e){return e.id});o.baseQuery.filter=o.baseBuildSearchFilter(e),o.pager.page=0,o.updateSearch()},o.channelScheduledNow=function(e){var t=new Date,i=t.getDay(),o=t.getHours();if(t=parseInt(t.getTime()/1e3),e.hasOwnProperty("publish_from")&&t<e.publish_from)return!1;if(e.hasOwnProperty("publish_to")&&t>e.publish_to)return!1;if(e.hasOwnProperty("schedule_repeat")&&e.schedule_repeat){if(!(e.hasOwnProperty("schedule_repeat_days")&&0<e.schedule_repeat_days.length))return!1;for(var n=0;n<e.schedule_repeat_days.length;n++)if(i===e.schedule_repeat_days[n].id){if(e.hasOwnProperty("schedule_repeat_from")&&o<e.schedule_repeat_from)return!1;if(e.hasOwnProperty("schedule_repeat_to")&&o>e.schedule_repeat_to)return!1}}return!0},o.getScheduledText=function(e){var t="";if(e.hasOwnProperty("publish_from")&&(t=t+"Udgivet fra: "+n("date")(1e3*e.publish_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("publish_to")&&(t=t+"Udgivet til: "+n("date")(1e3*e.publish_to,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_repeat")&&e.schedule_repeat){t+="Vises disse dage:<br/>";for(var i=0;i<e.schedule_repeat_days.length;i++)t=t+e.schedule_repeat_days[i].name+" ";t+="<br/>",e.hasOwnProperty("schedule_repeat_from")&&(t=t+"Fra: "+e.schedule_repeat_from+":00<br/>"),e.hasOwnProperty("schedule_repeat_to")&&(t=t+"Til: "+e.schedule_repeat_to+":00<br/>")}return t},o.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channelOverview/channel-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikPager",[function(){"use strict";return{restrict:"E",replace:!0,scope:!0,controller:["$scope",function(o){o.pagesFrom=0,o.pagesPerLine=10,o.changePage=function(e){o.pager.page=e,o.updateSearch(),o.pagesFrom=Math.floor(o.pager.page/o.pagesPerLine)*o.pagesPerLine},o.prevPage=function(){0<o.pager.page&&(o.pager.page--,o.updateSearch()),o.pager.page<o.pagesFrom&&(o.pagesFrom=o.pagesFrom-o.pagesPerLine)},o.nextPage=function(){o.pager.page<o.pager.max-1&&(o.pager.page++,o.updateSearch()),o.pager.page===o.pagesFrom+o.pagesPerLine&&(o.pagesFrom=o.pagesFrom+o.pagesPerLine)},o.prevLine=function(){0<o.pager.page&&(o.pager.page=o.pager.page-o.pagesPerLine,o.pager.page<0&&(o.pager.page=0),o.updateSearch()),o.pagesFrom=Math.floor(o.pager.page/o.pagesPerLine)*o.pagesPerLine},o.nextLine=function(){o.pager.page<o.pager.max-1&&(o.pager.page=o.pager.page+o.pagesPerLine,o.pager.page>=o.pager.max&&(o.pager.page=o.pager.max-1),o.updateSearch()),o.pagesFrom=Math.floor(o.pager.page/o.pagesPerLine)*o.pagesPerLine},o.$watch("hits",function(e){var t=[];if(o.pager.max=0,e>o.pager.size){o.pager.max=Math.ceil(e/o.pager.size);for(var i=0;i<o.pager.max;i++)t.push(i)}o.pager.pages=t})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/pager/pager-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikDelete",["$http","$rootScope","busService",function(t,i,o){"use strict";return{restrict:"E",replace:!1,scope:{id:"@",type:"@"},link:function(e){e.remove=function(){!0===window.confirm("Er du sikker på du vil slette dette? Handlingen kan ikke fortrydes.")&&t.delete("/api/"+e.type+"/"+e.id).success(function(){o.$emit("log.info",{msg:"Sletning lykkes.",timeout:3e3}),i.$broadcast(e.type+"-deleted",{})}).error(function(e){o.$emit("log.error",{cause:e,msg:"Sletning lykkes ikke!"})})}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/delete/delete.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannelShare",[function(){"use strict";return{restrict:"E",scope:{ikChannel:"="},link:function(e){e.clickShare=function(){e.$emit("ikChannelShare.clickShare",e.ikChannel)}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channelShare/channel-share.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChecklist",[function(){"use strict";return{restrict:"E",replace:!1,scope:{elements:"=",selected:"=",identity:"="},link:function(n){n.toggleElement=function(i){if(n.selected){var o=-1;n.selected.forEach(function(e,t){e[n.identity]===i[n.identity]&&(o=t)}),-1<o?n.selected.splice(o,1):n.selected.push(i)}},n.elementSelected=function(e){if(!n.selected)return!1;for(var t=0;t<n.selected.length;t++)if(n.selected[t][n.identity]===e[n.identity])return!0;return!1}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/checklist/checklist.html?"+window.config.version}}]),angular.module("ikShared").directive("itkHeader",["busService","$timeout","$compile",function(s,r,a){"use strict";return{restrict:"E",replace:!1,scope:{entity:"=",type:"@",event:"@"},link:function(i,o){if(i.entity&&i.type&&i.event){var e="itkHeader."+i.event,t=new Date,n=e+".returnItems-"+i.entity.id+"-"+t.getTime();s.$on(n,function(e,t){r(function(){if(t.hasOwnProperty("html")){var e=angular.element(t.html);o.append(e),a(e)(i)}})}),s.$emit(e+".requestItems",{entity:i.entity,scope:i,type:i.type,returnEvent:n})}else console.error("itkHeader: entity, type, event attributes are all required!")},template:""}}]),angular.module("ikShared").directive("ikScreen",[function(){"use strict";return{restrict:"E",scope:{ikScreen:"="},link:function(t,e,i){i.$observe("ikScreen",function(e){e&&("landscape"===t.ikScreen.template.orientation?t.style={width:"300px",height:"168.5px"}:t.style={height:"300px",width:"168.5px"})})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/screen/screen-template.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSlideOverview",["busService","$filter",function(r,e){"use strict";return{restrict:"E",scope:{ikSelectedSlides:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","slideFactory","userService",function(n,i,e,o,t){e("BaseSearchController",{$scope:n}),n.showFromUser=localStorage.getItem("overview.slide.search_filter_default")?localStorage.getItem("overview.slide.search_filter_default"):"all",n.slides=[];var s=null;n.updateSearch=function(){n.baseQuery.text=n.search_text,n.loading=!0,o.searchSlides(n.baseQuery).then(function(e){n.hits=e.hits;for(var t=[],i=0;i<e.results.length;i++)t.push(e.results[i].id);s&&t.length===s.length&&t.every(function(e,t){return e===s[t]})?n.loading=!1:(s=t,o.loadSlidesBulk(t).then(function(e){n.slides=e,n.loading=!1},function(e){r.$emit("log.error",{cause:e,msg:"Hentning af søgeresultater fejlede."}),n.loading=!1}))})},n.$on("slide-deleted",function(e){n.updateSearch()}),n.setSearchFilters=function(){delete n.baseQuery.filter;var e=i("filter")(n.userGroups,{selected:!0},!0).map(function(e){return e.id});n.baseQuery.filter=n.baseBuildSearchFilter(e),n.pager.page=0,n.updateSearch()},n.slideSelected=function(i){if(!n.ikSelectedSlides)return!1;var o=!1;return n.ikSelectedSlides.forEach(function(e,t){e.id==i.id&&(o=!0)}),o},n.outOfSchedule=function(e){return!(!e.schedule_from||!e.schedule_to)&&!(1e3*e.schedule_from<Date.now()&&1e3*e.schedule_to>Date.now())},n.slideOverviewClickSlide=function(e){n.$emit("slideOverview.clickSlide",e)},n.slideScheduledNow=function(e){if(!e.published)return!1;var t=new Date;return t=parseInt(t.getTime()/1e3),!(e.hasOwnProperty("schedule_from")&&t<e.schedule_from)&&!(e.hasOwnProperty("schedule_to")&&t>e.schedule_to)},n.getScheduledText=function(e){var t="";return e.published||(t+="Ikke udgivet!<br/>"),e.hasOwnProperty("schedule_from")&&(t=t+"Udgivet fra: "+i("date")(1e3*e.schedule_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_to")&&(t=t+"Udgivet til: "+i("date")(1e3*e.schedule_to,"dd/MM/yyyy HH:mm")+"."),t},n.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/slideOverview/slide-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSlide",["slideFactory","templateFactory",function(e,o){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(t,e,i){t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,i.$observe("ikSlide",function(e){e&&("image"===t.ikSlide.media_type?0<t.ikSlide.media.length?t.ikSlide.currentImage=t.ikSlide.media[0].urls.default_landscape_small:t.ikSlide.currentImage="":0<t.ikSlide.media.length&&0<t.ikSlide.media[0].provider_metadata.length&&t.ikSlide.media[0].provider_metadata[0].thumbnails&&0<t.ikSlide.media[0].provider_metadata[0].thumbnails.length?t.ikSlide.currentImage=t.ikSlide.media[0].provider_metadata[0].thumbnails[1].reference:t.ikSlide.currentImage="",void 0!==t.ikSlide.logo&&null!==t.ikSlide.logo?t.ikSlide.currentLogo=t.ikSlide.logo.urls.default_landscape:t.ikSlide.currentLogo="",o.getSlideTemplate(t.ikSlide.template).then(function(e){e.enabled?(t.template=e,t.templateURL=t.template.paths.preview,t.theStyle={width:t.ikWidth+"px",height:parseFloat(t.template.ideal_dimensions.height*parseFloat(t.ikWidth/t.template.ideal_dimensions.width))+"px"},t.ikSlide.options.fontsize&&(t.theStyle.fontsize=parseFloat(t.ikSlide.options.fontsize*parseFloat(t.ikWidth/t.template.ideal_dimensions.width))+"px")):t.slideError='"'+e.name+'" skabelonen er ikke aktiveret.'},function(){t.slideError='"'+t.ikSlide.template+'" skabelonen blev ikke fundet.'}))})},template:'<div data-ng-if="slideError" style="color: black;">{{ slideError }}</div><div class="preview--slide" data-ng-style="{\'width\': theStyle.width}" data-ng-include="" src="templateURL" data-ng-if="!slideError && template"></div>'}}]),angular.module("ikShared").directive("ikSlideEditable",["templateFactory","$timeout",function(t,n){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(i,o,e){i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,i.$watch("ikSlide",function(e,t){e&&("image"===i.ikSlide.media_type?(i.ikSlide.currentImage="",0<i.ikSlide.media.length&&(i.ikSlide.currentImage=i.ikSlide.media[0].urls.default_landscape)):"video"===i.ikSlide.media_type&&n(function(){o.find("#videoPlayer").load()},1e3),i.ikSlide.currentLogo="",void 0!==i.ikSlide.logo&&null!==i.ikSlide.logo&&(i.ikSlide.currentLogo=i.ikSlide.logo.urls.default_landscape),i.theStyle&&(i.theStyle.fontsize=parseFloat(i.ikSlide.options.fontsize*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px"))},!0),i.$watch("ikSlide.template",function(){i.slideError=null,t.getSlideTemplate(i.ikSlide.template).then(function(e){n(function(){e.enabled?(i.template=e,i.slideTemplateURL=i.template.paths.edit,i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-edit.html?"+window.config.version,i.theStyle={width:i.ikWidth+"px",height:parseFloat(i.template.ideal_dimensions.height*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px",fontsize:parseFloat(i.ikSlide.options.fontsize*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px"}):i.slideError='"'+e.name+'" skabelonen er ikke aktiveret.'})},function(){i.slideError='"'+i.ikSlide.template+'" skabelonen blev ikke fundet.'})})},template:'<div data-ng-if="slideError" class="preview--error">{{ slideError }}</div><div class="preview--slide" data-ng-style="{\'width\': theStyle.width}" data-ng-include="templateURL" data-ng-if="!slideError"></div>'}}]),angular.module("ikShared").directive("ikSharedSlide",[function(){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(t,e,i){t.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,i.$observe("ikSlide",function(e){e&&(t.ikSlide.media_thumbs&&0<t.ikSlide.media_thumbs.length&&(t.ikSlide.currentImage=t.ikSlide.media_thumbs[0]),t.ikSlide.currentLogo=t.ikSlide.logo,t.templateURL=t.ikSlide.preview_path,t.theStyle={width:t.ikWidth+"px",height:parseFloat(1080*parseFloat(t.ikWidth/1920))+"px"},t.ikSlide.options.fontsize&&(t.theStyle.fontsize=parseFloat(t.ikSlide.options.fontsize*parseFloat(t.ikWidth/1920))+"px"))})},template:'<div class="preview--slide" data-ng-include="" src="templateURL"></div>'}}]),angular.module("ikShared").directive("ikScreenOverview",["busService",function(e){"use strict";return{restrict:"E",scope:{ikSelectedScreens:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","screenFactory","userService","busService",function(o,t,e,n,i,s){e("BaseSearchController",{$scope:o});var r=Object.keys(o.currentUser.roles);o.userIsScreenAdmin=o.currentUser.is_admin||-1!==r.indexOf("ROLE_SCREEN_ADMIN"),o.showFromUser=localStorage.getItem("overview.media.search_filter_default")?localStorage.getItem("overview.media.search_filter_default"):"all",o.screens=[];var a=null;o.updateSearch=function(){o.baseQuery.text=o.search_text,o.loading=!0,n.searchScreens(o.baseQuery).then(function(e){o.hits=e.hits;for(var t=[],i=0;i<e.results.length;i++)t.push(e.results[i].id);a&&t.length===a.length&&t.every(function(e,t){return e===a[t]})?o.loading=!1:(a=t,n.loadScreensBulk(t).then(function(e){o.screens=e,o.loading=!1},function(e){s.$emit("log.error",{cause:e,msg:"Kunne ikke hente søgeresultater."}),o.loading=!1}))})},o.$on("screen-deleted",function(){o.updateSearch()}),o.setSearchFilters=function(){delete o.baseQuery.filter;var e=t("filter")(o.userGroups,{selected:!0},!0).map(function(e){return e.id});o.baseQuery.filter=o.baseBuildSearchFilter(e),o.pager.page=0,o.updateSearch()},o.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/screenOverview/screen-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikMediaOverview",["busService",function(a){"use strict";return{restrict:"E",scope:{ikMediaType:"=",ikAutoSearch:"@",ikHideFilters:"=",ikSelectedMedia:"="},controller:["$scope","$filter","$controller","mediaFactory",function(n,s,e,o){e("BaseSearchController",{$scope:n}),n.showFromUser=localStorage.getItem("overview.media.search_filter_default")?localStorage.getItem("overview.media.search_filter_default"):"all",n.media_type="all",n.media=[];var r=null;n.updateSearch=function(){n.baseQuery.text=n.search_text,n.loading=!0,o.searchMedia(n.baseQuery).then(function(e){n.hits=e.hits;for(var t=[],i=0;i<e.results.length;i++)t.push(e.results[i].id);r&&t.length===r.length&&t.every(function(e,t){return e===r[t]})?n.loading=!1:(r=t,o.loadMediaBulk(t).then(function(e){n.media=e,n.loading=!1},function(e){a.$emit("log.error",{cause:e,msg:"Hentning af søgeresultater fejlede."}),n.loading=!1}))})},n.mediaSelected=function(t){if(!n.ikSelectedMedia)return!1;var i=!1;return n.ikSelectedMedia.forEach(function(e){e.id===t.id&&(i=!0)}),i},n.filterMediaType=function(e){n.media_type!==e&&(n.media_type=e,n.setSearchFilters())},n.setSearchFilters=function(){delete n.baseQuery.filter;var e=s("filter")(n.userGroups,{selected:!0},!0).map(function(e){return e.id}),t=n.baseBuildSearchFilter(e);if("all"!==n.media_type){var i={};if(i.term={media_type:n.media_type},"all"===n.showFromUser)for(var o in t.query.bool.should)(o=t.query.bool.should[o]).bool.must.push(i);else t.query.bool.must.push(i)}n.baseQuery.filter=t,n.pager.page=0,n.updateSearch()},n.mediaOverviewClickMedia=function(e){n.$emit("mediaOverview.selectMedia",e)},n.$on("mediaOverview.updateSearch",function(e){n.updateSearch(),e.preventDefault()}),n.$watch("ikMediaType",function(e){void 0===e?n.updateSearch():n.filterMediaType(e)})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/mediaOverview/media-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikMediaUpload",["busService","userService",function(a,h){"use strict";return{restrict:"E",scope:{ikUploadType:"@",queueLimit:"="},controller:["$scope","FileUploader",function(o,e){o.currentStep=1,o.uploadComplete=!1,o.uploadErrors=!1,o.uploadInProgress=!1,o.uploadErrorText="",o.selectedGroups=[];var t=a.$on("mediaUpdateDirective.getCurrentUserGroups",function(e,t){o.userGroups=t});h.getCurrentUserGroups("mediaUpdateDirective.getCurrentUserGroups");var i=["mp4","x-msvideo","x-ms-wmv","quicktime","mpeg","mpg","x-matroska","ogg","webm"],n=["jpg","png","jpeg","bmp","gif"],s="",r=(s="image"===o.ikUploadType||"logo"===o.ikUploadType?n:"video"===o.ikUploadType?i:i.concat(n)).reduce(function(e,t){return e?e+", "+t:t});o.uploader=new e({url:"/api/media",queueLimit:o.queueLimit?o.queueLimit:1,filters:[{name:"mediaFilter",fn:function(e){var t=e.type.slice(e.type.lastIndexOf("/")+1),i=-1!==s.indexOf(t);return i||(o.uploadErrorText=e.type+" er ikke en accepteret medietype. Tilladte typer er: "+r),i}}]}),o.selectFiles=function(){angular.element(document.querySelector("#select-files")).click()},o.clearQueue=function(){o.uploader.clearQueue(),o.uploadComplete=!1,o.uploadErrors=!1,o.currentStep=1,o.uploadErrorText=""},o.removeItem=function(e){e.remove(),o.uploader.queue.length<=0&&(o.currentStep=1,o.uploadComplete=!1,o.uploadErrors=!1)},o.upload=function(){o.uploadInProgress=!0;var e=[];for(var t in o.selectedGroups)t=o.selectedGroups[t],e.push(t.id);for(var i in o.uploader.queue)(i=o.uploader.queue[i]).formData[0].groups=JSON.stringify(e);o.uploader.uploadAll()},o.isImage=function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!==n.indexOf(t)},o.getProgress=function(){if(o.uploader.progress)return o.uploadInProgress&&5<o.uploader.progress?o.uploader.progress-5:o.uploader.progress},o.uploader.onAfterAddingFile=function(e){e.formData=[{title:"",logo:!1}],"logo"===o.ikUploadType&&(e.formData[0].logo=!0)},o.uploader.onAfterAddingAll=function(){o.currentStep++},o.uploader.onErrorItem=function(e,t,i){o.uploadErrors=!0,o.uploadInProgress=!1,o.clearQueue(),o.uploadErrorText="Der skete en fejl under upload af filer (fejlkode: "+i+")."},o.uploader.onCompleteAll=function(){o.uploadComplete=!0,o.uploadInProgress=!1},o.uploader.onSuccessItem=function(e,t){o.$emit("mediaUpload.uploadSuccess",{image:e,id:t[0],queue:o.uploader.queue})},o.hideError=function(){o.uploadErrorText=!1},o.$on("$destory",function(){t()})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/mediaUpload/media-upload-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikThumb",["$window",function(t){"use strict";var a=!(!t.FileReader||!t.CanvasRenderingContext2D),h=function(e){return angular.isObject(e)&&e instanceof t.File},l=function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)};return{restrict:"A",template:"<canvas/>",link:function(e,t,i){if(a){var o=e.$eval(i.ikThumb);if(h(o.file)&&l(o.file)){var n=t.find("canvas"),s=new FileReader;s.onload=function(e){var t=new Image;t.onload=r,t.src=e.target.result},s.readAsDataURL(o.file)}}function r(){var e=o.width?o.width:this.width/this.height*o.height,t=o.height?o.height:this.height/this.width*o.width;n.attr({width:e,height:t}),n[0].getContext("2d").drawImage(this,0,0,e,t)}}}}]),angular.module("ikShared").directive("autoGrow",function(){"use strict";return{restrict:"A",scope:{fontSize:"@"},link:function(e,t){function i(e){e.css("height","0px");var t=e.prop("scrollHeight"),i=e.css("min-height").replace("px","");e.css("height",Math.max(t,i)+"px")}var o=$(t);t.bind("keyup",function(){i(o)}),e.$watch("fontSize",function(e){e&&i(o)}),setTimeout(function(){i(o)},100)}}}),angular.module("ikShared").directive("includeReplace",function(){"use strict";return{require:"ngInclude",restrict:"A",link:function(e,t){t.replaceWith(t.children())}}}),function(){"use strict";angular.module("itkControlPanel",[]).directive("controlPanel",["busService",function(e){return{restrict:"E",scope:{template:"=",data:"=",screen:"=",display:"=",saveAction:"&",region:"=",options:"="},replace:!0,link:function(t){t.selectedTab=null,e.$emit("bodyService.addClass","is-screen"),t.getContent=function(){return t.template},t.clickTab=function(e){t.selectedTab=e},t.toggleChannelType=function(e){t.channelType=e},t.$on("$destroy",function(){document.getElementsByTagName("body")[0].style.overflow=""})},template:'<div data-ng-include="getContent()"></div>'}}])}.call(this),function(){"use strict";angular.module("ngModal",[]).directive("modalDialog",[function(){return{restrict:"E",scope:{show:"=",onClose:"&?"},replace:!0,transclude:!0,link:function(i){i.hideModal=function(){i.show=!1},i.$watch("show",function(e,t){if(document.getElementsByTagName("body")[0].style.overflow=e&&!t?"hidden":"",!e&&t&&null!==i.onClose)return i.onClose()})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/ngModal/ng-modal.html?"+window.config.version}}])}.call(this),angular.module("ikShared").directive("ikDisabledList",[function(){"use strict";return{restrict:"E",replace:!1,scope:{elements:"="},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/disabledList/disabled-list.html?"+window.config.version}}]),function(){"use strict";angular.module("itkScreenTemplatePickerWidget",[]).directive("screenTemplatePickerWidget",["templateFactory","busService",function(e,i){return{restrict:"E",scope:{screen:"="},replace:!0,link:function(t){t.templates=[],e.getEnabledScreenTemplates().then(function(e){t.templates=e},function(e){i.$emit("log.error",{cause:e,msg:"Kunne ikke loade templates."})}),t.pickTemplate=function(e){t.screen.template=angular.copy(e)}},templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/screenTemplatePickerWidget/screenTemplatePickerWidget.html?"+window.config.version}}])}.call(this),function(){"use strict";angular.module("itkTextWidget",[]).directive("textWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="text" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this),function(){"use strict";angular.module("itkTextAreaWidget",[]).directive("textAreaWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<textarea class="cpw--textarea-input" data-ng-model="field" placeholder="{{placeholderText}}"></textarea>'}})}.call(this),function(){"use strict";angular.module("itkNumberWidget",[]).directive("numberWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="number" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this),function(){"use strict";angular.module("itkChannelPickerWidget",[]).directive("channelPickerWidget",["userService","channelFactory","busService",function(t,n,s){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/channelPickerWidget/channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(o){o.sharingEnabled=window.config.sharingService.enabled,o.loading=!1,o.showFromUser="all",o.sort={created_at:"desc"},o.selectedGroup=null,o.currentUser=t.getCurrentUser();var e=s.$on("itkChannelPickerWidget.currentUserGroups",function(e,t){o.userGroups=t});t.getCurrentUserGroups("itkChannelPickerWidget.currentUserGroups"),o.pager={size:5,page:0},o.hits=0,o.channels=[],o.search={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:o.pager},o.updateSearch=function(){var e=angular.copy(o.search);e.text=o.search_text,null!==o.selectedGroup&&e.filter.bool.must.push({terms:{groups:[o.selectedGroup.id]}}),o.loading=!0,n.searchChannels(e).then(function(e){o.hits=e.hits;for(var t=[],i=0;i<e.results.length;i++)t.push(e.results[i].id);n.loadChannelsBulk(t).then(function(e){o.channels=e,o.loading=!1},function(e){s.$emit("log.error",{cause:e,msg:"Kunne ikke hente søgeresultater."}),o.loading=!1})})},o.channelSelected=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)if((t=o.screen.channel_screen_regions[i]).channel&&t.channel.id===e.id&&t.region===o.region)return!0;return!1},o.addChannel=function(e){o.screen.channel_screen_regions.push({id:null,screen_id:o.screen.id,channel:e,region:o.region})},o.removeChannel=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)(t=o.screen.channel_screen_regions[i]).channel&&t.channel.id===e.id&&t.region===o.region&&o.screen.channel_screen_regions.splice(i,1)},o.selectGroup=function(e){o.pickGroupDialog=!1,o.selectedGroup=e,o.updateSearch()},o.$watch("screen",function(e){e&&o.updateSearch()}),o.$on("$destroy",function(){e()})}}}])}.call(this),function(){"use strict";angular.module("itkSharedChannelPickerWidget",[]).directive("sharedChannelPickerWidget",["sharedChannelFactory","busService",function(n,s){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/sharedChannelPickerWidget/shared-channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(o,e,t){o.index=null,o.loading=!1,o.pickIndexDialog=!1,o.sharingIndexes=[],n.getSharingIndexes().then(function(e){o.sharingIndexes=e},function(e){s.$emit("log.error",{cause:e,msg:"Kunne ikke hente delingsindeks."})}),o.showFromUser="all",o.sort={created_at:"desc"},o.pager={size:9,page:0},o.hits=0,o.channels=[];var i={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:o.pager};o.updateSearch=function(){null!==o.index&&(i.text=o.search_text,o.loading=!0,n.searchChannels(i,o.index.index).then(function(e){o.loading=!1,o.hits=e.hits,o.channels=e.results},function(e){s.$emit("log.error",{cause:e,msg:"Kunne ikke hente søgeresultater."}),o.loading=!1}))},o.setIndex=function(e){o.index=e,o.pickIndexDialog=!1,o.updateSearch()},o.channelSelected=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)if((t=o.screen.channel_screen_regions[i]).shared_channel&&t.shared_channel.unique_id===e.unique_id&&t.region===o.region)return!0;return!1},o.addChannel=function(e){void 0!==e.index&&null!==e.index||(e.index=o.index.index),o.screen.channel_screen_regions.push({id:null,screen_id:o.screen.id,shared_channel:e,region:o.region})},o.removeChannel=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)(t=o.screen.channel_screen_regions[i]).shared_channel&&t.shared_channel.unique_id===e.unique_id&&t.region===o.region&&o.screen.channel_screen_regions.splice(i,1)},t.$observe("screen",function(e){e&&o.updateSearch()})}}}])}.call(this),function(){"use strict";angular.module("itkChannelRemoverWidget",[]).directive("channelRemoverWidget",[function(){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/channelRemoverWidget/channel-remover-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(o){o.search_text="",o.getSearch=function(){return{title:o.search_text}},o.removeChannel=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)(void 0===(t=o.screen.channel_screen_regions[i]).shared_channel&&t.channel.id===e.id&&t.region===o.region||t.shared_channel&&t.shared_channel.unique_id===e.unique_id&&t.region===o.region)&&o.screen.channel_screen_regions.splice(i,1)}}}}])}.call(this),function(){"use strict";angular.module("itkRegionPreviewWidget",[]).directive("regionPreviewWidget",[function(){return{restrict:"E",scope:{region:"=",screen:"=",width:"="},replace:!1,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/regionPreviewWidget/region-preview-widget.html?"+window.config.version,link:function(i){i.getNumberOfChannels=function(){for(var e=0,t=0;t<i.screen.channel_screen_regions.length;t++)i.screen.channel_screen_regions[t].region===i.region&&e++;return e}}}}])}.call(this),angular.module("menuApp").directive("mainMenu",["$location","busService",function(e,t){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/main-menu.html?"+config.version,scope:{},link:function(i){i.mainMenuItems=[],i.siteTitle=window.config.siteTitle,i.url=e.url(),t.$on("menuApp.returnMainMenuItems",function(e,t){t.forEach(function(e){i.mainMenuItems.push(e)}),i.mainMenuItems.sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)})}),t.$on("$locationChangeSuccess",function(){i.url=e.url()}),t.$emit("menuApp.requestMainMenuItems",{})}}}]),angular.module("menuApp").directive("hamburgerMenu",["$http","$location","busService",function(e,t,n){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/hamburger-menu.html?"+config.version,scope:{},link:function(i){i.hamburgerMenuItems=[],i.menuOpen=!1,i.currentUser=null,i.url=t.url(),n.$on("userService.returnCurrentUser",function(e,t){i.currentUser=t}),n.$emit("userService.getCurrentUser",{}),n.$on("menuApp.returnHamburgerMenuItems",function(e,t){t.forEach(function(e){i.hamburgerMenuItems.push(e)}),i.hamburgerMenuItems.sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)})}),n.$emit("menuApp.requestHamburgerMenuItems",{}),n.$on("$locationChangeSuccess",function(){i.url=t.url()}),n.$emit("userService.getCurrentUser",{}),i.toggleMenu=function(){i.menuOpen=!i.menuOpen,i.menuOpen?n.$emit("bodyService.addClass","is-locked"):n.$emit("bodyService.removeClass","is-locked"),$(".hamburger-menu").click(function(e){e.stopPropagation()})},i.userHasPermission=function(e){return!e||(!("super-admin"!==e||!i.currentUser||!i.currentUser.is_super_admin)||!("admin"!==e||!i.currentUser||!i.currentUser.is_admin))},i.updateTemplates=function(){i.menuOpen=!1,e.get("/api/command/update_templates").success(function(e,t,i,o){n.$emit("log.info",{msg:"Templates opdateret.",timeout:3e3})}).error(function(e,t,i,o){n.$emit("log.error",{cause:t,msg:"Update af templates fejlede."})})},i.reindex=function(){i.menuOpen=!1,e.get("/api/command/reindex").success(function(e,t,i,o){n.$emit("log.info",{msg:"Reindex gennemført.",timeout:3e3})}).error(function(e,t,i,o){n.$emit("log.error",{cause:t,msg:"Reindex fejlede."})})},i.forcePush=function(){i.menuOpen=!1,e.get("/api/command/forcepush").success(function(e,t,i,o){n.$emit("log.info",{msg:"Force push gennemført.",timeout:3e3})}).error(function(e,t,i,o){n.$emit("log.error",{cause:t,msg:"Force push fejlede."})})}}}}]),angular.module("menuApp").directive("subMenu",["$location","busService",function(e,i){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/sub-menu.html?"+config.version,scope:{},link:function(t){t.url=e.url();var d=[];t.subMenuItems=[],i.$on("menuApp.returnSubMenuItems",function(e,t){for(var i=0;i<t.length;i++){var o=t[i].mainMenuItem,n=t[i].items;d.hasOwnProperty(o)||(d[o]=[]);for(var s=0;s<n.length;s++){for(var r=n[s],a=!0,h=0;h<d[o].length;h++)if(d[o][h].title===r.title){a=!1;break}a&&d[o].push(r)}}for(var l in d)d[l].sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)});c()});var c=function(){if(0===t.url.indexOf("/channel")||0===t.url.indexOf("/shared-channel"))t.subMenuItems=d.channel;else if(0===t.url.indexOf("/slide"))t.subMenuItems=d.slide;else if(0===t.url.indexOf("/screen"))t.subMenuItems=d.screen;else if(0===t.url.indexOf("/media"))t.subMenuItems=d.media;else{var e=t.url.split("/");1<e.length?t.subMenuItems=d[e[1]]:t.subMenuItems=[]}};i.$on("$locationChangeSuccess",function(){t.url=e.url(),c()}),i.$emit("menuApp.requestSubMenuItems")}}}]),angular.module("messageApp").directive("messages",["busService","$timeout",function(e,o){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/messageApp/directive/messages.html?"+window.config.itkLog.version,link:function(i){i.expanded=!1,i.messages={},e.$on("messages.add",function(e,t){i.$apply(function(){var e=CryptoJS.MD5(JSON.stringify(t)).toString();t.hash=e,void 0!==(i.messages[e]=t).timeout&&o(function(){i.close(t)},t.timeout)})}),e.$on("messages.clear",function(){i.clear()}),i.toggleExpanded=function(){i.expanded=!i.expanded},i.close=function(e){delete i.messages[e.hash]},i.clear=function(){i.messages=[]}}}}]),angular.module("ikApp").config(["$sceDelegateProvider","$translateProvider",function(e,t){"use strict";t.useSanitizeValueStrategy("escape").useStaticFilesLoader({prefix:"bundles/os2displayadmin/apps/ikApp/translations/locale-",suffix:".json"}).preferredLanguage("da").fallbackLanguage("da").forceAsyncReload(!0),e.resourceUrlWhitelist(["self","**"])}]),angular.module("ikApp").config(["$routeProvider",function(e){"use strict";e.when("/",{redirectTo:"/channel-overview"}).when("/admin-sharing",{controller:"AdminSharingController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/adminSharing/admin-sharing.html?"+window.config.version}).when("/admin-templates",{controller:"AdminTemplatesController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/adminTemplates/admin-templates.html?"+window.config.version}).when("/channel-overview",{controller:"ChannelOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channelOverview/channel-overview.html?"+window.config.version}).when("/slide-overview",{controller:"SlideOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slideOverview/slide-overview.html?"+window.config.version}).when("/screen-overview",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screenOverview/screen-overview.html?"+window.config.version}).when("/media-overview",{controller:"MediaOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaOverview/media-overview.html?"+window.config.version}).when("/shared-channel-overview",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}).when("/screen",{controller:"ScreenController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screen/screen.html?"+window.config.version}).when("/screen/:id",{controller:"ScreenController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screen/screen.html?"+window.config.version}).when("/slide",{controller:"SlideController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slide/slide.html?"+window.config.version}).when("/slide/:id",{controller:"SlideController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slide/slide.html?"+window.config.version}).when("/shared-channel/:id/:index",{controller:"SharedChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/sharedChannel/shared-channel.html?"+window.config.version}).when("/channel",{controller:"ChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channel/channel.html?"+window.config.version}).when("/channel/:id",{controller:"ChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channel/channel.html?"+window.config.version}).when("/media/upload",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaUpload/media-upload.html?"+window.config.version}).when("/media/:id",{controller:"MediaEditController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaEdit/media-edit.html?"+window.config.version})}]),angular.module("ikApp").filter("activeEvents",function(){"use strict";return function(e){if(!angular.isArray(e))return!1;for(var t=parseInt(Date.now()/1e3),i=[],o=0;o<e.length;o++){var n=e[o];(n.from&&n.to&&n.to>=t||n.from&&n.from>=t)&&i.push(n)}return i}}),angular.module("ikApp").controller("ScreenController",["$scope","$controller","$location","$routeParams","$timeout","screenFactory","channelFactory","sharedChannelFactory","templateFactory","busService","userService",function(t,e,i,o,n,s,r,a,h,l,d){"use strict";e("BaseEntityController",{$scope:t,entityType:"screen"}),t.loading=!0,t.sharingEnabled=window.config.sharingService.enabled,t.screen={},t.toolbarTemplate=null,t.display=!1,t.region=null,t.controlPanelData={userGroups:t.userGroups,baseUnavailableGroups:t.baseUnavailableGroups},t.$watch("userGroups",function(){t.controlPanelData.userGroups=t.userGroups}),t.$watch("baseUnavailableGroups",function(){t.controlPanelData.baseUnavailableGroups=t.baseUnavailableGroups}),o.id?null===o.id||void 0===o.id||""===o.id?i.path("/screen-overview"):s.getEditScreen(o.id).then(function(e){t.loading=!1,t.screen=e,t.screen.channel_screen_regions.forEach(function(e){e.shared_channel&&(e.shared_channel.content=JSON.parse(e.shared_channel.content),e.shared_channel.title=e.shared_channel.content.title,e.shared_channel.slides=e.shared_channel.content.slides)}),t.screen==={}&&i.path("/screen")},function(e){l.$emit("log.error",{cause:e,msg:"Skærmen med id: "+o.id+" blev ikke fundet"})}):(t.screen=s.emptyScreen(),h.getScreenTemplate("full-screen").then(function(e){t.screen.template=e,t.loading=!1},function(e){404===e&&h.getEnabledScreenTemplates().then(function(e){t.screen.template=angular.copy(e[0]),t.screen.orientation=e[0].orientation,t.loading=!1},function(e){l.$emit("log.error",{cause:e,msg:"Skabelonerne blev ikke loaded"})})})),t.saveScreenAndClose=function(){t.displayToolbar=!1,t.region=null,s.saveScreen().then(function(e){l.$emit("log.info",{msg:"Skærmen ("+e.title+") er gemt",timeout:5e3}),n(function(){i.path("/screen-overview")},1e3)},function(e){l.$emit("log.error",{cause:e,msg:"Skærmen blev ikke gemt"})})},t.saveScreen=function(){t.displayToolbar=!1,t.region=null,s.saveScreen().then(function(e){l.$emit("log.info",{msg:"Skærmen ("+e.title+") er gemt",timeout:5e3})},function(e){l.$emit("log.error",{cause:e,msg:"Skærmen blev ikke gemt"})})},t.triggerTool=function(e){t.screen.template.tools.hasOwnProperty(e.name)?t.toolbarTemplate=t.screen.template.tools[e.name]:t.toolbarTemplate="bundles/os2displayadmin/apps/ikShared/toolbars/"+e.name+".html?"+window.config.version,t.region=e.region,t.displayToolbar=!0}}]),angular.module("ikApp").controller("SharedChannelController",["$scope","$location","$routeParams","$timeout","screenFactory","sharedChannelFactory","busService",function(t,i,e,o,n,s,r){"use strict";function a(e){t.step=e,t.templatePath="bundles/os2displayadmin/apps/ikApp/pages/sharedChannel/shared-channel-step"+t.step+".html?"+window.config.version}t.steps=1,t.step=1,t.channel={},t.channel.slides=[],t.status="edit",n.getScreens().then(function(e){t.screens=e},function(e){r.$emit("log.error",{cause:e,msg:"Kunne ikke hente skærme."})}),e.id&&e.index?s.getSharedChannel(e.id,e.index).then(function(e){t.channel=JSON.parse(e.content),t.channel==={}&&i.path("/channel-sharing-overview"),a(1)},function(e){r.$emit("log.error",{cause:e,msg:"Delt kanal kunne ikke hentes."})}):i.path("/channel-sharing-overview"),t.submitStep=function(){i.path("/channel-sharing-overview")},t.goToStep=function(e){a(e)}}]),angular.module("ikApp").controller("AdminSharingController",["busService","sharedChannelFactory","$scope",function(t,e,i){"use strict";i.saving=!1,i.availableIndexes=[],e.getAvailableIndexes().then(function(e){e.forEach(function(e){"shared"===e.tag&&i.availableIndexes.push(e)})},function(e){t.$emit("log.error",{cause:e,msg:"Hentning af tilgængelige delingsindeks fejlede."})}),i.chosenIndexes=[],e.getSharingIndexes().then(function(e){i.chosenIndexes=e},function(e){t.$emit("log.error",{cause:e,msg:"Hentning af valgte delingsindeks fejlede."})}),i.save=function(){i.saving=!0,e.saveSharingIndexes(i.chosenIndexes).then(function(){t.$emit("log.info",{msg:"Delingsindeks gemt",timeout:3e3}),i.saving=!1},function(e){t.$emit("log.error",{cause:e,msg:"Delingsindeks blev ikke gemt."}),i.saving=!1})}}]),angular.module("ikApp").controller("AdminTemplatesController",["busService","templateFactory","$scope",function(t,e,o){"use strict";o.saving=!1,o.screenTemplates=[],o.slideTemplates=[],o.enabledScreenTemplates=[],o.enabledSlideTemplates=[],e.getScreenTemplates().then(function(e){o.screenTemplates=e;for(var t=[],i=0;i<e.length;i++)e[i].enabled&&t.push(e[i]);o.enabledScreenTemplates=t},function(e){t.$emit("log.error",{cause:e,msg:"Hentning af tilgængelige templates fejlede."})}),e.getSlideTemplates().then(function(e){o.slideTemplates=e;for(var t=[],i=0;i<e.length;i++)e[i].enabled&&t.push(e[i]);o.enabledSlideTemplates=t},function(e){t.$emit("log.error",{cause:e,msg:"Hentning af tilgængelige templates fejlede."})}),o.save=function(){o.saving=!0,e.saveEnabledTemplates(o.enabledScreenTemplates,o.enabledSlideTemplates).then(function(){t.$emit("log.info",{msg:"Template valg blev gemt",timeout:3e3}),o.saving=!1},function(e){t.$emit("log.error",{cause:e,msg:"Template valg blev ikke gemt"}),o.saving=!1})}}]),angular.module("ikApp").controller("ChannelController",["$scope","$controller","$location","$routeParams","$timeout","$filter","channelFactory","slideFactory","busService","userService",function(n,e,t,i,o,s,r,a,h,l){"use strict";function d(e){n.step=e,n.templatePath="bundles/os2displayadmin/apps/ikApp/pages/channel/channel-step"+n.step+".html?"+window.config.version}function c(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}e("BaseEntityController",{$scope:n,entityType:"channel"}),n.steps=4,n.channel={},n.days=[{id:1,name:"Mandag"},{id:2,name:"Tirsdag"},{id:3,name:"Onsdag"},{id:4,name:"Torsdag"},{id:5,name:"Fredag"},{id:6,name:"Lørdag"},{id:0,name:"Søndag"}],n.editor={slideOverviewEditor:!1,toggleSlideOverviewEditor:function(){h.$emit("bodyService.toggleClass","is-locked"),n.editor.slideOverviewEditor=!n.editor.slideOverviewEditor}},n.$on("slideOverview.clickSlide",function(e,t){n.toggleSlide(t)}),i.id?null===i.id||void 0===i.id||""===i.id?t.path("/channel"):r.getEditChannel(i.id).then(function(e){n.channel=e,n.channel.status="edit-channel",n.channel==={}&&t.path("/channel"),d(2)},function(e){t.path("/channel-overview"),h.$emit("log.error",{cause:e,msg:"Hentning af valgt kanal med id:"+i.id+" fejlede"})}):(n.channel=r.emptyChannel(),d(1)),n.submitStep=function(){n.step===n.steps?(n.disableSubmitButton=!0,r.saveChannel().then(function(){h.$emit("log.info",{msg:"Kanal gemt.",timeout:3e3}),o(function(){t.path("/channel-overview")},1e3)},function(e){h.$emit("log.error",{cause:e,msg:"Gem af kanal fejlede."}),n.disableSubmitButton=!1})):d(n.step+1)},n.setOrientation=function(e){n.channel.orientation=e},n.slideSelected=function(t){var i=!1;return n.channel.slides.forEach(function(e){t===e.id&&(i=!0)}),i},n.validation={titleSet:function(){return e="title",!!n.channel&&""!==n.channel[e];var e}},n.toggleSlide=function(i){var o=null;n.channel.slides.forEach(function(e,t){i.id===e.id&&(o=t)}),null!==o?n.channel.slides.splice(o,1):n.channel.slides.push(i)},n.slideScheduledNow=function(e){if(!e.published)return!1;var t=new Date;return t=parseInt(t.getTime()/1e3),!(e.hasOwnProperty("schedule_from")&&t<e.schedule_from)&&!(e.hasOwnProperty("schedule_to")&&t>e.schedule_to)},n.getScheduledText=function(e){var t="";return e.published||(t+="Ikke udgivet!<br/>"),e.hasOwnProperty("schedule_from")&&(t=t+"Udgivet fra: "+s("date")(1e3*e.schedule_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_to")&&(t=t+"Udgivet til: "+s("date")(1e3*e.schedule_to,"dd/MM/yyyy HH:mm")+"."),t},n.goToStep=function(e){var t=1;n.validation.titleSet()&&(t+=3),e<=t&&d(e)},n.pushRight=function(e){e===n.channel.slides.length-1?c(n.channel.slides,e,0):c(n.channel.slides,e,e+1)},n.pushLeft=function(e){c(n.channel.slides,e,0===e?n.channel.slides.length-1:e-1)},n.handleDrop=function(e,t){e=parseInt(e.split("index-")[1]),t=parseInt(t.split("index-")[1]);var i=n.channel.slides.splice(e,1);n.channel.slides.splice(t,0,i[0])},n.sortSlides=function(e){var t=n.lastSortUsed===e;"random"!==(n.lastSortUsed=e)?n.channel.slides=s("orderBy")(n.channel.slides,t?"-":""+e):n.channel.slides=function(e){for(var t,i,o=e.length;0!==o;)i=Math.floor(Math.random()*o),t=e[--o],e[o]=e[i],e[i]=t;return e}(n.channel.slides)}}]),angular.module("ikApp").controller("ChannelOverviewController",["$scope","sharedChannelFactory","channelFactory","busService",function(i,e,o,n){"use strict";i.shareDialogShow=!1,i.shareDialogChannel=null,window.config.sharingService.enabled&&(i.$on("ikChannelShare.clickShare",function(e,t){i.shareDialogShow=!0,i.shareDialogChannel=t,o.getChannel(t.id).then(function(e){i.shareDialogChannel=e,i.shareDialogChannel.sharing_indexes||(i.shareDialogChannel.sharing_indexes=[])},function(e){n.$emit("log.error",{cause:e,msg:"Hentning af kanal fejlede"})})}),i.sharingIndexes=[],e.getSharingIndexes().then(function(e){i.sharingIndexes=e},function(e){n.$emit("log.error",{cause:e,msg:"Hentning af delingsindeks fejlede."})}),i.saveSharingChannel=function(){o.channelShare(i.shareDialogChannel).then(function(){n.$emit("log.info",{msg:"Delingskonfiguration af kanal lykkedes.",timeout:3e3})},function(e){n.$emit("log.error",{cause:e,msg:"Deling af kanal fejlede."})})})}]),angular.module("ikApp").controller("MediaOverviewController",["$scope","$location",function(e,i){"use strict";e.$on("mediaOverview.selectMedia",function(e,t){i.path("/media/"+t.id)})}]),angular.module("ikApp").controller("MediaEditController",["$scope","$controller","$location","$routeParams","$timeout","mediaFactory","busService","userService",function(t,e,i,o,n,s,r,a){"use strict";e("BaseEntityController",{$scope:t,entityType:"media"}),t.loading=!0,s.getMedia(o.id).then(function(e){n(function(){t.media=e,t.media==={}&&i.path("/media-overview")})},function(e){r.$emit("log.error",{cause:e,msg:"Kunne ikke hente media med id: "+o.id}),i.path("/media-overview")}).then(function(){t.loading=!1}),t.updateMedia=function(){t.loading=!0,s.updateMedia(t.media).then(function(){n(function(){r.$emit("log.info",{msg:"Media opdateret.",timeout:3e3})})},function(e){r.$emit("log.error",{cause:e,msg:"Opdatering af media fejlede."})}).then(function(){t.loading=!1})},t.delete=function(){t.loading=!0,s.deleteMedia(t.media.id).then(function(){r.$emit("log.info",{msg:"Media slettet.",timeout:3e3}),n(function(){i.path("/media-overview")},500)},function(e){r.$emit("log.error",{cause:e,msg:"Sletning af media fejlede."})}).then(function(){t.loading=!1})},t.getContentType=function(e){return e?e.content_type.split("/")[0]:""}}]),angular.module("ikApp").controller("SlideOverviewController",["$scope","$location",function(e,i){"use strict";e.$on("slideOverview.clickSlide",function(e,t){i.path("/slide/"+t.id)})}]),angular.module("ikApp").controller("SlideController",["$scope","$controller","$location","$routeParams","$timeout","slideFactory","templateFactory","channelFactory","busService","userService",function(n,e,t,i,o,s,r,a,h,l){"use strict";function d(e){n.step=e,n.templatePath="bundles/os2displayadmin/apps/ikApp/pages/slide/slide-step"+n.step+".html?"+window.config.version}function c(e){return!!n.slide&&""!==n.slide[e]}e("BaseEntityController",{$scope:n,entityType:"slide"}),n.steps=6,n.slide={},n.templates=[],r.getEnabledSlideTemplates().then(function(e){for(var t in e)e.hasOwnProperty(t)&&n.templates.push(e[t])},function(e){h.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide templates."})}),n.editor={channelOverviewEditor:!1,toggleChannelOverviewEditor:function(){h.$emit("bodyService.toggleClass","is-locked"),n.editor.channelOverviewEditor=!n.editor.channelOverviewEditor}},n.$on("channelOverview.clickChannel",function(e,t){n.toggleChannel(t)}),i.id?null===i.id||void 0===i.id||""===i.id?t.path("/slide"):(s.clearCurrentSlide(),s.getEditSlide(i.id).then(function(e){n.slide=e,n.slide.status="edit-slide",n.slide==={}&&t.path("/slide"),d(3)},function(e){h.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide med id: "+i.id}),t.path("/slide-overview")})):(n.slide=s.emptySlide(),n.slide.channels=[],d(1)),n.submitStep=function(){n.step===n.steps?(n.disableSubmitButton=!0,""===n.slide.duration&&(n.slide.duration=15),s.saveSlide().then(function(){h.$emit("log.info",{msg:"Slide er gemt",timeout:3e3}),o(function(){t.path("/slide-overview")},1e3)},function(e){h.$emit("log.error",{cause:e,msg:"Kunne ikke gemme slide"}),n.disableSubmitButton=!1})):d(n.step+1)},n.validation={titleSet:function(){return c("title")},templateSet:function(){return c("template")}},n.goToStep=function(e){var t=1;n.validation.titleSet()&&(t++,n.validation.templateSet()&&(t+=4)),e<=t&&d(e)},n.selectTemplate=function(t){n.slide.template=t;var i=null;n.templates.forEach(function(e){e.id===t&&(i=e)}),null!==i&&(n.slide.slide_type=i.slide_type,n.slide.options||(n.slide.options={}),n.slide.orientation=i.orientation,angular.forEach(i.empty_options,function(e,t){void 0===n.slide.options[t]&&(n.slide.options[t]=angular.copy(e))}),""===n.slide.options.headline&&(n.slide.options.headline=n.slide.title),n.slide.media_type=i.media_type)},n.channelSelected=function(t){var i=!1;return n.slide.channels.forEach(function(e){t.id===e.id&&(i=!0)}),i},n.hasChannel=function(t){var i=!1;return n.slide.channels.forEach(function(e){t.id===e.id&&(i=!0)}),i},n.toggleChannel=function(i){var o=null;n.slide.channels.forEach(function(e,t){i.id===e.id&&(o=t)}),null!==o?n.slide.channels.splice(o,1):n.slide.channels.push(i)}}]),angular.module("ikApp").controller("SlideEditController",["$scope","slideFactory","busService","templateFactory","$compile","$templateRequest",function(o,e,n,t,s,i){"use strict";e.getEditSlide(null).then(function(e){o.slide=e,t.getSlideTemplate(e.template).then(function(e){o.template=e},function(e){n.$emit("log.error",{cause:e,msg:"Kunne ikke loade værktøjer til slidet."})})},function(e){n.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide."})}),n.$emit("bodyService.removeClass","is-locked"),o.editor={editorOpen:!1,hideEditors:function(){n.$emit("bodyService.removeClass","is-locked"),o.editor.editorOpen=!1,o.selectedTool=null;var e=document.getElementById("slide-edit-tool");angular.element(e).html(s("")(o))}},o.openTool=function(e){n.$emit("bodyService.toggleClass","is-locked"),o.editor.editorOpen=!0,e.id||(e.id="base-editor"),o.selectedTool=e;var t=document.getElementById("slide-edit-tool"),i="<div><"+e.id+' slide="slide" close="editor.hideEditors()" '+(e.template?'template="'+e.template+'"':"")+' tool="selectedTool"></'+e.id+"></div>";angular.element(t).html(s(i)(o))}}]),function(){"use strict";angular.module("itkDateComponent",[]).directive("dateComponent",["$interval",function(i){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikApp/shared/components/date/date.html?"+window.config.version,scope:{theme:"@"},link:function(e){e.thisDate=new Date;var t=i(function(){e.thisDate=new Date},6e4);e.$on("$destroy",function(){angular.isDefined(t)&&(i.cancel(t),t=void 0)})}}}])}.call(this),function(){"use strict";angular.module("itkDigitalClockComponent",[]).directive("digitalClockComponent",["$interval",function(i){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikApp/shared/components/digital-clock/digital-clock.html?"+window.config.version,scope:{},link:function(e){e.thisDate=new Date;var t=i(function(){e.thisDate=Date.now()},1e3);e.$on("$destroy",function(){angular.isDefined(t)&&(i.cancel(t),t=void 0)})}}}])}.call(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vis=t():e.vis=t()}(this,function(){return n={},i.m=o=[function(e,t,i){var o=i(1);o.extend(t,i(7)),o.extend(t,i(24)),o.extend(t,i(60))},function(e,h,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=t(2),i=t(6);h.isNumber=function(e){return e instanceof Number||"number"==typeof e},h.recursiveDOMDelete=function(e){if(e)for(;!0===e.hasChildNodes();)h.recursiveDOMDelete(e.firstChild),e.removeChild(e.firstChild)},h.giveRange=function(e,t,i,o){if(t==e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)},h.isString=function(e){return e instanceof String||"string"==typeof e},h.isDate=function(e){if(e instanceof Date)return!0;if(h.isString(e)){if(s.exec(e))return!0;if(!isNaN(Date.parse(e)))return!0}return!1},h.randomUUID=function(){return i.v4()},h.assignAllKeys=function(e,t){for(var i in e)e.hasOwnProperty(i)&&"object"!==n(e[i])&&(e[i]=t)},h.fillIfDefined=function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];for(var o in e)void 0!==t[o]&&("object"!==n(t[o])?void 0!==t[o]&&null!==t[o]||void 0===e[o]||!0!==i?e[o]=t[o]:delete e[o]:"object"===n(e[o])&&h.fillIfDefined(e[o],t[o],i))},h.protoExtend=function(e,t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)e[n]=o[n]}return e},h.extend=function(e,t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e},h.selectiveExtend=function(e,t,i){if(!Array.isArray(e))throw new Error("Array with property names expected as first argument");for(var o=2;o<arguments.length;o++)for(var n=arguments[o],s=0;s<e.length;s++){var r=e[s];n.hasOwnProperty(r)&&(t[r]=n[r])}return t},h.selectiveDeepExtend=function(e,t,i){var o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n=2;n<arguments.length;n++)for(var s=arguments[n],r=0;r<e.length;r++){var a=e[r];if(s.hasOwnProperty(a))if(i[a]&&i[a].constructor===Object)void 0===t[a]&&(t[a]={}),t[a].constructor===Object?h.deepExtend(t[a],i[a],!1,o):null===i[a]&&void 0!==t[a]&&!0===o?delete t[a]:t[a]=i[a];else{if(Array.isArray(i[a]))throw new TypeError("Arrays are not supported by deepExtend");null===i[a]&&void 0!==t[a]&&!0===o?delete t[a]:t[a]=i[a]}}return t},h.selectiveNotDeepExtend=function(e,t,i){var o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n in i)if(i.hasOwnProperty(n)&&-1==e.indexOf(n))if(i[n]&&i[n].constructor===Object)void 0===t[n]&&(t[n]={}),t[n].constructor===Object?h.deepExtend(t[n],i[n]):null===i[n]&&void 0!==t[n]&&!0===o?delete t[n]:t[n]=i[n];else if(Array.isArray(i[n])){t[n]=[];for(var s=0;s<i[n].length;s++)t[n].push(i[n][s])}else null===i[n]&&void 0!==t[n]&&!0===o?delete t[n]:t[n]=i[n];return t},h.deepExtend=function(e,t,i,o){for(var n in t)if(t.hasOwnProperty(n)||!0===i)if(t[n]&&t[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n].constructor===Object?h.deepExtend(e[n],t[n],i):null===t[n]&&void 0!==e[n]&&!0===o?delete e[n]:e[n]=t[n];else if(Array.isArray(t[n])){e[n]=[];for(var s=0;s<t[n].length;s++)e[n].push(t[n][s])}else null===t[n]&&void 0!==e[n]&&!0===o?delete e[n]:e[n]=t[n];return e},h.equalArray=function(e,t){if(e.length!=t.length)return!1;for(var i=0,o=e.length;i<o;i++)if(e[i]!=t[i])return!1;return!0},h.convert=function(e,t){var i;if(void 0!==e){if(null===e)return null;if(!t)return e;if("string"!=typeof t&&!(t instanceof String))throw new Error("Type must be a string");switch(t){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return Number(e.valueOf());case"string":case"String":return String(e);case"Date":if(h.isNumber(e))return new Date(e);if(e instanceof Date)return new Date(e.valueOf());if(o.isMoment(e))return new Date(e.valueOf());if(h.isString(e))return(i=s.exec(e))?new Date(Number(i[1])):o(e).toDate();throw new Error("Cannot convert object of type "+h.getType(e)+" to type Date");case"Moment":if(h.isNumber(e))return o(e);if(e instanceof Date)return o(e.valueOf());if(o.isMoment(e))return o(e);if(h.isString(e))return i=s.exec(e),o(i?Number(i[1]):e);throw new Error("Cannot convert object of type "+h.getType(e)+" to type Date");case"ISODate":if(h.isNumber(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(o.isMoment(e))return e.toDate().toISOString();if(h.isString(e))return(i=s.exec(e))?new Date(Number(i[1])).toISOString():new Date(e).toISOString();throw new Error("Cannot convert object of type "+h.getType(e)+" to type ISODate");case"ASPDate":if(h.isNumber(e))return"/Date("+e+")/";if(e instanceof Date)return"/Date("+e.valueOf()+")/";if(h.isString(e))return"/Date("+((i=s.exec(e))?new Date(Number(i[1])).valueOf():new Date(e).valueOf())+")/";throw new Error("Cannot convert object of type "+h.getType(e)+" to type ASPDate");default:throw new Error('Unknown type "'+t+'"')}}};var s=/^\/?Date\((\-?\d+)/i;h.getType=function(e){var t=void 0===e?"undefined":n(e);return"object"==t?null===e?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Array.isArray(e)?"Array":e instanceof Date?"Date":"Object":"number"==t?"Number":"boolean"==t?"Boolean":"string"==t?"String":void 0===t?"undefined":t},h.copyAndExtendArray=function(e,t){for(var i=[],o=0;o<e.length;o++)i.push(e[o]);return i.push(t),i},h.copyArray=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},h.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left},h.getAbsoluteRight=function(e){return e.getBoundingClientRect().right},h.getAbsoluteTop=function(e){return e.getBoundingClientRect().top},h.addClassName=function(e,t){var i=e.className.split(" ");-1==i.indexOf(t)&&(i.push(t),e.className=i.join(" "))},h.removeClassName=function(e,t){var i=e.className.split(" "),o=i.indexOf(t);-1!=o&&(i.splice(o,1),e.className=i.join(" "))},h.forEach=function(e,t){var i,o;if(Array.isArray(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else for(i in e)e.hasOwnProperty(i)&&t(e[i],i,e)},h.toArray=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},h.updateProperty=function(e,t,i){return e[t]!==i&&(e[t]=i,!0)},h.throttle=function(t,i){var o=null,n=!1;return function e(){o?n=!0:(n=!1,t(),o=setTimeout(function(){o=null,n&&e()},i))}},h.addEventListener=function(e,t,i,o){e.addEventListener?(void 0===o&&(o=!1),"mousewheel"===t&&0<=navigator.userAgent.indexOf("Firefox")&&(t="DOMMouseScroll"),e.addEventListener(t,i,o)):e.attachEvent("on"+t,i)},h.removeEventListener=function(e,t,i,o){e.removeEventListener?(void 0===o&&(o=!1),"mousewheel"===t&&0<=navigator.userAgent.indexOf("Firefox")&&(t="DOMMouseScroll"),e.removeEventListener(t,i,o)):e.detachEvent("on"+t,i)},h.preventDefault=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1},h.getTarget=function(e){var t;return(e=e||window.event).target?t=e.target:e.srcElement&&(t=e.srcElement),null!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},h.hasParent=function(e,t){for(var i=e;i;){if(i===t)return!0;i=i.parentNode}return!1},h.option={},h.option.asBoolean=function(e,t){return"function"==typeof e&&(e=e()),null!=e?0!=e:t||null},h.option.asNumber=function(e,t){return"function"==typeof e&&(e=e()),null!=e?Number(e)||t||null:t||null},h.option.asString=function(e,t){return"function"==typeof e&&(e=e()),null!=e?String(e):t||null},h.option.asSize=function(e,t){return"function"==typeof e&&(e=e()),h.isString(e)?e:h.isNumber(e)?e+"px":t||null},h.option.asElement=function(e,t){return"function"==typeof e&&(e=e()),e||t||null},h.hexToRGB=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,o){return t+t+i+i+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},h.overrideOpacity=function(e,t){return-1!=e.indexOf("rgba")?e:-1!=e.indexOf("rgb")?"rgba("+(i=e.substr(e.indexOf("(")+1).replace(")","").split(","))[0]+","+i[1]+","+i[2]+","+t+")":null==(i=h.hexToRGB(e))?e:"rgba("+i.r+","+i.g+","+i.b+","+t+")";var i},h.RGBToHex=function(e,t,i){return"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},h.parseColor=function(e){var t;if(!0===h.isString(e)){if(!0===h.isValidRGB(e)){var i=e.substr(4).substr(0,e.length-5).split(",").map(function(e){return parseInt(e)});e=h.RGBToHex(i[0],i[1],i[2])}if(!0===h.isValidHex(e)){var o=h.hexToHSV(e),n={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},r=h.HSVToHex(s.h,s.s,s.v),a=h.HSVToHex(n.h,n.s,n.v);t={background:e,border:r,highlight:{background:a,border:r},hover:{background:a,border:r}}}else t={background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else(t={}).background=e.background||void 0,t.border=e.border||void 0,h.isString(e.highlight)?t.highlight={border:e.highlight,background:e.highlight}:(t.highlight={},t.highlight.background=e.highlight&&e.highlight.background||void 0,t.highlight.border=e.highlight&&e.highlight.border||void 0),h.isString(e.hover)?t.hover={border:e.hover,background:e.hover}:(t.hover={},t.hover.background=e.hover&&e.hover.background||void 0,t.hover.border=e.hover&&e.hover.border||void 0);return t},h.RGBToHSV=function(e,t,i){e/=255,t/=255,i/=255;var o=Math.min(e,Math.min(t,i)),n=Math.max(e,Math.max(t,i));return o==n?{h:0,s:0,v:o}:{h:60*((e==o?3:i==o?1:5)-(e==o?t-i:i==o?e-t:i-e)/(n-o))/360,s:(n-o)/n,v:n}};var r=function(e){var n={};return e.split(";").forEach(function(e){if(""!=e.trim()){var t=e.split(":"),i=t[0].trim(),o=t[1].trim();n[i]=o}}),n},a=function(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")};h.addCssText=function(e,t){var i=r(e.style.cssText),o=r(t),n=h.extend(i,o);e.style.cssText=a(n)},h.removeCssText=function(e,t){var i=r(e.style.cssText),o=r(t);for(var n in o)o.hasOwnProperty(n)&&delete i[n];e.style.cssText=a(i)},h.HSVToRGB=function(e,t,i){var o,n,s,r=Math.floor(6*e),a=6*e-r,h=i*(1-t),l=i*(1-a*t),d=i*(1-(1-a)*t);switch(r%6){case 0:o=i,n=d,s=h;break;case 1:o=l,n=i,s=h;break;case 2:o=h,n=i,s=d;break;case 3:o=h,n=l,s=i;break;case 4:o=d,n=h,s=i;break;case 5:o=i,n=h,s=l}return{r:Math.floor(255*o),g:Math.floor(255*n),b:Math.floor(255*s)}},h.HSVToHex=function(e,t,i){var o=h.HSVToRGB(e,t,i);return h.RGBToHex(o.r,o.g,o.b)},h.hexToHSV=function(e){var t=h.hexToRGB(e);return h.RGBToHSV(t.r,t.g,t.b)},h.isValidHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},h.isValidRGB=function(e){return e=e.replace(" ",""),/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(e)},h.isValidRGBA=function(e){return e=e.replace(" ",""),/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(e)},h.selectiveBridgeObject=function(e,t){if("object"!=(void 0===t?"undefined":n(t)))return null;for(var i=Object.create(t),o=0;o<e.length;o++)t.hasOwnProperty(e[o])&&"object"==n(t[e[o]])&&(i[e[o]]=h.bridgeObject(t[e[o]]));return i},h.bridgeObject=function(e){if("object"!=(void 0===e?"undefined":n(e)))return null;var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&"object"==n(e[i])&&(t[i]=h.bridgeObject(e[i]));return t},h.insertSort=function(e,t){for(var i=0;i<e.length;i++){for(var o=e[i],n=i;0<n&&t(o,e[n-1])<0;n--)e[n]=e[n-1];e[n]=o}return e},h.mergeOptions=function(e,t,i){var o=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];if(null===t[i])e[i]=Object.create(o[i]);else if(void 0!==t[i])if("boolean"==typeof t[i])e[i].enabled=t[i];else for(var n in void 0===t[i].enabled&&(e[i].enabled=!0),t[i])t[i].hasOwnProperty(n)&&(e[i][n]=t[i][n])},h.binarySearchCustom=function(e,t,i,o){for(var n=0,s=0,r=e.length-1;s<=r&&n<1e4;){var a=Math.floor((s+r)/2),h=e[a],l=t(void 0===o?h[i]:h[i][o]);if(0==l)return a;-1==l?s=a+1:r=a-1,n++}return-1},h.binarySearchValue=function(e,t,i,o,n){var s,r,a,h,l=0,d=0,c=e.length-1;for(n=null!=n?n:function(e,t){return e==t?0:e<t?-1:1};d<=c&&l<1e4;){if(h=Math.floor(.5*(c+d)),s=e[Math.max(0,h-1)][i],r=e[h][i],a=e[Math.min(e.length-1,h+1)][i],0==n(r,t))return h;if(n(s,t)<0&&0<n(r,t))return"before"==o?Math.max(0,h-1):h;if(n(r,t)<0&&0<n(a,t))return"before"==o?h:Math.min(e.length-1,h+1);n(r,t)<0?d=h+1:c=h-1,l++}return-1},h.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},function(e,t,i){e.exports="undefined"!=typeof window&&window.moment||i(3)},function(e,t,i){(function(rs){rs.exports=function(){function l(){return so.apply(null,arguments)}function e(e){so=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){var i,o=[];for(i=0;i<e.length;++i)o.push(t(e[i],i));return o}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var i in t)a(t,i)&&(e[i]=t[i]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,i,o){return Le(e,t,i,o,!0).utc()}function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(e){return null==e._pf&&(e._pf=t()),e._pf}function h(e){if(null==e._isValid){var t=c(e),i=ro.call(t.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function o(e){var t=d(NaN);return null!=e?r(c(t),e):c(t).userInvalidated=!0,t}function u(e){return void 0===e}function p(e,t){var i,o,n;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=c(t)),u(t._locale)||(e._locale=t._locale),ao.length>0)for(i in ao)o=ao[i],n=t[o],u(n)||(e[o]=n);return e}function f(e){p(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),ho===!1&&(ho=!0,l.updateOffset(this),ho=!1)}function m(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=g(t)),i}function y(e,t,i){var o,n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(o=0;n>o;o++)(i&&e[o]!==t[o]||!i&&v(e[o])!==v(t[o]))&&r++;return r+s}function b(e){l.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(e,t){var i=!0;return r(function(){return null!=l.deprecationHandler&&l.deprecationHandler(null,e),i&&(b(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function _(e,t){null!=l.deprecationHandler&&l.deprecationHandler(e,t),lo[e]||(b(t),lo[e]=!0)}function x(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e){return"[object Object]"===Object.prototype.toString.call(e)}function S(e){var t,i;for(i in e)t=e[i],x(t)?this[i]=t:this["_"+i]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function O(e,t){var i,o=r({},e);for(i in t)a(t,i)&&(k(e[i])&&k(t[i])?(o[i]={},r(o[i],e[i]),r(o[i],t[i])):null!=t[i]?o[i]=t[i]:delete o[i]);return o}function C(e){null!=e&&this.set(e)}function M(e){return e?e.toLowerCase().replace("_","-"):e}function D(e){for(var t,i,o,n,s=0;s<e.length;){for(n=M(e[s]).split("-"),t=n.length,i=M(e[s+1]),i=i?i.split("-"):null;t>0;){if(o=E(n.slice(0,t).join("-")))return o;if(i&&i.length>=t&&y(n,i,!0)>=t-1)break;t--}s++}return null}function E(e){var t=null;if(!fo[e]&&"undefined"!=typeof rs&&rs&&rs.exports)try{t=uo._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),T(t)}catch(e){}return fo[e]}function T(e,t){var i;return e&&(i=u(t)?A(e):P(e,t),i&&(uo=i)),uo._abbr}function P(e,t){return null!==t?(t.abbr=e,null!=fo[e]?(_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=O(fo[e]._config,t)):null!=t.parentLocale&&(null!=fo[t.parentLocale]?t=O(fo[t.parentLocale]._config,t):_("parentLocaleUndefined","specified parentLocale is not defined yet")),fo[e]=new C(t),T(e),fo[e]):(delete fo[e],null)}function I(e,t){var i;if(null!=t)null!=fo[e]&&(t=O(fo[e]._config,t)),(i=new C(t)).parentLocale=fo[e],fo[e]=i,T(e);else null!=fo[e]&&(null!=fo[e].parentLocale?fo[e]=fo[e].parentLocale:null!=fo[e]&&delete fo[e]);return fo[e]}function A(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return uo;if(!n(e)){if(t=E(e))return t;e=[e]}return D(e)}function R(){return co(fo)}function L(e,t){var i=e.toLowerCase();mo[i]=mo[i+"s"]=mo[t]=e}function N(e){return"string"==typeof e?mo[e]||mo[e.toLowerCase()]:void 0}function z(e){var t,i,o={};for(i in e)a(e,i)&&(t=N(i),t&&(o[t]=e[i]));return o}function F(t,i){return function(e){return null!=e?(j(this,t,e),l.updateOffset(this,i),this):B(this,t)}}function B(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function j(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function H(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=N(e),x(this[e]))return this[e](t);return this}function W(e,t,i){var o=""+Math.abs(e),n=t-o.length,s=e>=0;return(s?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+o}function $(e,t,i,o){var n=o;"string"==typeof o&&(n=function(){return this[o]()}),e&&(bo[e]=n),t&&(bo[t[0]]=function(){return W(n.apply(this,arguments),t[1],t[2])}),i&&(bo[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(o){var e,n,s=o.match(go);for(e=0,n=s.length;n>e;e++)bo[s[e]]?s[e]=bo[s[e]]:s[e]=U(s[e]);return function(e){var t,i="";for(t=0;n>t;t++)i+=s[t]instanceof Function?s[t].call(e,o):s[t];return i}}function G(e,t){return e.isValid()?(t=V(t,e.localeData()),yo[t]=yo[t]||Y(t),yo[t](e)):e.localeData().invalidDate()}function V(e,t){function i(e){return t.longDateFormat(e)||e}var o=5;for(vo.lastIndex=0;o>=0&&vo.test(e);)e=e.replace(vo,i),vo.lastIndex=0,o-=1;return e}function q(e,i,o){zo[e]=x(i)?i:function(e,t){return e&&o?o:i}}function X(e,t){return a(zo,e)?zo[e](t._strict,t._locale):new RegExp(K(e))}function K(e){return Z(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,o,n){return t||i||o||n}))}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e,i){var t,o=i;for("string"==typeof e&&(e=[e]),"number"==typeof i&&(o=function(e,t){t[i]=v(e)}),t=0;t<e.length;t++)Fo[e[t]]=o}function Q(e,n){J(e,function(e,t,i,o){i._w=i._w||{},n(e,i._w,i,o)})}function ee(e,t,i){null!=t&&a(Fo,e)&&Fo[e](t,i._a,i,e)}function te(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ie(e,t){return n(this._months)?this._months[e.month()]:this._months[qo.test(t)?"format":"standalone"][e.month()]}function oe(e,t){return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[qo.test(t)?"format":"standalone"][e.month()]}function ne(e,t,i){var o,n,s,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;12>o;++o)s=d([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===t?(n=po.call(this._shortMonthsParse,r),-1!==n?n:null):(n=po.call(this._longMonthsParse,r),-1!==n?n:null):"MMM"===t?(n=po.call(this._shortMonthsParse,r),-1!==n?n:(n=po.call(this._longMonthsParse,r),-1!==n?n:null)):(n=po.call(this._longMonthsParse,r),-1!==n?n:(n=po.call(this._shortMonthsParse,r),-1!==n?n:null))}function se(e,t,i){var o,n,s;if(this._monthsParseExact)return ne.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;12>o;o++){if(n=d([2e3,o]),i&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[o]||(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[o]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[o].test(e))return o;if(i&&"MMM"===t&&this._shortMonthsParse[o].test(e))return o;if(!i&&this._monthsParse[o].test(e))return o}}function re(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=v(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),te(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function ae(e){return null!=e?(re(this,e),l.updateOffset(this,!0),this):B(this,"Month")}function he(){return te(this.year(),this.month())}function le(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ce.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function de(e){return this._monthsParseExact?(a(this,"_monthsRegex")||ce.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function ce(){function e(e,t){return t.length-e.length}var t,i,o=[],n=[],s=[];for(t=0;12>t;t++)i=d([2e3,t]),o.push(this.monthsShort(i,"")),n.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(o.sort(e),n.sort(e),s.sort(e),t=0;12>t;t++)o[t]=Z(o[t]),n[t]=Z(n[t]),s[t]=Z(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ue(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[jo]<0||i[jo]>11?jo:i[Ho]<1||i[Ho]>te(i[Bo],i[jo])?Ho:i[Wo]<0||i[Wo]>24||24===i[Wo]&&(0!==i[$o]||0!==i[Uo]||0!==i[Yo])?Wo:i[$o]<0||i[$o]>59?$o:i[Uo]<0||i[Uo]>59?Uo:i[Yo]<0||i[Yo]>999?Yo:-1,c(e)._overflowDayOfYear&&(Bo>t||t>Ho)&&(t=Ho),c(e)._overflowWeeks&&-1===t&&(t=Go),c(e)._overflowWeekday&&-1===t&&(t=Vo),c(e).overflow=t),e}function pe(e){var t,i,o,n,s,r,a=e._i,h=Qo.exec(a)||en.exec(a);if(h){for(c(e).iso=!0,t=0,i=on.length;i>t;t++)if(on[t][1].exec(h[1])){n=on[t][0],o=on[t][2]!==!1;break}if(null==n)return void(e._isValid=!1);if(h[3]){for(t=0,i=nn.length;i>t;t++)if(nn[t][1].exec(h[3])){s=(h[2]||" ")+nn[t][0];break}if(null==s)return void(e._isValid=!1)}if(!o&&null!=s)return void(e._isValid=!1);if(h[4]){if(!tn.exec(h[4]))return void(e._isValid=!1);r="Z"}e._f=n+(s||"")+(r||""),De(e)}else e._isValid=!1}function fe(e){var t=sn.exec(e._i);return null!==t?void(e._d=new Date(+t[1])):(pe(e),void(e._isValid===!1&&(delete e._isValid,l.createFromInputFallback(e))))}function me(e,t,i,o,n,s,r){var a=new Date(e,t,i,o,n,s,r);return 100>e&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function ge(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ve(e){return ye(e)?366:365}function ye(e){return e%4===0&&e%100!==0||e%400===0}function be(){return ye(this.year())}function we(e,t,i){var o=7+t-i,n=(7+ge(e,0,o).getUTCDay()-t)%7;return-n+o-1}function _e(e,t,i,o,n){var s,r,a=(7+i-o)%7,h=we(e,o,n),l=1+7*(t-1)+a+h;return 0>=l?(s=e-1,r=ve(s)+l):l>ve(e)?(s=e+1,r=l-ve(e)):(s=e,r=l),{year:s,dayOfYear:r}}function xe(e,t,i){var o,n,s=we(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1;return 1>r?(n=e.year()-1,o=r+ke(n,t,i)):r>ke(e.year(),t,i)?(o=r-ke(e.year(),t,i),n=e.year()+1):(n=e.year(),o=r),{week:o,year:n}}function ke(e,t,i){var o=we(e,t,i),n=we(e+1,t,i);return(ve(e)-o+n)/7}function Se(e,t,i){return null!=e?e:null!=t?t:i}function Oe(e){var t=new Date(l.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Ce(e){var t,i,o,n,s=[];if(!e._d){for(o=Oe(e),e._w&&null==e._a[Ho]&&null==e._a[jo]&&Me(e),e._dayOfYear&&(n=Se(e._a[Bo],o[Bo]),e._dayOfYear>ve(n)&&(c(e)._overflowDayOfYear=!0),i=ge(n,0,e._dayOfYear),e._a[jo]=i.getUTCMonth(),e._a[Ho]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=o[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Wo]&&0===e._a[$o]&&0===e._a[Uo]&&0===e._a[Yo]&&(e._nextDay=!0,e._a[Wo]=0),e._d=(e._useUTC?ge:me).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Wo]=24)}}function Me(e){var t,i,o,n,s,r,a,h;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,r=4,i=Se(t.GG,e._a[Bo],xe(Ne(),1,4).year),o=Se(t.W,1),n=Se(t.E,1),(1>n||n>7)&&(h=!0)):(s=e._locale._week.dow,r=e._locale._week.doy,i=Se(t.gg,e._a[Bo],xe(Ne(),s,r).year),o=Se(t.w,1),null!=t.d?(n=t.d,(0>n||n>6)&&(h=!0)):null!=t.e?(n=t.e+s,(t.e<0||t.e>6)&&(h=!0)):n=s),1>o||o>ke(i,s,r)?c(e)._overflowWeeks=!0:null!=h?c(e)._overflowWeekday=!0:(a=_e(i,o,n,s,r),e._a[Bo]=a.year,e._dayOfYear=a.dayOfYear)}function De(e){if(e._f===l.ISO_8601)return void pe(e);e._a=[],c(e).empty=!0;var t,i,o,n,s,r=""+e._i,a=r.length,h=0;for(o=V(e._f,e._locale).match(go)||[],t=0;t<o.length;t++)n=o[t],i=(r.match(X(n,e))||[])[0],i&&(s=r.substr(0,r.indexOf(i)),s.length>0&&c(e).unusedInput.push(s),r=r.slice(r.indexOf(i)+i.length),h+=i.length),bo[n]?(i?c(e).empty=!1:c(e).unusedTokens.push(n),ee(n,i,e)):e._strict&&!i&&c(e).unusedTokens.push(n);c(e).charsLeftOver=a-h,r.length>0&&c(e).unusedInput.push(r),c(e).bigHour===!0&&e._a[Wo]<=12&&e._a[Wo]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[Wo]=Ee(e._locale,e._a[Wo],e._meridiem),Ce(e),ue(e)}function Ee(e,t,i){var o;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(o=e.isPM(i),o&&12>t&&(t+=12),o||12!==t||(t=0),t):t}function Te(e){var t,i,o,n,s;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],De(t),h(t)&&(s+=c(t).charsLeftOver,s+=10*c(t).unusedTokens.length,c(t).score=s,(null==o||o>s)&&(o=s,i=t));r(e,i||t)}function Pe(e){if(!e._d){var t=z(e._i);e._a=i([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ce(e)}}function Ie(e){var t=new f(ue(Ae(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ae(e){var t=e._i,i=e._f;return e._locale=e._locale||A(e._l),null===t||void 0===i&&""===t?o({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new f(ue(t)):(n(i)?Te(e):i?De(e):s(t)?e._d=t:Re(e),h(e)||(e._d=null),e))}function Re(e){var t=e._i;void 0===t?e._d=new Date(l.now()):s(t)?e._d=new Date(t.valueOf()):"string"==typeof t?fe(e):n(t)?(e._a=i(t.slice(0),function(e){return parseInt(e,10)}),Ce(e)):"object"==typeof t?Pe(e):"number"==typeof t?e._d=new Date(t):l.createFromInputFallback(e)}function Le(e,t,i,o,n){var s={};return"boolean"==typeof i&&(o=i,i=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=n,s._l=i,s._i=e,s._f=t,s._strict=o,Ie(s)}function Ne(e,t,i,o){return Le(e,t,i,o,!1)}function ze(e,t){var i,o;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ne();for(i=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](i)||(i=t[o]);return i}function Fe(){var e;return ze("isBefore",[].slice.call(arguments,0))}function Be(){var e;return ze("isAfter",[].slice.call(arguments,0))}function je(e){var t=z(e),i=t.year||0,o=t.quarter||0,n=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,h=t.minute||0,l=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*l+6e4*h+1e3*a*60*60,this._days=+r+7*s,this._months=+n+3*o+12*i,this._data={},this._locale=A(),this._bubble()}function He(e){return e instanceof je}function We(e,i){$(e,0,0,function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+W(~~(e/60),2)+i+W(~~e%60,2)})}function $e(e,t){var i=(t||"").match(e)||[],o=i[i.length-1]||[],n=(o+"").match(dn)||["-",0,0],s=+(60*n[1])+v(n[2]);return"+"===n[0]?s:-s}function Ue(e,t){var i,o;return t._isUTC?(i=t.clone(),o=(m(e)||s(e)?e.valueOf():Ne(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),l.updateOffset(i,!1),i):Ne(e).local()}function Ye(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ge(e,t){var i,o=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=$e(Ro,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=Ye(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?lt(this,ot(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,l.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Ye(this):null!=e?this:NaN}function Ve(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function qe(e){return this.utcOffset(0,e)}function Xe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ye(this),"m")),this}function Ke(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($e(Ao,this._i)),this}function Ze(e){return this.isValid()?(e=e?Ne(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Je(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Qe(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=Ae(e),e._a){var t=e._isUTC?d(e._a):Ne(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function et(){return this.isValid()?!this._isUTC:!1}function tt(){return this.isValid()?this._isUTC:!1}function it(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ot(e,t){var i,o,n,s=e,r=null;return He(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(r=cn.exec(e))?(i="-"===r[1]?-1:1,s={y:0,d:v(r[Ho])*i,h:v(r[Wo])*i,m:v(r[$o])*i,s:v(r[Uo])*i,ms:v(r[Yo])*i}):(r=un.exec(e))?(i="-"===r[1]?-1:1,s={y:nt(r[2],i),M:nt(r[3],i),w:nt(r[4],i),d:nt(r[5],i),h:nt(r[6],i),m:nt(r[7],i),s:nt(r[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(n=rt(Ne(s.from),Ne(s.to)),s={},s.ms=n.milliseconds,s.M=n.months),o=new je(s),He(e)&&a(e,"_locale")&&(o._locale=e._locale),o}function nt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function st(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function rt(e,t){var i;return e.isValid()&&t.isValid()?(t=Ue(t,e),e.isBefore(t)?i=st(e,t):(i=st(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function at(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function ht(n,s){return function(e,t){var i,o;return null===t||isNaN(+t)||(_(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period)."),o=e,e=t,t=o),e="string"==typeof e?+e:e,i=ot(e,t),lt(this,i,n),this}}function lt(e,t,i,o){var n=t._milliseconds,s=at(t._days),r=at(t._months);e.isValid()&&(o=null==o?!0:o,n&&e._d.setTime(e._d.valueOf()+n*i),s&&j(e,"Date",B(e,"Date")+s*i),r&&re(e,B(e,"Month")+r*i),o&&l.updateOffset(e,s||r))}function dt(e,t){var i=e||Ne(),o=Ue(i,this).startOf("day"),n=this.diff(o,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse",r=t&&(x(t[s])?t[s]():t[s]);return this.format(r||this.localeData().calendar(s,this,Ne(i)))}function ct(){return new f(this)}function ut(e,t){var i=m(e)?e:Ne(e);return this.isValid()&&i.isValid()?(t=N(u(t)?"millisecond":t),"millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function pt(e,t){var i=m(e)?e:Ne(e);return this.isValid()&&i.isValid()?(t=N(u(t)?"millisecond":t),"millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function ft(e,t,i,o){return o=o||"()",("("===o[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===o[1]?this.isBefore(t,i):!this.isAfter(t,i))}function mt(e,t){var i,o=m(e)?e:Ne(e);return this.isValid()&&o.isValid()?(t=N(t||"millisecond"),"millisecond"===t?this.valueOf()===o.valueOf():(i=o.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function gt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function vt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function yt(e,t,i){var o,n,s,r;return this.isValid()?(o=Ue(e,this),o.isValid()?(n=6e4*(o.utcOffset()-this.utcOffset()),t=N(t),"year"===t||"month"===t||"quarter"===t?(r=bt(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(s=this-o,r="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-n)/864e5:"week"===t?(s-n)/6048e5:s),i?r:g(r)):NaN):NaN}function bt(e,t){var i,o,n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return 0>t-s?(i=e.clone().add(n-1,"months"),o=(t-s)/(s-i)):(i=e.clone().add(n+1,"months"),o=(t-s)/(i-s)),-(n+o)||0}function wt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function _t(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?x(Date.prototype.toISOString)?this.toDate().toISOString():G(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function xt(e){e||(e=this.isUtc()?l.defaultFormatUtc:l.defaultFormat);var t=G(this,e);return this.localeData().postformat(t)}function kt(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ne(e).isValid())?ot({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function St(e){return this.from(Ne(),e)}function Ot(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ne(e).isValid())?ot({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ct(e){return this.to(Ne(),e)}function Mt(e){var t;return void 0===e?this._locale._abbr:(t=A(e),null!=t&&(this._locale=t),this)}function Dt(){return this._locale}function Et(e){switch(e=N(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Tt(e){return e=N(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Pt(){return this._d.valueOf()-6e4*(this._offset||0)}function It(){return Math.floor(this.valueOf()/1e3)}function At(){return this._offset?new Date(this.valueOf()):this._d}function Rt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Lt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Nt(){return this.isValid()?this.toISOString():null}function zt(){return h(this)}function Ft(){return r({},c(this))}function Bt(){return c(this).overflow}function jt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ht(e,t){$(0,[e,e.length],0,t)}function Wt(e){return Gt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function $t(e){return Gt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ut(){return ke(this.year(),1,4)}function Yt(){var e=this.localeData()._week;return ke(this.year(),e.dow,e.doy)}function Gt(e,t,i,o,n){var s;return null==e?xe(this,o,n).year:(s=ke(e,o,n),t>s&&(t=s),Vt.call(this,e,t,i,o,n))}function Vt(e,t,i,o,n){var s=_e(e,t,i,o,n),r=ge(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function qt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Xt(e){return xe(e,this._week.dow,this._week.doy).week}function Kt(){return this._week.dow}function Zt(){return this._week.doy}function Jt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Qt(e){var t=xe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ei(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function ti(e,t){return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function ii(e){return this._weekdaysShort[e.day()]}function oi(e){return this._weekdaysMin[e.day()]}function ni(e,t,i){var o,n,s,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;7>o;++o)s=d([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===t?(n=po.call(this._weekdaysParse,r),-1!==n?n:null):"ddd"===t?(n=po.call(this._shortWeekdaysParse,r),-1!==n?n:null):(n=po.call(this._minWeekdaysParse,r),-1!==n?n:null):"dddd"===t?(n=po.call(this._weekdaysParse,r),-1!==n?n:(n=po.call(this._shortWeekdaysParse,r),-1!==n?n:(n=po.call(this._minWeekdaysParse,r),-1!==n?n:null))):"ddd"===t?(n=po.call(this._shortWeekdaysParse,r),-1!==n?n:(n=po.call(this._weekdaysParse,r),-1!==n?n:(n=po.call(this._minWeekdaysParse,r),-1!==n?n:null))):(n=po.call(this._minWeekdaysParse,r),-1!==n?n:(n=po.call(this._weekdaysParse,r),-1!==n?n:(n=po.call(this._shortWeekdaysParse,r),-1!==n?n:null)))}function si(e,t,i){var o,n,s;if(this._weekdaysParseExact)return ni.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;7>o;o++){if(n=d([2e3,1]).day(o),i&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[o]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[o]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[o].test(e))return o;if(i&&"ddd"===t&&this._shortWeekdaysParse[o].test(e))return o;if(i&&"dd"===t&&this._minWeekdaysParse[o].test(e))return o;if(!i&&this._weekdaysParse[o].test(e))return o}}function ri(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ei(e,this.localeData()),this.add(e-t,"d")):t}function ai(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function hi(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function li(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||ui.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}function di(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||ui.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function ci(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||ui.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function ui(){function e(e,t){return t.length-e.length}var t,i,o,n,s,r=[],a=[],h=[],l=[];for(t=0;7>t;t++)i=d([2e3,1]).day(t),o=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),s=this.weekdays(i,""),r.push(o),a.push(n),h.push(s),l.push(o),l.push(n),l.push(s);for(r.sort(e),a.sort(e),h.sort(e),l.sort(e),t=0;7>t;t++)a[t]=Z(a[t]),h[t]=Z(h[t]),l[t]=Z(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function pi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function fi(){return this.hours()%12||12}function mi(){return this.hours()||24}function gi(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function vi(e,t){return t._meridiemParse}function yi(e){return"p"===(e+"").toLowerCase().charAt(0)}function bi(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function wi(e,t){t[Yo]=v(1e3*("0."+e))}function _i(){return this._isUTC?"UTC":""}function xi(){return this._isUTC?"Coordinated Universal Time":""}function ki(e){return Ne(1e3*e)}function Si(){return Ne.apply(null,arguments).parseZone()}function Oi(e,t,i){var o=this._calendar[e];return x(o)?o.call(t,i):o}function Ci(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function Mi(){return this._invalidDate}function Di(e){return this._ordinal.replace("%d",e)}function Ei(e){return e}function Ti(e,t,i,o){var n=this._relativeTime[i];return x(n)?n(e,t,i,o):n.replace(/%d/i,e)}function Pi(e,t){var i=this._relativeTime[e>0?"future":"past"];return x(i)?i(t):i.replace(/%s/i,t)}function Ii(e,t,i,o){var n=A(),s=d().set(o,t);return n[i](s,e)}function Ai(e,t,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Ii(e,t,i,"month");var o,n=[];for(o=0;12>o;o++)n[o]=Ii(e,o,i,"month");return n}function Ri(e,t,i,o){"boolean"==typeof e?("number"==typeof t&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,"number"==typeof t&&(i=t,t=void 0),t=t||"");var n=A(),s=e?n._week.dow:0;if(null!=i)return Ii(t,(i+s)%7,o,"day");var r,a=[];for(r=0;7>r;r++)a[r]=Ii(t,(r+s)%7,o,"day");return a}function Li(e,t){return Ai(e,t,"months")}function Ni(e,t){return Ai(e,t,"monthsShort")}function zi(e,t,i){return Ri(e,t,i,"weekdays")}function Fi(e,t,i){return Ri(e,t,i,"weekdaysShort")}function Bi(e,t,i){return Ri(e,t,i,"weekdaysMin")}function ji(){var e=this._data;return this._milliseconds=Bn(this._milliseconds),this._days=Bn(this._days),this._months=Bn(this._months),e.milliseconds=Bn(e.milliseconds),e.seconds=Bn(e.seconds),e.minutes=Bn(e.minutes),e.hours=Bn(e.hours),e.months=Bn(e.months),e.years=Bn(e.years),this}function Hi(e,t,i,o){var n=ot(t,i);return e._milliseconds+=o*n._milliseconds,e._days+=o*n._days,e._months+=o*n._months,e._bubble()}function Wi(e,t){return Hi(this,e,t,1)}function $i(e,t){return Hi(this,e,t,-1)}function Ui(e){return 0>e?Math.floor(e):Math.ceil(e)}function Yi(){var e,t,i,o,n,s=this._milliseconds,r=this._days,a=this._months,h=this._data;return 0<=s&&0<=r&&0<=a||s<=0&&r<=0&&a<=0||(s+=864e5*Ui(Vi(a)+r),a=r=0),h.milliseconds=s%1e3,e=g(s/1e3),h.seconds=e%60,t=g(e/60),h.minutes=t%60,i=g(t/60),h.hours=i%24,r+=g(i/24),n=g(Gi(r)),a+=n,r-=Ui(Vi(n)),o=g(a/12),a%=12,h.days=r,h.months=a,h.years=o,this}function Gi(e){return 4800*e/146097}function Vi(e){return 146097*e/4800}function qi(e){var t,i,o=this._milliseconds;if("month"===(e=N(e))||"year"===e)return t=this._days+o/864e5,i=this._months+Gi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Vi(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return 24*t+o/36e5;case"minute":return 1440*t+o/6e4;case"second":return 86400*t+o/1e3;case"millisecond":return Math.floor(864e5*t)+o;default:throw new Error("Unknown unit "+e)}}function Xi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Ki(e){return function(){return this.as(e)}}function Zi(e){return this[(e=N(e))+"s"]()}function Ji(e){return function(){return this._data[e]}}function Qi(){return g(this.days()/7)}function eo(e,t,i,o,n){return n.relativeTime(t||1,!!i,e,o)}function to(e,t,i){var o=ot(e).abs(),n=ts(o.as("s")),s=ts(o.as("m")),r=ts(o.as("h")),a=ts(o.as("d")),h=ts(o.as("M")),l=ts(o.as("y")),d=(n<is.s?["s",n]:s<=1&&["m"])||s<is.m&&["mm",s]||r<=1&&["h"]||r<is.h&&["hh",r]||a<=1&&["d"]||a<is.d&&["dd",a]||h<=1&&["M"]||h<is.M&&["MM",h]||l<=1&&["y"]||["yy",l];return d[2]=t,d[3]=0<+e,d[4]=i,function(e,t,i,o,n){return n.relativeTime(t||1,!!i,e,o)}.apply(null,d)}function io(e,t){return void 0!==is[e]&&(void 0===t?is[e]:(is[e]=t,!0))}function oo(e){var t=this.localeData(),i=function(e,t,i){var o=ot(e).abs(),n=ts(o.as("s")),s=ts(o.as("m")),r=ts(o.as("h")),a=ts(o.as("d")),h=ts(o.as("M")),l=ts(o.as("y")),d=(n<is.s?["s",n]:s<=1&&["m"])||s<is.m&&["mm",s]||r<=1&&["h"]||r<is.h&&["hh",r]||a<=1&&["d"]||a<is.d&&["dd",a]||h<=1&&["M"]||h<is.M&&["MM",h]||l<=1&&["y"]||["yy",l];return d[2]=t,d[3]=0<+e,d[4]=i,function(e,t,i,o,n){return n.relativeTime(t||1,!!i,e,o)}.apply(null,d)}(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function no(){var e,t,i,o=os(this._milliseconds)/1e3,n=os(this._days),s=os(this._months);e=g(o/60),t=g(e/60),o%=60,e%=60,i=g(s/12),s%=12;var r=i,a=s,h=n,l=t,d=e,c=o,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(h?h+"D":"")+(l||d||c?"T":"")+(l?l+"H":"")+(d?d+"M":"")+(c?c+"S":""):"P0D"}var so,ro;ro=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,o=0;i>o;o++)if(o in t&&e.call(this,t[o],o,t))return!0;return!1};var ao=l.momentProperties=[],ho=!1,lo={},co;l.suppressDeprecationWarnings=!1,l.deprecationHandler=null,co=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)a(e,t)&&i.push(t);return i};var uo,po,fo={},mo={},go=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,vo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yo={},bo={},wo=/\d/,_o=/\d\d/,xo=/\d{3}/,ko=/\d{4}/,So=/[+-]?\d{6}/,Oo=/\d\d?/,Co=/\d\d\d\d?/,Mo=/\d\d\d\d\d\d?/,Do=/\d{1,3}/,Eo=/\d{1,4}/,To=/[+-]?\d{1,6}/,Po=/\d+/,Io=/[+-]?\d+/,Ao=/Z|[+-]\d\d:?\d\d/gi,Ro=/Z|[+-]\d\d(?::?\d\d)?/gi,Lo=/[+-]?\d+(\.\d{1,3})?/,No=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,zo={},Fo={},Bo=0,jo=1,Ho=2,Wo=3,$o=4,Uo=5,Yo=6,Go=7,Vo=8;po=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},$("M",["MM",2],"Mo",function(){return this.month()+1}),$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),$("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),q("M",Oo),q("MM",Oo,_o),q("MMM",function(e,t){return t.monthsShortRegex(e)}),q("MMMM",function(e,t){return t.monthsRegex(e)}),J(["M","MM"],function(e,t){t[jo]=v(e)-1}),J(["MMM","MMMM"],function(e,t,i,o){var n=i._locale.monthsParse(e,o,i._strict);null!=n?t[jo]=n:c(i).invalidMonth=e});var qo=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Xo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ko="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zo=No,Jo=No,Qo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,en=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,tn=/Z|[+-]\d\d(?::?\d\d)?/,on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],nn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],sn=/^\/?Date\((\-?\d+)/i;l.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),$("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),$(0,["YY",2],0,function(){return this.year()%100}),$(0,["YYYY",4],0,"year"),$(0,["YYYYY",5],0,"year"),$(0,["YYYYYY",6,!0],0,"year"),L("year","y"),q("Y",Io),q("YY",Oo,_o),q("YYYY",Eo,ko),q("YYYYY",To,So),q("YYYYYY",To,So),J(["YYYYY","YYYYYY"],Bo),J("YYYY",function(e,t){t[Bo]=2===e.length?l.parseTwoDigitYear(e):v(e)}),J("YY",function(e,t){t[Bo]=l.parseTwoDigitYear(e)}),J("Y",function(e,t){t[Bo]=parseInt(e,10)}),l.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var rn=F("FullYear",!0);l.ISO_8601=function(){};var an=w("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ne.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:o()}),hn=w("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ne.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:o()}),ln=function(){return Date.now?Date.now():+new Date};We("Z",":"),We("ZZ",""),q("Z",Ro),q("ZZ",Ro),J(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=$e(Ro,e)});var dn=/([\+\-]|\d\d)/gi;l.updateOffset=function(){};var cn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,un=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;ot.fn=je.prototype;var pn=ht(1,"add"),fn=ht(-1,"subtract");l.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",l.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var mn=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});$(0,["gg",2],0,function(){return this.weekYear()%100}),$(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ht("gggg","weekYear"),Ht("ggggg","weekYear"),Ht("GGGG","isoWeekYear"),Ht("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),q("G",Io),q("g",Io),q("GG",Oo,_o),q("gg",Oo,_o),q("GGGG",Eo,ko),q("gggg",Eo,ko),q("GGGGG",To,So),q("ggggg",To,So),Q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,o){t[o.substr(0,2)]=v(e)}),Q(["gg","GG"],function(e,t,i,o){t[o]=l.parseTwoDigitYear(e)}),$("Q",0,"Qo","quarter"),L("quarter","Q"),q("Q",wo),J("Q",function(e,t){t[jo]=3*(v(e)-1)}),$("w",["ww",2],"wo","week"),$("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),q("w",Oo),q("ww",Oo,_o),q("W",Oo),q("WW",Oo,_o),Q(["w","ww","W","WW"],function(e,t,i,o){t[o.substr(0,1)]=v(e)});var gn={dow:0,doy:6};$("D",["DD",2],"Do","date"),L("date","D"),q("D",Oo),q("DD",Oo,_o),q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),J(["D","DD"],Ho),J("Do",function(e,t){t[Ho]=v(e.match(Oo)[0],10)});var vn=F("Date",!0);$("d",0,"do","day"),$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),$("e",0,0,"weekday"),$("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),q("d",Oo),q("e",Oo),q("E",Oo),q("dd",function(e,t){return t.weekdaysMinRegex(e)}),q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),q("dddd",function(e,t){return t.weekdaysRegex(e)}),Q(["dd","ddd","dddd"],function(e,t,i,o){var n=i._locale.weekdaysParse(e,o,i._strict);null!=n?t.d=n:c(i).invalidWeekday=e}),Q(["d","e","E"],function(e,t,i,o){t[o]=v(e)});var yn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),_n=No,xn=No,kn=No;$("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),q("DDD",Do),q("DDDD",xo),J(["DDD","DDDD"],function(e,t,i){i._dayOfYear=v(e)}),$("H",["HH",2],0,"hour"),$("h",["hh",2],0,fi),$("k",["kk",2],0,mi),$("hmm",0,0,function(){return""+fi.apply(this)+W(this.minutes(),2)}),$("hmmss",0,0,function(){return""+fi.apply(this)+W(this.minutes(),2)+W(this.seconds(),2)}),$("Hmm",0,0,function(){return""+this.hours()+W(this.minutes(),2)}),$("Hmmss",0,0,function(){return""+this.hours()+W(this.minutes(),2)+W(this.seconds(),2)}),gi("a",!0),gi("A",!1),L("hour","h"),q("a",vi),q("A",vi),q("H",Oo),q("h",Oo),q("HH",Oo,_o),q("hh",Oo,_o),q("hmm",Co),q("hmmss",Mo),q("Hmm",Co),q("Hmmss",Mo),J(["H","HH"],Wo),J(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),J(["h","hh"],function(e,t,i){t[Wo]=v(e),c(i).bigHour=!0}),J("hmm",function(e,t,i){var o=e.length-2;t[Wo]=v(e.substr(0,o)),t[$o]=v(e.substr(o)),c(i).bigHour=!0}),J("hmmss",function(e,t,i){var o=e.length-4,n=e.length-2;t[Wo]=v(e.substr(0,o)),t[$o]=v(e.substr(o,2)),t[Uo]=v(e.substr(n)),c(i).bigHour=!0}),J("Hmm",function(e,t,i){var o=e.length-2;t[Wo]=v(e.substr(0,o)),t[$o]=v(e.substr(o))}),J("Hmmss",function(e,t,i){var o=e.length-4,n=e.length-2;t[Wo]=v(e.substr(0,o)),t[$o]=v(e.substr(o,2)),t[Uo]=v(e.substr(n))});var Sn=/[ap]\.?m?\.?/i,On=F("Hours",!0);$("m",["mm",2],0,"minute"),L("minute","m"),q("m",Oo),q("mm",Oo,_o),J(["m","mm"],$o);var Cn=F("Minutes",!1);$("s",["ss",2],0,"second"),L("second","s"),q("s",Oo),q("ss",Oo,_o),J(["s","ss"],Uo);var Mn=F("Seconds",!1),Dn;for($("S",0,0,function(){return~~(this.millisecond()/100)}),$(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$(0,["SSS",3],0,"millisecond"),$(0,["SSSS",4],0,function(){return 10*this.millisecond()}),$(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),$(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),$(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),$(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),$(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),q("S",Do,wo),q("SS",Do,_o),q("SSS",Do,xo),Dn="SSSS";Dn.length<=9;Dn+="S")q(Dn,Po);for(Dn="S";Dn.length<=9;Dn+="S")J(Dn,wi);var En=F("Milliseconds",!1);$("z",0,0,"zoneAbbr"),$("zz",0,0,"zoneName");var Tn=f.prototype;Tn.add=pn,Tn.calendar=dt,Tn.clone=ct,Tn.diff=yt,Tn.endOf=Tt,Tn.format=xt,Tn.from=kt,Tn.fromNow=St,Tn.to=Ot,Tn.toNow=Ct,Tn.get=H,Tn.invalidAt=Bt,Tn.isAfter=ut,Tn.isBefore=pt,Tn.isBetween=ft,Tn.isSame=mt,Tn.isSameOrAfter=gt,Tn.isSameOrBefore=vt,Tn.isValid=zt,Tn.lang=mn,Tn.locale=Mt,Tn.localeData=Dt,Tn.max=hn,Tn.min=an,Tn.parsingFlags=Ft,Tn.set=H,Tn.startOf=Et,Tn.subtract=fn,Tn.toArray=Rt,Tn.toObject=Lt,Tn.toDate=At,Tn.toISOString=_t,Tn.toJSON=Nt,Tn.toString=wt,Tn.unix=It,Tn.valueOf=Pt,Tn.creationData=jt,Tn.year=rn,Tn.isLeapYear=be,Tn.weekYear=Wt,Tn.isoWeekYear=$t,Tn.quarter=Tn.quarters=qt,Tn.month=ae,Tn.daysInMonth=he,Tn.week=Tn.weeks=Jt,Tn.isoWeek=Tn.isoWeeks=Qt,Tn.weeksInYear=Yt,Tn.isoWeeksInYear=Ut,Tn.date=vn,Tn.day=Tn.days=ri,Tn.weekday=ai,Tn.isoWeekday=hi,Tn.dayOfYear=pi,Tn.hour=Tn.hours=On,Tn.minute=Tn.minutes=Cn,Tn.second=Tn.seconds=Mn,Tn.millisecond=Tn.milliseconds=En,Tn.utcOffset=Ge,Tn.utc=qe,Tn.local=Xe,Tn.parseZone=Ke,Tn.hasAlignedHourOffset=Ze,Tn.isDST=Je,Tn.isDSTShifted=Qe,Tn.isLocal=et,Tn.isUtcOffset=tt,Tn.isUtc=it,Tn.isUTC=it,Tn.zoneAbbr=_i,Tn.zoneName=xi,Tn.dates=w("dates accessor is deprecated. Use date instead.",vn),Tn.months=w("months accessor is deprecated. Use month instead",ae),Tn.years=w("years accessor is deprecated. Use year instead",rn),Tn.zone=w("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ve);var Pn=Tn,In={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},An={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rn="Invalid date",Ln="%d",Nn=/\d{1,2}/,zn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Fn=C.prototype;Fn._calendar=In,Fn.calendar=Oi,Fn._longDateFormat=An,Fn.longDateFormat=Ci,Fn._invalidDate=Rn,Fn.invalidDate=Mi,Fn._ordinal=Ln,Fn.ordinal=Di,Fn._ordinalParse=Nn,Fn.preparse=Ei,Fn.postformat=Ei,Fn._relativeTime=zn,Fn.relativeTime=Ti,Fn.pastFuture=Pi,Fn.set=S,Fn.months=ie,Fn._months=Xo,Fn.monthsShort=oe,Fn._monthsShort=Ko,Fn.monthsParse=se,Fn._monthsRegex=Jo,Fn.monthsRegex=de,Fn._monthsShortRegex=Zo,Fn.monthsShortRegex=le,Fn.week=Xt,Fn._week=gn,Fn.firstDayOfYear=Zt,Fn.firstDayOfWeek=Kt,Fn.weekdays=ti,Fn._weekdays=yn,Fn.weekdaysMin=oi,Fn._weekdaysMin=wn,Fn.weekdaysShort=ii,Fn._weekdaysShort=bn,Fn.weekdaysParse=si,Fn._weekdaysRegex=_n,Fn.weekdaysRegex=li,Fn._weekdaysShortRegex=xn,Fn.weekdaysShortRegex=di,Fn._weekdaysMinRegex=kn,Fn.weekdaysMinRegex=ci,Fn.isPM=yi,Fn._meridiemParse=Sn,Fn.meridiem=bi,T("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),l.lang=w("moment.lang is deprecated. Use moment.locale instead.",T),l.langData=w("moment.langData is deprecated. Use moment.localeData instead.",A);var Bn=Math.abs,jn=Ki("ms"),Hn=Ki("s"),Wn=Ki("m"),$n=Ki("h"),Un=Ki("d"),Yn=Ki("w"),Gn=Ki("M"),Vn=Ki("y"),qn=Ji("milliseconds"),Xn=Ji("seconds"),Kn=Ji("minutes"),Zn=Ji("hours"),Jn=Ji("days"),Qn=Ji("months"),es=Ji("years"),ts=Math.round,is={s:45,m:45,h:22,d:26,M:11},os=Math.abs,ns=je.prototype,ss;return ns.abs=function(){var e=this._data;return this._milliseconds=Bn(this._milliseconds),this._days=Bn(this._days),this._months=Bn(this._months),e.milliseconds=Bn(e.milliseconds),e.seconds=Bn(e.seconds),e.minutes=Bn(e.minutes),e.hours=Bn(e.hours),e.months=Bn(e.months),e.years=Bn(e.years),this},ns.add=function(e,t){return Hi(this,e,t,1)},ns.subtract=function(e,t){return Hi(this,e,t,-1)},ns.as=function(e){var t,i,o=this._milliseconds;if("month"===(e=N(e))||"year"===e)return t=this._days+o/864e5,i=this._months+Gi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Vi(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return 24*t+o/36e5;case"minute":return 1440*t+o/6e4;case"second":return 86400*t+o/1e3;case"millisecond":return Math.floor(864e5*t)+o;default:throw new Error("Unknown unit "+e)}},ns.asMilliseconds=jn,ns.asSeconds=Hn,ns.asMinutes=Wn,ns.asHours=$n,ns.asDays=Un,ns.asWeeks=Yn,ns.asMonths=Gn,ns.asYears=Vn,ns.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},ns._bubble=function(){var e,t,i,o,n,s=this._milliseconds,r=this._days,a=this._months,h=this._data;return 0<=s&&0<=r&&0<=a||s<=0&&r<=0&&a<=0||(s+=864e5*Ui(Vi(a)+r),a=r=0),h.milliseconds=s%1e3,e=g(s/1e3),h.seconds=e%60,t=g(e/60),h.minutes=t%60,i=g(t/60),h.hours=i%24,r+=g(i/24),n=g(Gi(r)),a+=n,r-=Ui(Vi(n)),o=g(a/12),a%=12,h.days=r,h.months=a,h.years=o,this},ns.get=function(e){return this[(e=N(e))+"s"]()},ns.milliseconds=qn,ns.seconds=Xn,ns.minutes=Kn,ns.hours=Zn,ns.days=Jn,ns.weeks=function(){return g(this.days()/7)},ns.months=Qn,ns.years=es,ns.humanize=function(e){var t=this.localeData(),i=function(e,t,i){var o=ot(e).abs(),n=ts(o.as("s")),s=ts(o.as("m")),r=ts(o.as("h")),a=ts(o.as("d")),h=ts(o.as("M")),l=ts(o.as("y")),d=(n<is.s?["s",n]:s<=1&&["m"])||s<is.m&&["mm",s]||r<=1&&["h"]||r<is.h&&["hh",r]||a<=1&&["d"]||a<is.d&&["dd",a]||h<=1&&["M"]||h<is.M&&["MM",h]||l<=1&&["y"]||["yy",l];return d[2]=t,d[3]=0<+e,d[4]=i,function(e,t,i,o,n){return n.relativeTime(t||1,!!i,e,o)}.apply(null,d)}(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)},ns.toISOString=no,ns.toString=no,ns.toJSON=no,ns.locale=Mt,ns.localeData=Dt,ns.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",no),ns.lang=mn,$("X",0,0,"unix"),$("x",0,0,"valueOf"),q("x",Io),q("X",/[+-]?\d+(\.\d{1,3})?/),J("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),J("x",function(e,t,i){i._d=new Date(v(e))}),l.version="2.13.0",function(e){so=e}(Ne),l.fn=Pn,l.min=function(){return ze("isBefore",[].slice.call(arguments,0))},l.max=function(){return ze("isAfter",[].slice.call(arguments,0))},l.now=function(){return Date.now?Date.now():+new Date},l.utc=d,l.unix=function(e){return Ne(1e3*e)},l.months=function(e,t){return Ai(e,t,"months")},l.isDate=s,l.locale=T,l.invalid=o,l.duration=ot,l.isMoment=m,l.weekdays=function(e,t,i){return Ri(e,t,i,"weekdays")},l.parseZone=function(){return Ne.apply(null,arguments).parseZone()},l.localeData=A,l.isDuration=He,l.monthsShort=function(e,t){return Ai(e,t,"monthsShort")},l.weekdaysMin=function(e,t,i){return Ri(e,t,i,"weekdaysMin")},l.defineLocale=P,l.updateLocale=function(e,t){var i;null!=t?(null!=fo[e]&&(t=O(fo[e]._config,t)),(i=new C(t)).parentLocale=fo[e],fo[e]=i,T(e)):null!=fo[e]&&(null!=fo[e].parentLocale?fo[e]=fo[e].parentLocale:null!=fo[e]&&delete fo[e]);return fo[e]},l.locales=function(){return co(fo)},l.weekdaysShort=function(e,t,i){return Ri(e,t,i,"weekdaysShort")},l.normalizeUnits=N,l.relativeTimeThreshold=function(e,t){return void 0!==is[e]&&(void 0===t?is[e]:(is[e]=t,!0))},l.prototype=Pn,l}()}).call(t,i(4)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function i(e){throw new Error("Cannot find module '"+e+"'.")}i.keys=function(){return[]},i.resolve=i,(e.exports=i).id=5},function(c,e){(function(e){function p(e,t){var i=t||0;return s[e[i++]]+s[e[i++]]+s[e[i++]]+s[e[i++]]+"-"+s[e[i++]]+s[e[i++]]+"-"+s[e[i++]]+s[e[i++]]+"-"+s[e[i++]]+s[e[i++]]+"-"+s[e[i++]]+s[e[i++]]+s[e[i++]]+s[e[i++]]+s[e[i++]]+s[e[i++]]}function t(e,t,i){var o=t&&i||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var s=0;s<16;s++)t[o+s]=n[s];return t||p(n)}var r,i="undefined"!=typeof window?window:void 0!==e?e:null;if(i&&i.crypto&&crypto.getRandomValues){var o=new Uint8Array(16);r=function(){return crypto.getRandomValues(o),o}}if(!r){var n=new Array(16);r=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}for(var s=[],a={},h=0;h<256;h++)s[h]=(h+256).toString(16).substr(1),a[s[h]]=h;var l=r(),f=[1|l[0],l[1],l[2],l[3],l[4],l[5]],m=16383&(l[6]<<8|l[7]),g=0,v=0,d=t;d.v1=function(e,t,i){var o=t&&i||0,n=t||[],s=void 0!==(e=e||{}).clockseq?e.clockseq:m,r=void 0!==e.msecs?e.msecs:(new Date).getTime(),a=void 0!==e.nsecs?e.nsecs:v+1,h=r-g+(a-v)/1e4;if(h<0&&void 0===e.clockseq&&(s=s+1&16383),(h<0||g<r)&&void 0===e.nsecs&&(a=0),1e4<=a)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=r,m=s;var l=(1e4*(268435455&(r+=122192928e5))+(v=a))%4294967296;n[o++]=l>>>24&255,n[o++]=l>>>16&255,n[o++]=l>>>8&255,n[o++]=255&l;var d=r/4294967296*1e4&268435455;n[o++]=d>>>8&255,n[o++]=255&d,n[o++]=d>>>24&15|16,n[o++]=d>>>16&255,n[o++]=s>>>8|128,n[o++]=255&s;for(var c=e.node||f,u=0;u<6;u++)n[o+u]=c[u];return t||p(n)},d.v4=t,d.parse=function(e,t,i){var o=t&&i||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[o+n++]=a[e])});n<16;)t[o+n++]=0;return t},d.unparse=p,c.exports=d}).call(e,function(){return this}())},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Graph3d=i(12),t.graph3d={Camera:i(16),Filter:i(17),Point2d:i(15),Point3d:i(14),Slider:i(18),StepNumber:i(19)},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,l){l.prepareElements=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t].redundant=e[t].used,e[t].used=[])},l.cleanupElements=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].redundant){for(var i=0;i<e[t].redundant.length;i++)e[t].redundant[i].parentNode.removeChild(e[t].redundant[i]);e[t].redundant=[]}},l.resetElements=function(e){l.prepareElements(e),l.cleanupElements(e),l.prepareElements(e)},l.getSVGElement=function(e,t,i){var o;return t.hasOwnProperty(e)?0<t[e].redundant.length?(o=t[e].redundant[0],t[e].redundant.shift()):(o=document.createElementNS("http://www.w3.org/2000/svg",e),i.appendChild(o)):(o=document.createElementNS("http://www.w3.org/2000/svg",e),t[e]={used:[],redundant:[]},i.appendChild(o)),t[e].used.push(o),o},l.getDOMElement=function(e,t,i,o){var n;return t.hasOwnProperty(e)?0<t[e].redundant.length?(n=t[e].redundant[0],t[e].redundant.shift()):(n=document.createElement(e),void 0!==o?i.insertBefore(n,o):i.appendChild(n)):(n=document.createElement(e),t[e]={used:[],redundant:[]},void 0!==o?i.insertBefore(n,o):i.appendChild(n)),t[e].used.push(n),n},l.drawPoint=function(e,t,i,o,n,s){var r;if("circle"==i.style?((r=l.getSVGElement("circle",o,n)).setAttributeNS(null,"cx",e),r.setAttributeNS(null,"cy",t),r.setAttributeNS(null,"r",.5*i.size)):((r=l.getSVGElement("rect",o,n)).setAttributeNS(null,"x",e-.5*i.size),r.setAttributeNS(null,"y",t-.5*i.size),r.setAttributeNS(null,"width",i.size),r.setAttributeNS(null,"height",i.size)),void 0!==i.styles&&r.setAttributeNS(null,"style",i.styles),r.setAttributeNS(null,"class",i.className+" vis-point"),s){var a=l.getSVGElement("text",o,n);s.xOffset&&(e+=s.xOffset),s.yOffset&&(t+=s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t)}return r},l.drawBar=function(e,t,i,o,n,s,r,a){if(0!=o){o<0&&(t-=o*=-1);var h=l.getSVGElement("rect",s,r);h.setAttributeNS(null,"x",e-.5*i),h.setAttributeNS(null,"y",t),h.setAttributeNS(null,"width",i),h.setAttributeNS(null,"height",o),h.setAttributeNS(null,"class",n),a&&h.setAttributeNS(null,"style",a)}}},function(e,t,i){function o(e,t){if(e&&!Array.isArray(e)&&(t=e,e=null),this._options=t||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=Object.keys(this._options.type),o=0,n=i.length;o<n;o++){var s=i[o],r=this._options.type[s];this._type[s]="Date"==r||"ISODate"==r||"ASPDate"==r?"Date":r}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},e&&this.add(e),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},v=i(1),s=i(10);o.prototype.setOptions=function(e){e&&void 0!==e.queue&&(!1===e.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=s.extend(this,{replace:["add","update","remove"]})),"object"===n(e.queue)&&this._queue.setOptions(e.queue)))},o.prototype.on=function(e,t){var i=this._subscribers[e];i||(i=[],this._subscribers[e]=i),i.push({callback:t})},o.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},o.prototype.off=function(e,t){var i=this._subscribers[e];i&&(this._subscribers[e]=i.filter(function(e){return e.callback!=t}))},o.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},o.prototype._trigger=function(e,t,i){if("*"==e)throw new Error("Cannot trigger event *");var o=[];e in this._subscribers&&(o=o.concat(this._subscribers[e])),"*"in this._subscribers&&(o=o.concat(this._subscribers["*"]));for(var n=0,s=o.length;n<s;n++){var r=o[n];r.callback&&r.callback(e,t,i||null)}},o.prototype.add=function(e,t){var i,o=[];if(Array.isArray(e))for(var n=0,s=e.length;n<s;n++)i=this._addItem(e[n]),o.push(i);else{if(!(e instanceof Object))throw new Error("Unknown dataType");i=this._addItem(e),o.push(i)}return o.length&&this._trigger("add",{items:o},t),o},o.prototype.update=function(e,t){function i(e){var t=e[h];if(a._data[t]){var i=v.extend({},a._data[t]);t=a._updateItem(e),n.push(t),r.push(e),s.push(i)}else t=a._addItem(e),o.push(t)}var o=[],n=[],s=[],r=[],a=this,h=a._fieldId;if(Array.isArray(e))for(var l=0,d=e.length;l<d;l++)e[l]instanceof Object?i(e[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!(e instanceof Object))throw new Error("Unknown dataType");i(e)}if(o.length&&this._trigger("add",{items:o},t),n.length){var c={items:n,oldData:s,data:r};this._trigger("update",c,t)}return o.concat(n)},o.prototype.get=function(e){var t,i,o,n,s=v.getType(e);if((o="String"==s||"Number"==s?(t=e,arguments[1]):"Array"==s?(i=e,arguments[1]):e)&&o.returnType){n=-1==["Array","Object"].indexOf(o.returnType)?"Array":o.returnType}else n="Array";var r,a,h,l,d,c=o&&o.type||this._options.type,u=o&&o.filter,p=[];if(null!=t)(r=this._getItem(t,c))&&u&&!u(r)&&(r=null);else if(null!=i)for(l=0,d=i.length;l<d;l++)r=this._getItem(i[l],c),u&&!u(r)||p.push(r);else for(l=0,d=(a=Object.keys(this._data)).length;l<d;l++)h=a[l],r=this._getItem(h,c),u&&!u(r)||p.push(r);if(o&&o.order&&null==t&&this._sort(p,o.order),o&&o.fields){var f=o.fields;if(null!=t)r=this._filterFields(r,f);else for(l=0,d=p.length;l<d;l++)p[l]=this._filterFields(p[l],f)}if("Object"!=n)return null!=t?r:p;var m,g={};for(l=0,d=p.length;l<d;l++)g[(m=p[l]).id]=m;return g},o.prototype.getIds=function(e){var t,i,o,n,s,r=this._data,a=e&&e.filter,h=e&&e.order,l=e&&e.type||this._options.type,d=Object.keys(r),c=[];if(a)if(h){for(s=[],t=0,i=d.length;t<i;t++)o=d[t],a(n=this._getItem(o,l))&&s.push(n);for(this._sort(s,h),t=0,i=s.length;t<i;t++)c.push(s[t][this._fieldId])}else for(t=0,i=d.length;t<i;t++)o=d[t],a(n=this._getItem(o,l))&&c.push(n[this._fieldId]);else if(h){for(s=[],t=0,i=d.length;t<i;t++)o=d[t],s.push(r[o]);for(this._sort(s,h),t=0,i=s.length;t<i;t++)c.push(s[t][this._fieldId])}else for(t=0,i=d.length;t<i;t++)n=r[o=d[t]],c.push(n[this._fieldId]);return c},o.prototype.getDataSet=function(){return this},o.prototype.forEach=function(e,t){var i,o,n,s,r=t&&t.filter,a=t&&t.type||this._options.type,h=this._data,l=Object.keys(h);if(t&&t.order){var d=this.get(t);for(i=0,o=d.length;i<o;i++)e(n=d[i],s=n[this._fieldId])}else for(i=0,o=l.length;i<o;i++)s=l[i],n=this._getItem(s,a),r&&!r(n)||e(n,s)},o.prototype.map=function(e,t){var i,o,n,s,r=t&&t.filter,a=t&&t.type||this._options.type,h=[],l=this._data,d=Object.keys(l);for(i=0,o=d.length;i<o;i++)n=d[i],s=this._getItem(n,a),r&&!r(s)||h.push(e(s,n));return t&&t.order&&this._sort(h,t.order),h},o.prototype._filterFields=function(e,t){if(!e)return e;var i,o,n={},s=Object.keys(e),r=s.length;if(Array.isArray(t))for(i=0;i<r;i++)o=s[i],-1!=t.indexOf(o)&&(n[o]=e[o]);else for(i=0;i<r;i++)o=s[i],t.hasOwnProperty(o)&&(n[t[o]]=e[o]);return n},o.prototype._sort=function(e,t){if(v.isString(t)){var n=t;e.sort(function(e,t){var i=e[n],o=t[n];return o<i?1:i<o?-1:0})}else{if("function"!=typeof t)throw new TypeError("Order must be a function or a string");e.sort(t)}},o.prototype.remove=function(e,t){var i,o,n,s=[];if(Array.isArray(e))for(i=0,o=e.length;i<o;i++)null!=(n=this._remove(e[i]))&&s.push(n);else null!=(n=this._remove(e))&&s.push(n);return s.length&&this._trigger("remove",{items:s},t),s},o.prototype._remove=function(e){if(v.isNumber(e)||v.isString(e)){if(this._data[e])return delete this._data[e],this.length--,e}else if(e instanceof Object){var t=e[this._fieldId];if(void 0!==t&&this._data[t])return delete this._data[t],this.length--,t}return null},o.prototype.clear=function(e){var t=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:t},e),t},o.prototype.max=function(e){var t,i,o=this._data,n=Object.keys(o),s=null,r=null;for(t=0,i=n.length;t<i;t++){var a=o[n[t]],h=a[e];null!=h&&(!s||r<h)&&(s=a,r=h)}return s},o.prototype.min=function(e){var t,i,o=this._data,n=Object.keys(o),s=null,r=null;for(t=0,i=n.length;t<i;t++){var a=o[n[t]],h=a[e];null!=h&&(!s||h<r)&&(s=a,r=h)}return s},o.prototype.distinct=function(e){var t,i,o,n=this._data,s=Object.keys(n),r=[],a=this._options.type&&this._options.type[e]||null,h=0;for(t=0,o=s.length;t<o;t++){var l=n[s[t]][e],d=!1;for(i=0;i<h;i++)if(r[i]==l){d=!0;break}d||void 0===l||(r[h]=l,h++)}if(a)for(t=0,o=r.length;t<o;t++)r[t]=v.convert(r[t],a);return r},o.prototype._addItem=function(e){var t=e[this._fieldId];if(null!=t){if(this._data[t])throw new Error("Cannot add item: item with id "+t+" already exists")}else t=v.randomUUID(),e[this._fieldId]=t;var i,o,n={},s=Object.keys(e);for(i=0,o=s.length;i<o;i++){var r=s[i],a=this._type[r];n[r]=v.convert(e[r],a)}return this._data[t]=n,this.length++,t},o.prototype._getItem=function(e,t){var i,o,n,s,r=this._data[e];if(!r)return null;var a={},h=Object.keys(r);if(t)for(n=0,s=h.length;n<s;n++)o=r[i=h[n]],a[i]=v.convert(o,t[i]);else for(n=0,s=h.length;n<s;n++)o=r[i=h[n]],a[i]=o;return a},o.prototype._updateItem=function(e){var t=e[this._fieldId];if(null==t)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");var i=this._data[t];if(!i)throw new Error("Cannot update item: no item with id "+t+" found");for(var o=Object.keys(e),n=0,s=o.length;n<s;n++){var r=o[n],a=this._type[r];i[r]=v.convert(e[r],a)}return t},e.exports=o},function(e,t){function r(e){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(e)}r.prototype.setOptions=function(e){e&&void 0!==e.delay&&(this.delay=e.delay),e&&void 0!==e.max&&(this.max=e.max),this._flushIfNeeded()},r.extend=function(e,t){var i=new r(t);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){i.flush()};var o=[{name:"flush",original:void 0}];if(t&&t.replace)for(var n=0;n<t.replace.length;n++){var s=t.replace[n];o.push({name:s,original:e[s]}),i.replace(e,s)}return i._extended={object:e,methods:o},i},r.prototype.destroy=function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,i=0;i<t.length;i++){var o=t[i];o.original?e[o.name]=o.original:delete e[o.name]}this._extended=null}},r.prototype.replace=function(e,t){var i=this,o=e[t];if(!o)throw new Error("Method "+t+" undefined");e[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.queue({args:e,fn:o,context:this})}},r.prototype.queue=function(e){"function"==typeof e?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()},r.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),0<this.queue.length&&"number"==typeof this.delay){var e=this;this._timeout=setTimeout(function(){e.flush()},this.delay)}},r.prototype.flush=function(){for(;0<this._queue.length;){var e=this._queue.shift();e.fn.apply(e.context||e.fn,e.args||[])}},e.exports=r},function(e,t,i){function o(e,t){this._data=null,this._ids={},this.length=0,this._options=t||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(e)}var h=i(1),n=i(9);o.prototype.setData=function(e){var t,i,o,n;if(this._data&&(this._data.off&&this._data.off("*",this.listener),t=Object.keys(this._ids),this._ids={},this.length=0,this._trigger("remove",{items:t})),this._data=e,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",o=0,n=(t=this._data.getIds({filter:this._options&&this._options.filter})).length;o<n;o++)i=t[o],this._ids[i]=!0;this.length=t.length,this._trigger("add",{items:t}),this._data.on&&this._data.on("*",this.listener)}},o.prototype.refresh=function(){var e,t,i,o=this._data.getIds({filter:this._options&&this._options.filter}),n=Object.keys(this._ids),s={},r=[],a=[];for(t=0,i=o.length;t<i;t++)s[e=o[t]]=!0,this._ids[e]||(r.push(e),this._ids[e]=!0);for(t=0,i=n.length;t<i;t++)s[e=n[t]]||(a.push(e),delete this._ids[e]);this.length+=r.length-a.length,r.length&&this._trigger("add",{items:r}),a.length&&this._trigger("remove",{items:a})},o.prototype.get=function(e){var t,i,o,n=this,s=h.getType(e);o="String"==s||"Number"==s||"Array"==s?(t=e,i=arguments[1],arguments[2]):(i=e,arguments[1]);var r=h.extend({},this._options,i);this._options.filter&&i&&i.filter&&(r.filter=function(e){return n._options.filter(e)&&i.filter(e)});var a=[];return null!=t&&a.push(t),a.push(r),a.push(o),this._data&&this._data.get.apply(this._data,a)},o.prototype.getIds=function(t){var e;if(this._data){var i,o=this._options.filter;i=t&&t.filter?o?function(e){return o(e)&&t.filter(e)}:t.filter:o,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},o.prototype.map=function(e,t){var i=[];if(this._data){var o,n=this._options.filter;o=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,i=this._data.map(e,{filter:o,order:t&&t.order})}else i=[];return i},o.prototype.getDataSet=function(){for(var e=this;e instanceof o;)e=e._data;return e||null},o.prototype._onEvent=function(e,t,i){var o,n,s,r=t&&t.items,a=this._data,h=[],l=[],d=[],c=[];if(r&&a){switch(e){case"add":for(o=0,n=r.length;o<n;o++)s=r[o],this.get(s)&&(this._ids[s]=!0,l.push(s));break;case"update":for(o=0,n=r.length;o<n;o++)s=r[o],this.get(s)?this._ids[s]?(d.push(s),h.push(t.data[o])):(this._ids[s]=!0,l.push(s)):this._ids[s]&&(delete this._ids[s],c.push(s));break;case"remove":for(o=0,n=r.length;o<n;o++)s=r[o],this._ids[s]&&(delete this._ids[s],c.push(s))}this.length+=l.length-c.length,l.length&&this._trigger("add",{items:l},i),d.length&&this._trigger("update",{items:d,data:h},i),c.length&&this._trigger("remove",{items:c},i)}},o.prototype.on=n.prototype.on,o.prototype.off=n.prototype.off,o.prototype._trigger=n.prototype._trigger,o.prototype.subscribe=o.prototype.on,o.prototype.unsubscribe=o.prototype.off,e.exports=o},function(e,t,i){function w(e,t,i){if(!(this instanceof w))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=e,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";function o(e){return e}this.xValueLabel=o,this.yValueLabel=o,this.zValueLabel=o,this.filterLabel="time",this.legendLabel="value",this.style=w.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new s,this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7),this.eye=new _(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.axisColor="#4D4D4D",this.gridColor="#D3D3D3",this.dataColor={fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},this.dotSizeRatio=.02,this.create(),this.setOptions(i),t&&this.setData(t)}function a(e){return"clientX"in e?e.clientX:e.targetTouches[0]&&e.targetTouches[0].clientX||0}function h(e){return"clientY"in e?e.clientY:e.targetTouches[0]&&e.targetTouches[0].clientY||0}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=i(13),c=i(9),u=i(11),l=i(1),_=i(14),g=i(15),s=i(16),p=i(17),r=i(18),x=i(19);o(w.prototype),w.prototype._setScale=function(){this.scale=new _(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var e=(this.xMax+this.xMin)/2*this.scale.x,t=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(e,t,i)},w.prototype._convert3Dto2D=function(e){var t=this._convertPointToTranslation(e);return this._convertTranslationToScreen(t)},w.prototype._convertPointToTranslation=function(e){var t=e.x*this.scale.x,i=e.y*this.scale.y,o=e.z*this.scale.z,n=this.camera.getCameraLocation().x,s=this.camera.getCameraLocation().y,r=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),h=Math.cos(this.camera.getCameraRotation().x),l=Math.sin(this.camera.getCameraRotation().y),d=Math.cos(this.camera.getCameraRotation().y),c=Math.sin(this.camera.getCameraRotation().z),u=Math.cos(this.camera.getCameraRotation().z);return new _(d*(c*(i-s)+u*(t-n))-l*(o-r),a*(d*(o-r)+l*(c*(i-s)+u*(t-n)))+h*(u*(i-s)-c*(t-n)),h*(d*(o-r)+l*(c*(i-s)+u*(t-n)))-a*(u*(i-s)-c*(t-n)))},w.prototype._convertTranslationToScreen=function(e){var t,i,o=this.eye.x,n=this.eye.y,s=this.eye.z,r=e.x,a=e.y,h=e.z;return i=this.showPerspective?(t=s/h*(r-o),s/h*(a-n)):(t=r*-(s/this.camera.getArmLength()),a*-(s/this.camera.getArmLength())),new g(this.xcenter+t*this.frame.canvas.clientWidth,this.ycenter-i*this.frame.canvas.clientWidth)},w.prototype._setBackgroundColor=function(e){var t="white",i="gray",o=1;if("string"==typeof e)t=e,i="none",o=0;else if("object"===(void 0===e?"undefined":n(e)))void 0!==e.fill&&(t=e.fill),void 0!==e.stroke&&(i=e.stroke),void 0!==e.strokeWidth&&(o=e.strokeWidth);else if(void 0!==e)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=t,this.frame.style.borderColor=i,this.frame.style.borderWidth=o+"px",this.frame.style.borderStyle="solid"},w.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},w.prototype._getStyleNumber=function(e){switch(e){case"dot":return w.STYLE.DOT;case"dot-line":return w.STYLE.DOTLINE;case"dot-color":return w.STYLE.DOTCOLOR;case"dot-size":return w.STYLE.DOTSIZE;case"line":return w.STYLE.LINE;case"grid":return w.STYLE.GRID;case"surface":return w.STYLE.SURFACE;case"bar":return w.STYLE.BAR;case"bar-color":return w.STYLE.BARCOLOR;case"bar-size":return w.STYLE.BARSIZE}return-1},w.prototype._determineColumnIndexes=function(e,t){if(this.style===w.STYLE.DOT||this.style===w.STYLE.DOTLINE||this.style===w.STYLE.LINE||this.style===w.STYLE.GRID||this.style===w.STYLE.SURFACE||this.style===w.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,3<e.getNumberOfColumns()&&(this.colFilter=3);else{if(this.style!==w.STYLE.DOTCOLOR&&this.style!==w.STYLE.DOTSIZE&&this.style!==w.STYLE.BARCOLOR&&this.style!==w.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,4<e.getNumberOfColumns()&&(this.colFilter=4)}},w.prototype.getNumberOfRows=function(e){return e.length},w.prototype.getNumberOfColumns=function(e){var t=0;for(var i in e[0])e[0].hasOwnProperty(i)&&t++;return t},w.prototype.getDistinctValues=function(e,t){for(var i=[],o=0;o<e.length;o++)-1==i.indexOf(e[o][t])&&i.push(e[o][t]);return i},w.prototype.getColumnRange=function(e,t){for(var i={min:e[0][t],max:e[0][t]},o=0;o<e.length;o++)i.min>e[o][t]&&(i.min=e[o][t]),i.max<e[o][t]&&(i.max=e[o][t]);return i},w.prototype._dataInitialize=function(e,t){var i=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==e){var o;if(Array.isArray(e)&&(e=new c(e)),!(e instanceof c||e instanceof u))throw new Error("Array, DataSet, or DataView expected");if(0!=(o=e.get()).length){this.dataSet=e,this.dataTable=o,this._onChange=function(){i.setData(i.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",o[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new p(e,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){i.redraw()}));var n=this.style==w.STYLE.BAR||this.style==w.STYLE.BARCOLOR||this.style==w.STYLE.BARSIZE;if(n){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var s=this.getDistinctValues(o,this.colX);this.xBarWidth=s[1]-s[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var r=this.getDistinctValues(o,this.colY);this.yBarWidth=r[1]-r[0]||1}}var a=this.getColumnRange(o,this.colX);n&&(a.min-=this.xBarWidth/2,a.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:a.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:a.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var h=this.getColumnRange(o,this.colY);n&&(h.min-=this.yBarWidth/2,h.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:h.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:h.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var l=this.getColumnRange(o,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:l.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:l.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var d=this.getColumnRange(o,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:d.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:d.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},w.prototype._getDataPoints=function(e){var t,i,o,n,s,r,a=[];if(this.style===w.STYLE.GRID||this.style===w.STYLE.SURFACE){var h=[],l=[];for(o=0;o<this.getNumberOfRows(e);o++)t=e[o][this.colX]||0,i=e[o][this.colY]||0,-1===h.indexOf(t)&&h.push(t),-1===l.indexOf(i)&&l.push(i);function d(e,t){return e-t}h.sort(d),l.sort(d);var c=[];for(o=0;o<e.length;o++){t=e[o][this.colX]||0,i=e[o][this.colY]||0,n=e[o][this.colZ]||0;var u=h.indexOf(t),p=l.indexOf(i);void 0===c[u]&&(c[u]=[]);var f=new _;f.x=t,f.y=i,f.z=n,(s={}).point=f,s.trans=void 0,s.screen=void 0,s.bottom=new _(t,i,this.zMin),c[u][p]=s,a.push(s)}for(t=0;t<c.length;t++)for(i=0;i<c[t].length;i++)c[t][i]&&(c[t][i].pointRight=t<c.length-1?c[t+1][i]:void 0,c[t][i].pointTop=i<c[t].length-1?c[t][i+1]:void 0,c[t][i].pointCross=t<c.length-1&&i<c[t].length-1?c[t+1][i+1]:void 0)}else for(o=0;o<e.length;o++)(r=new _).x=e[o][this.colX]||0,r.y=e[o][this.colY]||0,r.z=e[o][this.colZ]||0,void 0!==this.colValue&&(r.value=e[o][this.colValue]||0),(s={}).point=r,s.bottom=new _(r.x,r.y,this.zMin),s.trans=void 0,s.screen=void 0,a.push(s);return a},w.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var t=this;l.addEventListener(this.frame.canvas,"keydown",onkeydown),l.addEventListener(this.frame.canvas,"mousedown",function(e){t._onMouseDown(e)}),l.addEventListener(this.frame.canvas,"touchstart",function(e){t._onTouchStart(e)}),l.addEventListener(this.frame.canvas,"mousewheel",function(e){t._onWheel(e)}),l.addEventListener(this.frame.canvas,"mousemove",function(e){t._onTooltip(e)}),this.containerElement.appendChild(this.frame)},w.prototype.setSize=function(e,t){this.frame.style.width=e,this.frame.style.height=t,this._resizeCanvas()},w.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},w.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},w.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},w.prototype._resizeCenter=function(){"%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),"%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},w.prototype.setCameraPosition=function(e){void 0!==e&&(void 0!==e.horizontal&&void 0!==e.vertical&&this.camera.setArmRotation(e.horizontal,e.vertical),void 0!==e.distance&&this.camera.setArmLength(e.distance),this.redraw())},w.prototype.getCameraPosition=function(){var e=this.camera.getArmRotation();return e.distance=this.camera.getArmLength(),e},w.prototype._readData=function(e){this._dataInitialize(e,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},w.prototype.setData=function(e){this._readData(e),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},w.prototype.setOptions=function(e){var t=void 0;if(this.animationStop(),void 0!==e){if(void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height),void 0!==e.xCenter&&(this.defaultXCenter=e.xCenter),void 0!==e.yCenter&&(this.defaultYCenter=e.yCenter),void 0!==e.filterLabel&&(this.filterLabel=e.filterLabel),void 0!==e.legendLabel&&(this.legendLabel=e.legendLabel),void 0!==e.xLabel&&(this.xLabel=e.xLabel),void 0!==e.yLabel&&(this.yLabel=e.yLabel),void 0!==e.zLabel&&(this.zLabel=e.zLabel),void 0!==e.xValueLabel&&(this.xValueLabel=e.xValueLabel),void 0!==e.yValueLabel&&(this.yValueLabel=e.yValueLabel),void 0!==e.zValueLabel&&(this.zValueLabel=e.zValueLabel),void 0!==e.dotSizeRatio&&(this.dotSizeRatio=e.dotSizeRatio),void 0!==e.style){var i=this._getStyleNumber(e.style);-1!==i&&(this.style=i)}void 0!==e.showGrid&&(this.showGrid=e.showGrid),void 0!==e.showPerspective&&(this.showPerspective=e.showPerspective),void 0!==e.showShadow&&(this.showShadow=e.showShadow),void 0!==e.tooltip&&(this.showTooltip=e.tooltip),void 0!==e.showAnimationControls&&(this.showAnimationControls=e.showAnimationControls),void 0!==e.keepAspectRatio&&(this.keepAspectRatio=e.keepAspectRatio),void 0!==e.verticalRatio&&(this.verticalRatio=e.verticalRatio),void 0!==e.animationInterval&&(this.animationInterval=e.animationInterval),void 0!==e.animationPreload&&(this.animationPreload=e.animationPreload),void 0!==e.animationAutoStart&&(this.animationAutoStart=e.animationAutoStart),void 0!==e.xBarWidth&&(this.defaultXBarWidth=e.xBarWidth),void 0!==e.yBarWidth&&(this.defaultYBarWidth=e.yBarWidth),void 0!==e.xMin&&(this.defaultXMin=e.xMin),void 0!==e.xStep&&(this.defaultXStep=e.xStep),void 0!==e.xMax&&(this.defaultXMax=e.xMax),void 0!==e.yMin&&(this.defaultYMin=e.yMin),void 0!==e.yStep&&(this.defaultYStep=e.yStep),void 0!==e.yMax&&(this.defaultYMax=e.yMax),void 0!==e.zMin&&(this.defaultZMin=e.zMin),void 0!==e.zStep&&(this.defaultZStep=e.zStep),void 0!==e.zMax&&(this.defaultZMax=e.zMax),void 0!==e.valueMin&&(this.defaultValueMin=e.valueMin),void 0!==e.valueMax&&(this.defaultValueMax=e.valueMax),void 0!==e.backgroundColor&&this._setBackgroundColor(e.backgroundColor),void 0!==e.cameraPosition&&(t=e.cameraPosition),void 0!==t&&(this.camera.setArmRotation(t.horizontal,t.vertical),this.camera.setArmLength(t.distance)),void 0!==e.axisColor&&(this.axisColor=e.axisColor),void 0!==e.gridColor&&(this.gridColor=e.gridColor),e.dataColor&&("string"==typeof e.dataColor?(this.dataColor.fill=e.dataColor,this.dataColor.stroke=e.dataColor):(e.dataColor.fill&&(this.dataColor.fill=e.dataColor.fill),e.dataColor.stroke&&(this.dataColor.stroke=e.dataColor.stroke),void 0!==e.dataColor.strokeWidth&&(this.dataColor.strokeWidth=e.dataColor.strokeWidth)))}this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},w.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===w.STYLE.GRID||this.style===w.STYLE.SURFACE?this._redrawDataGrid():this.style===w.STYLE.LINE?this._redrawDataLine():this.style===w.STYLE.BAR||this.style===w.STYLE.BARCOLOR||this.style===w.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},w.prototype._redrawClear=function(){var e=this.frame.canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},w.prototype._redrawLegend=function(){var e;if(this.style===w.STYLE.DOTCOLOR||this.style===w.STYLE.DOTSIZE){var t,i,o=this.frame.clientWidth*this.dotSizeRatio;i=this.style===w.STYLE.DOTSIZE?(t=o/2)+2*o:t=20;var n=Math.max(.25*this.frame.clientHeight,100),s=this.margin,r=this.frame.clientWidth-this.margin,a=r-i,h=s+n}var l=this.frame.canvas.getContext("2d");if(l.lineWidth=1,l.font="14px arial",this.style===w.STYLE.DOTCOLOR){var d=n;for(e=0;e<d;e++){var c=240*(e/d),u=this._hsv2rgb(c,1,1);l.strokeStyle=u,l.beginPath(),l.moveTo(a,s+e),l.lineTo(r,s+e),l.stroke()}l.strokeStyle=this.axisColor,l.strokeRect(a,s,i,n)}if(this.style===w.STYLE.DOTSIZE&&(l.strokeStyle=this.axisColor,l.fillStyle=this.dataColor.fill,l.beginPath(),l.moveTo(a,s),l.lineTo(r,s),l.lineTo(r-i+t,h),l.lineTo(a,h),l.closePath(),l.fill(),l.stroke()),this.style===w.STYLE.DOTCOLOR||this.style===w.STYLE.DOTSIZE){var p=new x(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(p.start(),p.getCurrent()<this.valueMin&&p.next();!p.end();)e=h-(p.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*n,l.beginPath(),l.moveTo(a-5,e),l.lineTo(a,e),l.stroke(),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.axisColor,l.fillText(p.getCurrent(),a-10,e),p.next();l.textAlign="right",l.textBaseline="top";var f=this.legendLabel;l.fillText(f,r,h+this.margin)}},w.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var e={visible:this.showAnimationControls},t=new r(this.frame.filter,e);this.frame.filter.slider=t,this.frame.filter.style.padding="10px",t.setValues(this.dataFilter.values),t.setPlayInterval(this.animationInterval);var i=this;t.setOnChangeCallback(function(){var e=t.getIndex();i.dataFilter.selectValue(e),i.dataPoints=i.dataFilter._getDataPoints(),i.redraw()})}else this.frame.filter.slider=void 0},w.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},w.prototype._redrawInfo=function(){if(this.dataFilter){var e=this.frame.canvas.getContext("2d");e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var t=this.margin,i=this.margin;e.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),t,i)}},w.prototype._redrawAxis=function(){var e,t,i,o,n,s,r,a,h,l,d,c,u=this.frame.canvas.getContext("2d");u.font=24/this.camera.getArmLength()+"px arial";var p=.025/this.scale.x,f=.025/this.scale.y,m=5/this.camera.getArmLength(),g=this.camera.getArmRotation().horizontal;for(u.lineWidth=1,o=void 0===this.defaultXStep,(i=new x(this.xMin,this.xMax,this.xStep,o)).start(),i.getCurrent()<this.xMin&&i.next();!i.end();){var v=i.getCurrent();this.showGrid?(e=this._convert3Dto2D(new _(v,this.yMin,this.zMin)),t=this._convert3Dto2D(new _(v,this.yMax,this.zMin)),u.strokeStyle=this.gridColor):(e=this._convert3Dto2D(new _(v,this.yMin,this.zMin)),t=this._convert3Dto2D(new _(v,this.yMin+p,this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),e=this._convert3Dto2D(new _(v,this.yMax,this.zMin)),t=this._convert3Dto2D(new _(v,this.yMax-p,this.zMin)),u.strokeStyle=this.axisColor),u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),r=0<Math.cos(g)?this.yMin:this.yMax,n=this._convert3Dto2D(new _(v,r,this.zMin)),0<Math.cos(2*g)?(u.textAlign="center",u.textBaseline="top",n.y+=m):(Math.sin(2*g)<0?u.textAlign="right":u.textAlign="left",u.textBaseline="middle"),u.fillStyle=this.axisColor,u.fillText("  "+this.xValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next()}for(u.lineWidth=1,o=void 0===this.defaultYStep,(i=new x(this.yMin,this.yMax,this.yStep,o)).start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(e=this._convert3Dto2D(new _(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new _(this.xMax,i.getCurrent(),this.zMin)),u.strokeStyle=this.gridColor):(e=this._convert3Dto2D(new _(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new _(this.xMin+f,i.getCurrent(),this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),e=this._convert3Dto2D(new _(this.xMax,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new _(this.xMax-f,i.getCurrent(),this.zMin)),u.strokeStyle=this.axisColor),u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),s=0<Math.sin(g)?this.xMin:this.xMax,n=this._convert3Dto2D(new _(s,i.getCurrent(),this.zMin)),Math.cos(2*g)<0?(u.textAlign="center",u.textBaseline="top",n.y+=m):(0<Math.sin(2*g)?u.textAlign="right":u.textAlign="left",u.textBaseline="middle"),u.fillStyle=this.axisColor,u.fillText("  "+this.yValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next();for(u.lineWidth=1,o=void 0===this.defaultZStep,(i=new x(this.zMin,this.zMax,this.zStep,o)).start(),i.getCurrent()<this.zMin&&i.next(),s=0<Math.cos(g)?this.xMin:this.xMax,r=Math.sin(g)<0?this.yMin:this.yMax;!i.end();)e=this._convert3Dto2D(new _(s,r,i.getCurrent())),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(e.x-m,e.y),u.stroke(),u.textAlign="right",u.textBaseline="middle",u.fillStyle=this.axisColor,u.fillText(this.zValueLabel(i.getCurrent())+" ",e.x-5,e.y),i.next();u.lineWidth=1,e=this._convert3Dto2D(new _(s,r,this.zMin)),t=this._convert3Dto2D(new _(s,r,this.zMax)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),u.lineWidth=1,d=this._convert3Dto2D(new _(this.xMin,this.yMin,this.zMin)),c=this._convert3Dto2D(new _(this.xMax,this.yMin,this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(d.x,d.y),u.lineTo(c.x,c.y),u.stroke(),d=this._convert3Dto2D(new _(this.xMin,this.yMax,this.zMin)),c=this._convert3Dto2D(new _(this.xMax,this.yMax,this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(d.x,d.y),u.lineTo(c.x,c.y),u.stroke(),u.lineWidth=1,e=this._convert3Dto2D(new _(this.xMin,this.yMin,this.zMin)),t=this._convert3Dto2D(new _(this.xMin,this.yMax,this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke(),e=this._convert3Dto2D(new _(this.xMax,this.yMin,this.zMin)),t=this._convert3Dto2D(new _(this.xMax,this.yMax,this.zMin)),u.strokeStyle=this.axisColor,u.beginPath(),u.moveTo(e.x,e.y),u.lineTo(t.x,t.y),u.stroke();var y=this.xLabel;0<y.length&&(l=.1/this.scale.y,s=(this.xMin+this.xMax)/2,r=0<Math.cos(g)?this.yMin-l:this.yMax+l,n=this._convert3Dto2D(new _(s,r,this.zMin)),0<Math.cos(2*g)?(u.textAlign="center",u.textBaseline="top"):(Math.sin(2*g)<0?u.textAlign="right":u.textAlign="left",u.textBaseline="middle"),u.fillStyle=this.axisColor,u.fillText(y,n.x,n.y));var b=this.yLabel;0<b.length&&(h=.1/this.scale.x,s=0<Math.sin(g)?this.xMin-h:this.xMax+h,r=(this.yMin+this.yMax)/2,n=this._convert3Dto2D(new _(s,r,this.zMin)),Math.cos(2*g)<0?(u.textAlign="center",u.textBaseline="top"):(0<Math.sin(2*g)?u.textAlign="right":u.textAlign="left",u.textBaseline="middle"),u.fillStyle=this.axisColor,u.fillText(b,n.x,n.y));var w=this.zLabel;0<w.length&&(s=0<Math.cos(g)?this.xMin:this.xMax,r=Math.sin(g)<0?this.yMin:this.yMax,a=(this.zMin+this.zMax)/2,n=this._convert3Dto2D(new _(s,r,a)),u.textAlign="right",u.textBaseline="middle",u.fillStyle=this.axisColor,u.fillText(w,n.x-30,n.y))},w.prototype._hsv2rgb=function(e,t,i){var o,n,s,r,a,h;switch(r=i*t,a=Math.floor(e/60),h=r*(1-Math.abs(e/60%2-1)),a){case 0:o=r,n=h,s=0;break;case 1:o=h,n=r,s=0;break;case 2:o=0,n=r,s=h;break;case 3:o=0,n=h,s=r;break;case 4:o=h,n=0,s=r;break;case 5:o=r,n=0,s=h;break;default:s=n=o=0}return"RGB("+parseInt(255*o)+","+parseInt(255*n)+","+parseInt(255*s)+")"},w.prototype._redrawDataGrid=function(){var e,t,i,o,n,s,r,a,h,l,d=this.frame.canvas.getContext("2d");if(d.lineJoin="round",d.lineCap="round",!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(n=0;n<this.dataPoints.length;n++){var c=this._convertPointToTranslation(this.dataPoints[n].point),u=this._convertTranslationToScreen(c);this.dataPoints[n].trans=c,this.dataPoints[n].screen=u;var p=this._convertPointToTranslation(this.dataPoints[n].bottom);this.dataPoints[n].dist=this.showPerspective?p.length():-p.z}if(this.dataPoints.sort(function(e,t){return t.dist-e.dist}),this.style===w.STYLE.SURFACE){for(n=0;n<this.dataPoints.length;n++)if(e=this.dataPoints[n],t=this.dataPoints[n].pointRight,i=this.dataPoints[n].pointTop,o=this.dataPoints[n].pointCross,void 0!==e&&void 0!==t&&void 0!==i&&void 0!==o){if(this.showGrayBottom||this.showShadow){var f=_.subtract(o.trans,e.trans),m=_.subtract(i.trans,t.trans),g=_.crossProduct(f,m),v=g.length();s=0<g.z}else s=!0;a=s?(h=240*(1-((e.point.z+t.point.z+i.point.z+o.point.z)/4-this.zMin)*this.scale.z/this.verticalRatio),this.showShadow?(l=Math.min(1+g.x/v/2,1),r=this._hsv2rgb(h,1,l)):(l=1,r=this._hsv2rgb(h,1,l),this.axisColor)):(r="gray",this.axisColor),d.lineWidth=this._getStrokeWidth(e),d.fillStyle=r,d.strokeStyle=a,d.beginPath(),d.moveTo(e.screen.x,e.screen.y),d.lineTo(t.screen.x,t.screen.y),d.lineTo(o.screen.x,o.screen.y),d.lineTo(i.screen.x,i.screen.y),d.closePath(),d.fill(),d.stroke()}}else for(n=0;n<this.dataPoints.length;n++)e=this.dataPoints[n],t=this.dataPoints[n].pointRight,i=this.dataPoints[n].pointTop,void 0!==e&&void 0!==t&&(h=240*(1-((e.point.z+t.point.z)/2-this.zMin)*this.scale.z/this.verticalRatio),d.lineWidth=2*this._getStrokeWidth(e),d.strokeStyle=this._hsv2rgb(h,1,1),d.beginPath(),d.moveTo(e.screen.x,e.screen.y),d.lineTo(t.screen.x,t.screen.y),d.stroke()),void 0!==e&&void 0!==i&&(h=240*(1-((e.point.z+i.point.z)/2-this.zMin)*this.scale.z/this.verticalRatio),d.lineWidth=2*this._getStrokeWidth(e),d.strokeStyle=this._hsv2rgb(h,1,1),d.beginPath(),d.moveTo(e.screen.x,e.screen.y),d.lineTo(i.screen.x,i.screen.y),d.stroke())}},w.prototype._getStrokeWidth=function(e){return void 0!==e?this.showPerspective?1/-e.trans.z*this.dataColor.strokeWidth:-(this.eye.z/this.camera.getArmLength())*this.dataColor.strokeWidth:this.dataColor.strokeWidth},w.prototype._redrawDataDot=function(){var e,t=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var i=this._convertPointToTranslation(this.dataPoints[e].point),o=this._convertTranslationToScreen(i);this.dataPoints[e].trans=i,this.dataPoints[e].screen=o;var n=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?n.length():-n.z}this.dataPoints.sort(function(e,t){return t.dist-e.dist});var s=this.frame.clientWidth*this.dotSizeRatio;for(e=0;e<this.dataPoints.length;e++){var r,a,h,l,d,c=this.dataPoints[e];if(this.style===w.STYLE.DOTLINE){var u=this._convert3Dto2D(c.bottom);t.lineWidth=1,t.strokeStyle=this.gridColor,t.beginPath(),t.moveTo(u.x,u.y),t.lineTo(c.screen.x,c.screen.y),t.stroke()}r=this.style===w.STYLE.DOTSIZE?s/2+2*s*(c.point.value-this.valueMin)/(this.valueMax-this.valueMin):s,(a=this.showPerspective?r/-c.trans.z:r*-(this.eye.z/this.camera.getArmLength()))<0&&(a=0),d=this.style===w.STYLE.DOTCOLOR?(h=240*(1-(c.point.value-this.valueMin)*this.scale.value),l=this._hsv2rgb(h,1,1),this._hsv2rgb(h,1,.8)):this.style===w.STYLE.DOTSIZE?(l=this.dataColor.fill,this.dataColor.stroke):(h=240*(1-(c.point.z-this.zMin)*this.scale.z/this.verticalRatio),l=this._hsv2rgb(h,1,1),this._hsv2rgb(h,1,.8)),t.lineWidth=this._getStrokeWidth(c),t.strokeStyle=d,t.fillStyle=l,t.beginPath(),t.arc(c.screen.x,c.screen.y,a,0,2*Math.PI,!0),t.fill(),t.stroke()}}},w.prototype._redrawDataBar=function(){var e,t,i,o,n=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var s=this._convertPointToTranslation(this.dataPoints[e].point),r=this._convertTranslationToScreen(s);this.dataPoints[e].trans=s,this.dataPoints[e].screen=r;var a=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?a.length():-a.z}this.dataPoints.sort(function(e,t){return t.dist-e.dist}),n.lineJoin="round",n.lineCap="round";var h=this.xBarWidth/2,l=this.yBarWidth/2;for(e=0;e<this.dataPoints.length;e++){var d,c,u,p=this.dataPoints[e];u=this.style===w.STYLE.BARCOLOR?(d=240*(1-(p.point.value-this.valueMin)*this.scale.value),c=this._hsv2rgb(d,1,1),this._hsv2rgb(d,1,.8)):this.style===w.STYLE.BARSIZE?(c=this.dataColor.fill,this.dataColor.stroke):(d=240*(1-(p.point.z-this.zMin)*this.scale.z/this.verticalRatio),c=this._hsv2rgb(d,1,1),this._hsv2rgb(d,1,.8)),this.style===w.STYLE.BARSIZE&&(h=this.xBarWidth/2*((p.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),l=this.yBarWidth/2*((p.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var f=this,m=p.point,g=[{point:new _(m.x-h,m.y-l,m.z)},{point:new _(m.x+h,m.y-l,m.z)},{point:new _(m.x+h,m.y+l,m.z)},{point:new _(m.x-h,m.y+l,m.z)}],v=[{point:new _(m.x-h,m.y-l,this.zMin)},{point:new _(m.x+h,m.y-l,this.zMin)},{point:new _(m.x+h,m.y+l,this.zMin)},{point:new _(m.x-h,m.y+l,this.zMin)}];g.forEach(function(e){e.screen=f._convert3Dto2D(e.point)}),v.forEach(function(e){e.screen=f._convert3Dto2D(e.point)});var y=[{corners:g,center:_.avg(v[0].point,v[2].point)},{corners:[g[0],g[1],v[1],v[0]],center:_.avg(v[1].point,v[0].point)},{corners:[g[1],g[2],v[2],v[1]],center:_.avg(v[2].point,v[1].point)},{corners:[g[2],g[3],v[3],v[2]],center:_.avg(v[3].point,v[2].point)},{corners:[g[3],g[0],v[0],v[3]],center:_.avg(v[0].point,v[3].point)}];for(p.surfaces=y,t=0;t<y.length;t++){i=y[t];var b=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?b.length():-b.z}for(y.sort(function(e,t){var i=t.dist-e.dist;return i||(e.corners===g?1:t.corners===g?-1:0)}),n.lineWidth=this._getStrokeWidth(p),n.strokeStyle=u,n.fillStyle=c,t=2;t<y.length;t++)o=(i=y[t]).corners,n.beginPath(),n.moveTo(o[3].screen.x,o[3].screen.y),n.lineTo(o[0].screen.x,o[0].screen.y),n.lineTo(o[1].screen.x,o[1].screen.y),n.lineTo(o[2].screen.x,o[2].screen.y),n.lineTo(o[3].screen.x,o[3].screen.y),n.fill(),n.stroke()}}},w.prototype._redrawDataLine=function(){var e,t,i=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var o=this._convertPointToTranslation(this.dataPoints[t].point),n=this._convertTranslationToScreen(o);this.dataPoints[t].trans=o,this.dataPoints[t].screen=n}if(0<this.dataPoints.length){for(e=this.dataPoints[0],i.lineWidth=this._getStrokeWidth(e),i.lineJoin="round",i.lineCap="round",i.strokeStyle=this.dataColor.stroke,i.beginPath(),i.moveTo(e.screen.x,e.screen.y),t=1;t<this.dataPoints.length;t++)e=this.dataPoints[t],i.lineTo(e.screen.x,e.screen.y);i.stroke()}}},w.prototype._onMouseDown=function(e){if(e=e||window.event,this.leftButtonDown&&this._onMouseUp(e),this.leftButtonDown=e.which?1===e.which:1===e.button,this.leftButtonDown||this.touchDown){this.startMouseX=a(e),this.startMouseY=h(e),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},l.addEventListener(document,"mousemove",t.onmousemove),l.addEventListener(document,"mouseup",t.onmouseup),l.preventDefault(e)}},w.prototype._onMouseMove=function(e){e=e||window.event;var t=parseFloat(a(e))-this.startMouseX,i=parseFloat(h(e))-this.startMouseY,o=this.startArmRotation.horizontal+t/200,n=this.startArmRotation.vertical+i/200,s=Math.sin(4/360*2*Math.PI);Math.abs(Math.sin(o))<s&&(o=Math.round(o/Math.PI)*Math.PI-.001),Math.abs(Math.cos(o))<s&&(o=(Math.round(o/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(n))<s&&(n=Math.round(n/Math.PI)*Math.PI),Math.abs(Math.cos(n))<s&&(n=(Math.round(n/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(o,n),this.redraw();var r=this.getCameraPosition();this.emit("cameraPositionChange",r),l.preventDefault(e)},w.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",this.leftButtonDown=!1,l.removeEventListener(document,"mousemove",this.onmousemove),l.removeEventListener(document,"mouseup",this.onmouseup),l.preventDefault(e)},w.prototype._onTooltip=function(e){var t=this.frame.getBoundingClientRect(),i=a(e)-t.left,o=h(e)-t.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var n=this._dataPointFromXY(i,o);n!==this.tooltip.dataPoint&&(n?this._showTooltip(n):this._hideTooltip())}else{var s=this;this.tooltipTimeout=setTimeout(function(){s.tooltipTimeout=null;var e=s._dataPointFromXY(i,o);e&&s._showTooltip(e)},300)}}},w.prototype._onTouchStart=function(e){this.touchDown=!0;var t=this;this.ontouchmove=function(e){t._onTouchMove(e)},this.ontouchend=function(e){t._onTouchEnd(e)},l.addEventListener(document,"touchmove",t.ontouchmove),l.addEventListener(document,"touchend",t.ontouchend),this._onMouseDown(e)},w.prototype._onTouchMove=function(e){this._onMouseMove(e)},w.prototype._onTouchEnd=function(e){this.touchDown=!1,l.removeEventListener(document,"touchmove",this.ontouchmove),l.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(e)},w.prototype._onWheel=function(e){var t=0;if((e=e||window.event).wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this.camera.getArmLength()*(1-t/10);this.camera.setArmLength(i),this.redraw(),this._hideTooltip()}var o=this.getCameraPosition();this.emit("cameraPositionChange",o),l.preventDefault(e)},w.prototype._insideTriangle=function(e,t){function i(e){return 0<e?1:e<0?-1:0}var o=t[0],n=t[1],s=t[2],r=i((n.x-o.x)*(e.y-o.y)-(n.y-o.y)*(e.x-o.x)),a=i((s.x-n.x)*(e.y-n.y)-(s.y-n.y)*(e.x-n.x)),h=i((o.x-s.x)*(e.y-s.y)-(o.y-s.y)*(e.x-s.x));return!(0!=r&&0!=a&&r!=a||0!=a&&0!=h&&a!=h||0!=r&&0!=h&&r!=h)},w.prototype._dataPointFromXY=function(e,t){var i,o=null,n=null,s=null,r=new g(e,t);if(this.style===w.STYLE.BAR||this.style===w.STYLE.BARCOLOR||this.style===w.STYLE.BARSIZE)for(i=this.dataPoints.length-1;0<=i;i--){var a=(o=this.dataPoints[i]).surfaces;if(a)for(var h=a.length-1;0<=h;h--){var l=a[h].corners,d=[l[0].screen,l[1].screen,l[2].screen],c=[l[2].screen,l[3].screen,l[0].screen];if(this._insideTriangle(r,d)||this._insideTriangle(r,c))return o}}else for(i=0;i<this.dataPoints.length;i++){var u=(o=this.dataPoints[i]).screen;if(u){var p=Math.abs(e-u.x),f=Math.abs(t-u.y),m=Math.sqrt(p*p+f*f);(null===s||m<s)&&m<100&&(s=m,n=o)}}return n},w.prototype._showTooltip=function(e){var t,i,o;this.tooltip?(t=this.tooltip.dom.content,i=this.tooltip.dom.line,o=this.tooltip.dom.dot):((t=document.createElement("div")).style.position="absolute",t.style.padding="10px",t.style.border="1px solid #4d4d4d",t.style.color="#1a1a1a",t.style.background="rgba(255,255,255,0.7)",t.style.borderRadius="2px",t.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",(i=document.createElement("div")).style.position="absolute",i.style.height="40px",i.style.width="0",i.style.borderLeft="1px solid #4d4d4d",(o=document.createElement("div")).style.position="absolute",o.style.height="0",o.style.width="0",o.style.border="5px solid #4d4d4d",o.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:t,line:i,dot:o}}),this._hideTooltip(),this.tooltip.dataPoint=e,"function"==typeof this.showTooltip?t.innerHTML=this.showTooltip(e.point):t.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+e.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+e.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+e.point.z+"</td></tr></table>",t.style.left="0",t.style.top="0",this.frame.appendChild(t),this.frame.appendChild(i),this.frame.appendChild(o);var n=t.offsetWidth,s=t.offsetHeight,r=i.offsetHeight,a=o.offsetWidth,h=o.offsetHeight,l=e.screen.x-n/2;l=Math.min(Math.max(l,10),this.frame.clientWidth-10-n),i.style.left=e.screen.x+"px",i.style.top=e.screen.y-r+"px",t.style.left=l+"px",t.style.top=e.screen.y-r-s+"px",o.style.left=e.screen.x-a/2+"px",o.style.top=e.screen.y-h/2+"px"},w.prototype._hideTooltip=function(){if(this.tooltip)for(var e in this.tooltip.dataPoint=null,this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(e)){var t=this.tooltip.dom[e];t&&t.parentNode&&t.parentNode.removeChild(t)}},e.exports=w},function(e,t){function i(e){return e?function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e):void 0}(e.exports=i).prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function i(){o.off(e,i),t.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o,n=0;n<i.length;n++)if((o=i[n])===t||o.fn===t){i.splice(n,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i)for(var o=0,n=(i=i.slice(0)).length;o<n;++o)i[o].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function o(e,t,i){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==i?i:0}o.subtract=function(e,t){var i=new o;return i.x=e.x-t.x,i.y=e.y-t.y,i.z=e.z-t.z,i},o.add=function(e,t){var i=new o;return i.x=e.x+t.x,i.y=e.y+t.y,i.z=e.z+t.z,i},o.avg=function(e,t){return new o((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)},o.crossProduct=function(e,t){var i=new o;return i.x=e.y*t.z-e.z*t.y,i.y=e.z*t.x-e.x*t.z,i.z=e.x*t.y-e.y*t.x,i},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.exports=o},function(e,t){e.exports=function(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0}},function(e,t,i){function o(){this.armLocation=new n,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new n,this.cameraRotation=new n(.5*Math.PI,0,0),this.calculateCameraOrientation()}var n=i(14);o.prototype.setArmLocation=function(e,t,i){this.armLocation.x=e,this.armLocation.y=t,this.armLocation.z=i,this.calculateCameraOrientation()},o.prototype.setArmRotation=function(e,t){void 0!==e&&(this.armRotation.horizontal=e),void 0!==t&&(this.armRotation.vertical=t,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===e&&void 0===t||this.calculateCameraOrientation()},o.prototype.getArmRotation=function(){var e={};return e.horizontal=this.armRotation.horizontal,e.vertical=this.armRotation.vertical,e},o.prototype.setArmLength=function(e){void 0!==e&&(this.armLength=e,this.armLength<.71&&(this.armLength=.71),5<this.armLength&&(this.armLength=5),this.calculateCameraOrientation())},o.prototype.getArmLength=function(){return this.armLength},o.prototype.getCameraLocation=function(){return this.cameraLocation},o.prototype.getCameraRotation=function(){return this.cameraRotation},o.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},e.exports=o},function(e,t,i){function o(e,t,i){this.data=e,this.column=t,this.graph=i,this.index=void 0,this.value=void 0,this.values=i.getDistinctValues(e.get(),this.column),this.values.sort(function(e,t){return t<e?1:e<t?-1:0}),0<this.values.length&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var n=i(11);o.prototype.isLoaded=function(){return this.loaded},o.prototype.getLoadedProgress=function(){for(var e=this.values.length,t=0;this.dataPoints[t];)t++;return Math.round(t/e*100)},o.prototype.getLabel=function(){return this.graph.filterLabel},o.prototype.getColumn=function(){return this.column},o.prototype.getSelectedValue=function(){return void 0!==this.index?this.values[this.index]:void 0},o.prototype.getValues=function(){return this.values},o.prototype.getValue=function(e){if(e>=this.values.length)throw"Error: index out of range";return this.values[e]},o.prototype._getDataPoints=function(e){if(void 0===e&&(e=this.index),void 0===e)return[];var t;if(this.dataPoints[e])t=this.dataPoints[e];else{var i={};i.column=this.column,i.value=this.values[e];var o=new n(this.data,{filter:function(e){return e[i.column]==i.value}}).get();t=this.graph._getDataPoints(o),this.dataPoints[e]=t}return t},o.prototype.setOnLoadCallback=function(e){this.onLoadCallback=e},o.prototype.selectValue=function(e){if(e>=this.values.length)throw"Error: index out of range";this.index=e,this.value=this.values[e]},o.prototype.loadInBackground=function(e){void 0===e&&(e=0);var t=this.graph.frame;if(e<this.values.length){this._getDataPoints(e),void 0===t.progress&&(t.progress=document.createElement("DIV"),t.progress.style.position="absolute",t.progress.style.color="gray",t.appendChild(t.progress));var i=this.getLoadedProgress();t.progress.innerHTML="Loading animation... "+i+"%",t.progress.style.bottom="60px",t.progress.style.left="10px";var o=this;setTimeout(function(){o.loadInBackground(e+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==t.progress&&(t.removeChild(t.progress),t.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},e.exports=o},function(e,t,i){function o(e,t){if(void 0===e)throw"Error: No container element defined";if(this.container=e,this.visible=!t||null==t.visible||t.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(e){i._onMouseDown(e)},this.frame.prev.onclick=function(e){i.prev(e)},this.frame.play.onclick=function(e){i.togglePlay(e)},this.frame.next.onclick=function(e){i.next(e)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var n=i(1);o.prototype.prev=function(){var e=this.getIndex();0<e&&(e--,this.setIndex(e))},o.prototype.next=function(){var e=this.getIndex();e<this.values.length-1&&(e++,this.setIndex(e))},o.prototype.playNext=function(){var e=new Date,t=this.getIndex();t<this.values.length-1?(t++,this.setIndex(t)):this.playLoop&&(t=0,this.setIndex(t));var i=new Date-e,o=Math.max(this.playInterval-i,0),n=this;this.playTimeout=setTimeout(function(){n.playNext()},o)},o.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},o.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},o.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},o.prototype.setOnChangeCallback=function(e){this.onChangeCallback=e},o.prototype.setPlayInterval=function(e){this.playInterval=e},o.prototype.getPlayInterval=function(e){return this.playInterval},o.prototype.setPlayLoop=function(e){this.playLoop=e},o.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},o.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var e=this.indexToLeft(this.index);this.frame.slide.style.left=e+"px"}},o.prototype.setValues=function(e){this.values=e,0<this.values.length?this.setIndex(0):this.index=void 0},o.prototype.setIndex=function(e){if(!(e<this.values.length))throw"Error: index out of range";this.index=e,this.redraw(),this.onChange()},o.prototype.getIndex=function(){return this.index},o.prototype.get=function(){return this.values[this.index]},o.prototype._onMouseDown=function(e){if(e.which?1===e.which:1===e.button){this.startClientX=e.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},n.addEventListener(document,"mousemove",this.onmousemove),n.addEventListener(document,"mouseup",this.onmouseup),n.preventDefault(e)}},o.prototype.leftToIndex=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=e-3,o=Math.round(i/t*(this.values.length-1));return o<0&&(o=0),o>this.values.length-1&&(o=this.values.length-1),o},o.prototype.indexToLeft=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return 3+e/(this.values.length-1)*t},o.prototype._onMouseMove=function(e){var t=e.clientX-this.startClientX,i=this.startSlideX+t,o=this.leftToIndex(i);this.setIndex(o),n.preventDefault()},o.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",n.removeEventListener(document,"mousemove",this.onmousemove),n.removeEventListener(document,"mouseup",this.onmouseup),n.preventDefault()},e.exports=o},function(e,t){function i(e,t,i,o){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(e,t,i,o)}i.prototype.setRange=function(e,t,i,o){this._start=e||0,this._end=t||0,this.setStep(i,o)},i.prototype.setStep=function(e,t){void 0===e||e<=0||(void 0!==t&&(this.prettyStep=t),!0===this.prettyStep?this._step=i.calculatePrettyStep(e):this._step=e)},i.calculatePrettyStep=function(e){function t(e){return Math.log(e)/Math.LN10}var i=Math.pow(10,Math.round(t(e))),o=2*Math.pow(10,Math.round(t(e/2))),n=5*Math.pow(10,Math.round(t(e/5))),s=i;return Math.abs(o-e)<=Math.abs(s-e)&&(s=o),Math.abs(n-e)<=Math.abs(s-e)&&(s=n),s<=0&&(s=1),s},i.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},i.prototype.getStep=function(){return this._step},i.prototype.start=function(){this._current=this._start-this._start%this._step},i.prototype.next=function(){this._current+=this._step},i.prototype.end=function(){return this._current>this._end},e.exports=i},function(e,t,i){if("undefined"!=typeof window){var o=i(21),n=window.Hammer||i(22);e.exports=o(n,{preventDefault:"mouse"})}else e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(e,t,i){var o,n,s;n=[],void 0===(s="function"==typeof(o=function(){var d=null;return function o(n,e){function t(e){return e.match(/[^ ]+/g)}function s(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var t=!1;e.stopPropagation=function(){t=!0};var i=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof i&&(e.srcEvent.stopPropagation=function(){i(),e.stopPropagation()}),e.firstTarget=d;for(var o=d;o&&!t;){var n=o.hammer;if(n)for(var s,r=0;r<n.length;r++)if(s=n[r]._handlers[e.type])for(var a=0;a<s.length&&!t;a++)s[a](e);o=o.parentNode}}var r=e||{preventDefault:!1};if(n.Manager){var a=n,i=function(e,t){var i=Object.create(r);return t&&a.assign(i,t),o(new a(e,i),i)};return a.assign(i,a),i.Manager=function(e,t){var i=Object.create(r);return t&&a.assign(i,t),o(new a.Manager(e,i),i)},i}var h=Object.create(n),l=n.element;return l.hammer||(l.hammer=[]),l.hammer.push(h),n.on("hammer.input",function(e){r.preventDefault!==!0&&r.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(d=e.target)}),h._handlers={},h.on=function(e,i){return t(e).forEach(function(e){var t=h._handlers[e];t||(h._handlers[e]=t=[],n.on(e,s)),t.push(i)}),h},h.off=function(e,i){return t(e).forEach(function(e){var t=h._handlers[e];t&&(t=i?t.filter(function(e){return e!==i}):[],t.length>0?h._handlers[e]=t:(n.off(e,s),delete h._handlers[e]))}),h},h.emit=function(e,t){d=t.target,n.emit(e,t)},h.destroy=function(){var e=n.element.hammer,t=e.indexOf(h);-1!==t&&e.splice(t,1),e.length||delete n.element.hammer,h._handlers={},n.destroy()},h}})?o.apply(t,n):o)||(e.exports=s)},function(je,He,We){var $e;!function(s,a,c){function h(e,t,i){return setTimeout(r(e,i),t)}function o(e,t,i){return Array.isArray(e)&&(n(e,i[t],i),1)}function n(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==c)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function e(o,e,t){var n="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=s.console&&(s.console.warn||s.console.log);return i&&i.call(s.console,n,t),o.apply(this,arguments)}}function t(e,t,i){var o,n=t.prototype;(o=e.prototype=Object.create(n)).constructor=e,o._super=n,i&&X(o,i)}function r(e,t){return function(){return e.apply(t,arguments)}}function l(e,t){return typeof e==J?e.apply(t&&t[0]||c,t):e}function i(e,t){return e===c?t:e}function d(t,e,i){n(m(e),function(e){t.addEventListener(e,i,!1)})}function u(t,e,i){n(m(e),function(e){t.removeEventListener(e,i,!1)})}function p(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function f(e,t){return-1<e.indexOf(t)}function m(e){return e.trim().split(/\s+/g)}function g(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var o=0;o<e.length;){if(i&&e[o][i]==t||!i&&e[o]===t)return o;o++}return-1}function v(e){return Array.prototype.slice.call(e,0)}function y(e,i,t){for(var o=[],n=[],s=0;s<e.length;){var r=i?e[s][i]:e[s];g(n,r)<0&&o.push(e[s]),n[s]=r,s++}return t&&(o=i?o.sort(function(e,t){return e[i]>t[i]}):o.sort()),o}function b(e,t){for(var i,o,n=t[0].toUpperCase()+t.slice(1),s=0;s<K.length;){if((o=(i=K[s])?i+n:t)in e)return o;s++}return c}function w(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||s}function _(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){l(t.options.enable,[t])&&i.handler(e)},this.init()}function x(e,t,i){var o=i.pointers.length,n=i.changedPointers.length,s=t&de&&o-n==0,r=t&(ce|ue)&&o-n==0;i.isFirst=!!s,i.isFinal=!!r,s&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,o=t.pointers,n=o.length;i.firstInput||(i.firstInput=k(t)),1<n&&!i.firstMultiple?i.firstMultiple=k(t):1===n&&(i.firstMultiple=!1);var s=i.firstInput,r=i.firstMultiple,a=r?r.center:s.center,h=t.center=S(o);t.timeStamp=te(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=D(a,h),t.distance=M(a,h),function(e,t){var i=t.center,o=e.offsetDelta||{},n=e.prevDelta||{},s=e.prevInput||{};t.eventType!==de&&s.eventType!==ce||(n=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},o=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=n.x+(i.x-o.x),t.deltaY=n.y+(i.y-o.y)}(i,t),t.offsetDirection=C(t.deltaX,t.deltaY);var l=O(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=ee(l.x)>ee(l.y)?l.x:l.y,t.scale=r?function(e,t){return M(t[0],t[1],xe)/M(e[0],e[1],xe)}(r.pointers,o):1,t.rotation=r?function(e,t){return D(t[1],t[0],xe)+D(e[1],e[0],xe)}(r.pointers,o):0,t.maxPointers=!i.prevInput||t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers,function(e,t){var i,o,n,s,r=e.lastInterval||t,a=t.timeStamp-r.timeStamp;if(t.eventType!=ue&&(le<a||r.velocity===c)){var h=t.deltaX-r.deltaX,l=t.deltaY-r.deltaY,d=O(a,h,l);o=d.x,n=d.y,i=ee(d.x)>ee(d.y)?d.x:d.y,s=C(h,l),e.lastInterval=t}else i=r.velocity,o=r.velocityX,n=r.velocityY,s=r.direction;t.velocity=i,t.velocityX=o,t.velocityY=n,t.direction=s}(i,t);var d=e.element;p(t.srcEvent.target,d)&&(d=t.srcEvent.target),t.target=d}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function k(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:Q(e.pointers[i].clientX),clientY:Q(e.pointers[i].clientY)},i++;return{timeStamp:te(),pointers:t,center:S(t),deltaX:e.deltaX,deltaY:e.deltaY}}function S(e){var t=e.length;if(1===t)return{x:Q(e[0].clientX),y:Q(e[0].clientY)};for(var i=0,o=0,n=0;n<t;)i+=e[n].clientX,o+=e[n].clientY,n++;return{x:Q(i/t),y:Q(o/t)}}function O(e,t,i){return{x:t/e||0,y:i/e||0}}function C(e,t){return e===t?pe:ee(e)>=ee(t)?e<0?fe:me:t<0?ge:ve}function M(e,t,i){var o=t[(i=i||_e)[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(o*o+n*n)}function D(e,t,i){var o=t[(i=i||_e)[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return 180*Math.atan2(n,o)/Math.PI}function E(){this.evEl=Se,this.evWin=Oe,this.allow=!0,this.pressed=!1,_.apply(this,arguments)}function T(){this.evEl=De,this.evWin=Ee,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function P(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,_.apply(this,arguments)}function I(){this.evTarget=Ie,this.targetIds={},_.apply(this,arguments)}function A(){_.apply(this,arguments);var e=r(this.handler,this);this.touch=new I(this.manager,e),this.mouse=new E(this.manager,e)}function R(e,t){this.manager=e,this.set(t)}function L(e){this.options=X({},this.defaults,e||{}),this.id=ne++,this.manager=null,this.options.enable=i(this.options.enable,!0),this.state=Be,this.simultaneous={},this.requireFail=[]}function N(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function z(e){return e==ve?"down":e==ge?"up":e==fe?"left":e==me?"right":""}function F(e,t){var i=t.manager;return i?i.get(e):e}function B(){L.apply(this,arguments)}function j(){B.apply(this,arguments),this.pX=null,this.pY=null}function H(){B.apply(this,arguments)}function W(){L.apply(this,arguments),this._timer=null,this._input=null}function $(){B.apply(this,arguments)}function U(){B.apply(this,arguments)}function Y(){L.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function G(e,t){return(t=t||{}).recognizers=i(t.recognizers,G.defaults.preset),new V(e,t)}function V(e,t){var i;this.options=X({},G.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=new((i=this).options.inputClass||(re?T:ae?I:se?A:E))(i,x),this.touchAction=new R(this,this.options.touchAction),q(this,!0),n(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function q(e,i){var o=e.element;o.style&&n(e.options.cssProps,function(e,t){o.style[b(o.style,t)]=i?e:""})}var X,K=["","webkit","Moz","MS","ms","o"],Z=a.createElement("div"),J="function",Q=Math.round,ee=Math.abs,te=Date.now;X="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==c&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}:Object.assign;var ie=e(function(e,t,i){for(var o=Object.keys(t),n=0;n<o.length;)(!i||i&&e[o[n]]===c)&&(e[o[n]]=t[o[n]]),n++;return e},"extend","Use `assign`."),oe=e(function(e,t){return ie(e,t,!0)},"merge","Use `assign`."),ne=1,se="ontouchstart"in s,re=b(s,"PointerEvent")!==c,ae=se&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),he="touch",le=25,de=1,ce=4,ue=8,pe=1,fe=2,me=4,ge=8,ve=16,ye=fe|me,be=ge|ve,we=ye|be,_e=["x","y"],xe=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(w(this.element),this.evWin,this.domHandler)}};var ke={mousedown:de,mousemove:2,mouseup:ce},Se="mousedown",Oe="mousemove mouseup";t(E,_,{handler:function(e){var t=ke[e.type];t&de&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=ce),this.pressed&&this.allow&&(t&ce&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Ce={pointerdown:de,pointermove:2,pointerup:ce,pointercancel:ue,pointerout:ue},Me={2:he,3:"pen",4:"mouse",5:"kinect"},De="pointerdown",Ee="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(De="MSPointerDown",Ee="MSPointerMove MSPointerUp MSPointerCancel"),t(T,_,{handler:function(e){var t=this.store,i=!1,o=e.type.toLowerCase().replace("ms",""),n=Ce[o],s=Me[e.pointerType]||e.pointerType,r=s==he,a=g(t,e.pointerId,"pointerId");n&de&&(0===e.button||r)?a<0&&(t.push(e),a=t.length-1):n&(ce|ue)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,n,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),i&&t.splice(a,1))}});var Te={touchstart:de,touchmove:2,touchend:ce,touchcancel:ue};t(P,_,{handler:function(e){var t=Te[e.type];if(t===de&&(this.started=!0),this.started){var i=function(e,t){var i=v(e.touches),o=v(e.changedTouches);return t&(ce|ue)&&(i=y(i.concat(o),"identifier",!0)),[i,o]}.call(this,e,t);t&(ce|ue)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}}});var Pe={touchstart:de,touchmove:2,touchend:ce,touchcancel:ue},Ie="touchstart touchmove touchend touchcancel";t(I,_,{handler:function(e){var t=Pe[e.type],i=function(e,t){var i=v(e.touches),o=this.targetIds;if(t&(2|de)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var n,s,r=v(e.changedTouches),a=[],h=this.target;if(s=i.filter(function(e){return p(e.target,h)}),t===de)for(n=0;n<s.length;)o[s[n].identifier]=!0,n++;for(n=0;n<r.length;)o[r[n].identifier]&&a.push(r[n]),t&(ce|ue)&&delete o[r[n].identifier],n++;return a.length?[y(s.concat(a),"identifier",!0),a]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}}),t(A,_,{handler:function(e,t,i){var o=i.pointerType==he,n="mouse"==i.pointerType;if(o)this.mouse.allow=!1;else if(n&&!this.mouse.allow)return;t&(ce|ue)&&(this.mouse.allow=!0),this.callback(e,t,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ae=b(Z.style,"touchAction"),Re=Ae!==c,Le="manipulation",Ne="none",ze="pan-x",Fe="pan-y";R.prototype={set:function(e){"compute"==e&&(e=this.compute()),Re&&this.manager.element.style&&(this.manager.element.style[Ae]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return n(this.manager.recognizers,function(e){l(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(f(e,Ne))return Ne;var t=f(e,ze),i=f(e,Fe);return t&&i?Ne:t||i?t?ze:Fe:f(e,Le)?Le:"auto"}(t.join(" "))},preventDefaults:function(e){if(!Re){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var o=this.actions,n=f(o,Ne),s=f(o,Fe),r=f(o,ze);if(n){var a=1===e.pointers.length,h=e.distance<2,l=e.deltaTime<250;if(a&&h&&l)return}if(!r||!s)return n||s&&i&ye||r&&i&be?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Be=1;L.prototype={defaults:{},set:function(e){return X(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=F(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)||(e=F(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return-1===g(t,e=F(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=F(e,this);var t=g(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,o=this.state;o<8&&e(i.options.event+N(o)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),8<=o&&e(i.options.event+N(o))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Be)))return!1;e++}return!0},recognize:function(e){var t=X({},e);return l(this.options.enable,[this,t])?(56&this.state&&(this.state=Be),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},t(B,L,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,o=6&t,n=this.attrTest(e);return o&&(i&ue||!n)?16|t:o||n?i&ce?8|t:2&t?4|t:2:32}}),t(j,B,{defaults:{event:"pan",threshold:10,pointers:1,direction:we},getTouchAction:function(){var e=this.options.direction,t=[];return e&ye&&t.push(Fe),e&be&&t.push(ze),t},directionTest:function(e){var t=this.options,i=!0,o=e.distance,n=e.direction,s=e.deltaX,r=e.deltaY;return n&t.direction||(o=t.direction&ye?(n=0===s?pe:s<0?fe:me,i=s!=this.pX,Math.abs(e.deltaX)):(n=0===r?pe:r<0?ge:ve,i=r!=this.pY,Math.abs(e.deltaY))),e.direction=n,i&&o>t.threshold&&n&t.direction},attrTest:function(e){return B.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=z(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),t(H,B,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),t(W,L,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!o||!i||e.eventType&(ce|ue)&&!n)this.reset();else if(e.eventType&de)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&ce)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&ce?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=te(),this.manager.emit(this.options.event,this._input)))}}),t($,B,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ne]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),t(U,B,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ye|be,pointers:1},getTouchAction:function(){return j.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(ye|be)?t=e.overallVelocity:i&ye?t=e.overallVelocityX:i&be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ee(t)>this.options.velocity&&e.eventType&ce},emit:function(e){var t=z(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),t(Y,L,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Le]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime<t.time;if(this.reset(),e.eventType&de&&0===this.count)return this.failTimeout();if(o&&n&&i){if(e.eventType!=ce)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||M(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,r&&s?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),G.VERSION="2.0.6",G.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[$,{enable:!1}],[H,{enable:!1},["rotate"]],[U,{direction:ye}],[j,{direction:ye},["swipe"]],[Y],[Y,{event:"doubletap",taps:2},["tap"]],[W]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};V.prototype={set:function(e){return X(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,o=this.recognizers,n=t.curRecognizer;(!n||n&&8&n.state)&&(n=t.curRecognizer=null);for(var s=0;s<o.length;)i=o[s],2===t.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(e),!n&&14&i.state&&(n=t.curRecognizer=i),s++}},get:function(e){if(e instanceof L)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=g(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){var i=this.handlers;return n(m(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this},off:function(e,t){var i=this.handlers;return n(m(e),function(e){t?i[e]&&i[e].splice(g(i[e],t),1):delete i[e]}),this},emit:function(e,t){var i,o,n;this.options.domEvents&&(i=e,o=t,(n=a.createEvent("Event")).initEvent(i,!0,!0),(n.gesture=o).target.dispatchEvent(n));var s=this.handlers[e]&&this.handlers[e].slice();if(s&&s.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<s.length;)s[r](t),r++}},destroy:function(){this.element&&q(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},X(G,{INPUT_START:de,INPUT_MOVE:2,INPUT_END:ce,INPUT_CANCEL:ue,STATE_POSSIBLE:Be,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:pe,DIRECTION_LEFT:fe,DIRECTION_RIGHT:me,DIRECTION_UP:ge,DIRECTION_DOWN:ve,DIRECTION_HORIZONTAL:ye,DIRECTION_VERTICAL:be,DIRECTION_ALL:we,Manager:V,Input:_,TouchAction:R,TouchInput:I,MouseInput:E,PointerEventInput:T,TouchMouseInput:A,SingleTouchInput:P,Recognizer:L,AttrRecognizer:B,Tap:Y,Pan:j,Swipe:U,Pinch:H,Rotate:$,Press:W,on:d,off:u,each:n,merge:oe,extend:ie,assign:X,inherit:t,bindFn:r,prefixed:b}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=G,($e=function(){return G}.call(He,We,He,je))===c||(je.exports=$e)}(window,document)},function(e,t,i){var o,n,s;n=[],void 0===(s="function"==typeof(o=function(){function e(e){var t,n=e&&e.preventDefault||!1,i=e&&e.container||window,o={},r={keydown:{},keyup:{}},a={};for(t=97;122>=t;t++)a[String.fromCharCode(t)]={code:65+(t-97),shift:!1};for(t=65;90>=t;t++)a[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;9>=t;t++)a[""+t]={code:48+t,shift:!1};for(t=1;12>=t;t++)a["F"+t]={code:111+t,shift:!1};for(t=0;9>=t;t++)a["num"+t]={code:96+t,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a["delete"]={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(e){l(e,"keydown")},h=function(e){l(e,"keyup")},l=function(e,t){if(void 0!==r[t][e.keyCode]){for(var i=r[t][e.keyCode],o=0;o<i.length;o++)void 0===i[o].shift?i[o].fn(e):1==i[o].shift&&1==e.shiftKey?i[o].fn(e):0==i[o].shift&&0==e.shiftKey&&i[o].fn(e);1==n&&e.preventDefault()}};return o.bind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);void 0===r[i][a[e].code]&&(r[i][a[e].code]=[]),r[i][a[e].code].push({fn:t,shift:a[e].shift})},o.bindAll=function(e,t){void 0===t&&(t="keydown");for(var i in a)a.hasOwnProperty(i)&&o.bind(i,e,t)},o.getKey=function(e){for(var t in a)if(a.hasOwnProperty(t)){if(1==e.shiftKey&&1==a[t].shift&&e.keyCode==a[t].code)return t;if(0==e.shiftKey&&0==a[t].shift&&e.keyCode==a[t].code)return t;if(e.keyCode==a[t].code&&"shift"==t)return t}return"unknown key, currently not supported"},o.unbind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);if(void 0!==t){var o=[],n=r[i][a[e].code];if(void 0!==n)for(var s=0;s<n.length;s++)n[s].fn==t&&n[s].shift==a[e].shift||o.push(r[i][a[e].code][s]);r[i][a[e].code]=o}else r[i][a[e].code]=[]},o.reset=function(){r={keydown:{},keyup:{}}},o.destroy=function(){r={keydown:{},keyup:{}},i.removeEventListener("keydown",s,!0),i.removeEventListener("keyup",h,!0)},i.addEventListener("keydown",s,!0),i.addEventListener("keyup",h,!0),o}return e})?o.apply(t,n):o)||(e.exports=s)},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Timeline=i(25),t.Graph2d=i(50),t.timeline={Core:i(33),DateUtil:i(32),Range:i(30),stack:i(37),TimeStep:i(35),components:{items:{Item:i(39),BackgroundItem:i(43),BoxItem:i(41),PointItem:i(42),RangeItem:i(38)},BackgroundGroup:i(40),Component:i(31),CurrentTime:i(48),CustomTime:i(46),DataAxis:i(52),DataScale:i(53),GraphGroup:i(54),Group:i(36),ItemSet:i(34),Legend:i(58),LineGraph:i(51),TimeAxis:i(44)}},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof h||i instanceof l)&&i instanceof Object){var n=o;o=i,i=n}var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},rtl:!1,moment:a,width:null,height:null,maxHeight:null,minHeight:null},this.options=m.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return s.timeAxis.step.scale},getStep:function(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new d(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new u(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new p(this.body),this.components.push(this.currentTime),this.itemSet=new f(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){s.emit("click",s.getEventProperties(e))}),this.on("doubletap",function(e){s.emit("doubleClick",s.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){s.emit("contextmenu",s.getEventProperties(e))},this.fitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!s.fitDone)if(s.fitDone=!0,null!=s.options.start||null!=s.options.end){if(null==s.options.start||null==s.options.end)var e=s.getItemRange();var t=null!=s.options.start?s.options.start:e.min,i=null!=s.options.end?s.options.end:e.max;s.setWindow(t,i,{animation:!1})}else s.fit({animation:!1})}),o&&this.setOptions(o),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var n=o(i(26)),s=o(i(29)),a=(i(13),i(20),i(2)),m=i(1),h=i(9),l=i(11),d=i(30),c=i(33),u=i(44),p=i(48),g=i(46),f=i(34),v=i(29).printStyle,y=i(49).allOptions,b=i(49).configureOptions;(r.prototype=new c)._createConfigurator=function(){return new n.default(this,this.dom.container,b)},r.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},r.prototype.setOptions=function(e){if(!0===s.default.validate(e,y)&&console.log("%cErrors have been found in the supplied options object.",v),c.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;var t=this.itemsData;if(t){var i=this.getSelection();this.setItems(null),this.setItems(t),this.setSelection(i)}}},r.prototype.setItems=function(e){var t;t=e?e instanceof h||e instanceof l?e:new h(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.itemSet&&this.itemSet.setItems(t)},r.prototype.setGroups=function(e){var t;t=e?e instanceof h||e instanceof l?e:new h(e):null,this.groupsData=t,this.itemSet.setGroups(t)},r.prototype.setData=function(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)},r.prototype.setSelection=function(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)},r.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},r.prototype.focus=function(e,t){if(this.itemsData&&null!=e){var i=Array.isArray(e)?e:[e],o=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),n=null,s=null;if(o.forEach(function(e){var t=e.start.valueOf(),i="end"in e?e.end.valueOf():e.start.valueOf();(null===n||t<n)&&(n=t),(null===s||s<i)&&(s=i)}),null!==n&&null!==s){var r=(n+s)/2,a=Math.max(this.range.end-this.range.start,1.1*(s-n)),h=!t||void 0===t.animation||t.animation;this.range.setRange(r-a/2,r+a/2,h)}}},r.prototype.fit=function(e){var t,i=!e||void 0===e.animation||e.animation,o=this.itemsData&&this.itemsData.getDataSet();1===o.length&&void 0===o.get()[0].end?(t=this.getDataRange(),this.moveTo(t.min.valueOf(),{animation:i})):(t=this.getItemRange(),this.range.setRange(t.min,t.max,i))},r.prototype.getItemRange=function(){var e,s,t,i,o,n=this,r=this.getDataRange(),a=null!==r.min?r.min.valueOf():null,h=null!==r.max?r.max.valueOf():null,l=null,d=null;null!=a&&null!=h&&((e=h-a)<=0&&(e=10),s=e/n.props.center.width,m.forEach(n.itemSet.items,function(e){e.show(),e.repositionX();var t=c(e),i=u(e);if(this.options.rtl)var o=t-(e.getWidthRight()+10)*s,n=i+(e.getWidthLeft()+10)*s;else o=t-(e.getWidthLeft()+10)*s,n=i+(e.getWidthRight()+10)*s;o<a&&(a=o,l=e),h<n&&(h=n,d=e)}.bind(n)),l&&d&&(t=l.getWidthLeft()+10,i=d.getWidthRight()+10,0<(o=n.props.center.width-t-i)&&(h=n.options.rtl?(a=c(l)-i*e/o,u(d)+t*e/o):(a=c(l)-t*e/o,u(d)+i*e/o))));function c(e){return m.convert(e.data.start,"Date").valueOf()}function u(e){var t=null!=e.data.end?e.data.end:e.data.start;return m.convert(t,"Date").valueOf()}return{min:null!=a?new Date(a):null,max:null!=h?new Date(h):null}},r.prototype.getDataRange=function(){var o=null,n=null,e=this.itemsData&&this.itemsData.getDataSet();return e&&e.forEach(function(e){var t=m.convert(e.start,"Date").valueOf(),i=m.convert(null!=e.end?e.end:e.start,"Date").valueOf();(null===o||t<o)&&(o=t),(null===n||n<i)&&(n=i)}),{min:null!=o?new Date(o):null,max:null!=n?new Date(n):null}},r.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY;if(this.options.rtl)var o=m.getAbsoluteRight(this.dom.centerContainer)-t;else o=t-m.getAbsoluteLeft(this.dom.centerContainer);var n=i-m.getAbsoluteTop(this.dom.centerContainer),s=this.itemSet.itemFromTarget(e),r=this.itemSet.groupFromTarget(e),a=g.customTimeFromTarget(e),h=this.itemSet.options.snap||null,l=this.body.util.getScale(),d=this.body.util.getStep(),c=this._toTime(o),u=h?h(c,l,d):c,p=m.getTarget(e),f=null;return null!=s?f="item":null!=a?f="custom-time":m.hasParent(p,this.timeAxis.dom.foreground)||this.timeAxis2&&m.hasParent(p,this.timeAxis2.dom.foreground)?f="axis":m.hasParent(p,this.itemSet.dom.labelSet)?f="group-label":m.hasParent(p,this.currentTime.bar)?f="current-time":m.hasParent(p,this.dom.center)&&(f="background"),{event:e,item:s?s.id:null,group:r?r.groupId:null,what:f,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:n,time:c,snappedTime:u}},e.exports=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e},s=i(27),r=(o=s)&&o.__esModule?o:{default:o},m=i(1),h=(n(l,[{key:"setOptions",value:function(e){if(void 0!==e){this.popupHistory={},this._removePopup();var t=!0;"string"==typeof e?this.options.filter=e:e instanceof Array?this.options.filter=e.join():"object"===(void 0===e?"undefined":a(e))?(void 0!==e.container&&(this.options.container=e.container),void 0!==e.filter&&(this.options.filter=e.filter),void 0!==e.showButton&&(this.options.showButton=e.showButton),void 0!==e.enabled&&(t=e.enabled)):"boolean"==typeof e?(this.options.filter=!0,t=e):"function"==typeof e&&(this.options.filter=e,t=!0),!1===this.options.filter&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var e=this;this._clean(),this.changedOptions=[];var t,i=this.options.filter,o=0,n=!1;for(var s in this.configureOptions)this.configureOptions.hasOwnProperty(s)&&(n=this.allowCreation=!1,"function"==typeof i?n=(n=i(s,[]))||this._handleObject(this.configureOptions[s],[s],!0):!0!==i&&-1===i.indexOf(s)||(n=!0),!1!==n&&(this.allowCreation=!0,0<o&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),o++);!0===this.options.showButton&&((t=document.createElement("div")).className="vis-configuration vis-config-button",t.innerHTML="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},e.optionsContainer=document.createElement("div"),e.optionsContainer.className="vis-configuration vis-config-option-container",e.domElements.push(e.optionsContainer),e.domElements.push(t)),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,i=0;i<e.length;i++){if(void 0===t[e[i]]){t=void 0;break}t=t[e[i]]}return t}},{key:"_makeItem",value:function(e){var i=arguments,o=this;if(!0===this.allowCreation){var n,s,r,t=function(){var t=document.createElement("div");for(t.className="vis-configuration vis-config-item vis-config-s"+e.length,n=i.length,s=Array(1<n?n-1:0),r=1;r<n;r++)s[r-1]=i[r];return s.forEach(function(e){t.appendChild(e)}),o.domElements.push(t),{v:o.domElements.length}}();if("object"===(void 0===t?"undefined":a(t)))return t.v}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=document.createElement("div");return o.className="vis-configuration vis-config-label vis-config-s"+t.length,o.innerHTML=!0===i?"<i><b>"+e+":</b></i>":e+":",o}},{key:"_makeDropdown",value:function(e,t,i){var o=document.createElement("select");o.className="vis-configuration vis-config-select";var n=0;void 0!==t&&-1!==e.indexOf(t)&&(n=e.indexOf(t));for(var s=0;s<e.length;s++){var r=document.createElement("option");r.value=e[s],s===n&&(r.selected="selected"),r.innerHTML=e[s],o.appendChild(r)}var a=this;o.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,o)}},{key:"_makeRange",value:function(e,t,i){var o=e[0],n=e[1],s=e[2],r=e[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=n,a.max=s}catch(e){}a.step=r;var h="",l=0;void 0!==t?(t<0&&1.2*t<n?(a.min=Math.ceil(1.2*t),l=a.min,h="range increased"):t/1.2<n&&(a.min=Math.ceil(t/1.2),l=a.min,h="range increased"),s<1.2*t&&1!==s&&(a.max=Math.ceil(1.2*t),l=a.max,h="range increased"),a.value=t):a.value=o;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=a.value;var c=this;a.onchange=function(){d.value=this.value,c._update(Number(this.value),i)},a.oninput=function(){d.value=this.value};var u=this._makeLabel(i[i.length-1],i),p=this._makeItem(i,u,a,d);""!==h&&this.popupHistory[p]!==l&&(this.popupHistory[p]=l,this._setupPopup(h,p))}},{key:"_setupPopup",value:function(e,t){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var o=document.createElement("div");o.id="vis-configuration-popup",o.className="vis-configuration-popup",o.innerHTML=e,o.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:o,index:t}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(void 0!==this.popupDiv.html){var t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,t,i){var o=document.createElement("input");o.type="checkbox",o.className="vis-configuration vis-config-checkbox",o.checked=e,void 0!==t&&((o.checked=t)===e||"object"===(void 0===e?"undefined":a(e))&&t===e.enabled||this.changedOptions.push({path:i,value:t}));var n=this;o.onchange=function(){n._update(this.checked,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_makeTextInput",value:function(e,t,i){var o=document.createElement("input");o.type="text",o.className="vis-configuration vis-config-text",(o.value=t)!==e&&this.changedOptions.push({path:i,value:t});var n=this;o.onchange=function(){n._update(this.value,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_makeColorField",value:function(e,t,i){var o=this,n=e[1],s=document.createElement("div");"none"!==(t=void 0===t?n:t)?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=void 0===t?n:t,s.onclick=function(){o._showColorPicker(t,s,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,s)}},{key:"_showColorPicker",value:function(e,i,o){var n=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(e){var t="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";i.style.backgroundColor=t,n._update(t,o)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){n._showColorPicker(e,i,o)}})}},{key:"_handleObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=!1,n=this.options.filter,s=!1;for(var r in e)if(e.hasOwnProperty(r)){o=!0;var a=e[r],h=m.copyAndExtendArray(t,r);if("function"==typeof n&&!1===(o=n(r,t))&&!(a instanceof Array)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,o=this._handleObject(a,h,!0),this.allowCreation=!1===i),!1!==o){s=!0;var l=this._getValue(h);if(a instanceof Array)this._handleArray(a,l,h);else if("string"==typeof a)this._makeTextInput(a,l,h);else if("boolean"==typeof a)this._makeCheckbox(a,l,h);else if(a instanceof Object){var d=!0;if(-1!==t.indexOf("physics")&&this.moduleOptions.physics.solver!==r&&(d=!1),!0===d)if(void 0!==a.enabled){var c=m.copyAndExtendArray(h,"enabled"),u=this._getValue(c);if(!0===u){var p=this._makeLabel(r,h,!0);this._makeItem(h,p),s=this._handleObject(a,h)||s}else this._makeCheckbox(a,u,h)}else{var f=this._makeLabel(r,h,!0);this._makeItem(h,f),s=this._handleObject(a,h)||s}}else console.error("dont know how to handle",a,r,h)}}return s}},{key:"_handleArray",value:function(e,t,i){"string"==typeof e[0]&&"color"===e[0]?(this._makeColorField(e,t,i),e[1]!==t&&this.changedOptions.push({path:i,value:t})):"string"==typeof e[0]?(this._makeDropdown(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:t})):"number"==typeof e[0]&&(this._makeRange(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:Number(t)}))}},{key:"_update",value:function(e,t){var i=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=i;e="false"!==(e="true"===e||e)&&e;for(var n=0;n<t.length;n++)"global"!==t[n]&&(void 0===o[t[n]]&&(o[t[n]]={}),n!==t.length-1?o=o[t[n]]:o[t[n]]=e);return i}},{key:"_printOptions",value:function(){var e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),l);function l(e,t,i){var o=arguments.length<=3||void 0===arguments[3]?1:arguments[3];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},m.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new r.default(o),this.wrapper=void 0}function d(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=h},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},n=i(20),s=i(28),g=i(1),r=(o(a,[{key:"insertTo",value:function(e){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=e}},{key:"setCloseCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=e}},{key:"_isColorString",value:function(e){return"string"==typeof e?{black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"}[e]:void 0}},{key:"setColor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];if("none"!==e){var i=void 0,o=this._isColorString(e);if(void 0!==o&&(e=o),!0===g.isString(e)){if(!0===g.isValidRGB(e)){var n=e.substr(4).substr(0,e.length-5).split(",");i={r:n[0],g:n[1],b:n[2],a:1}}else if(!0===g.isValidRGBA(e)){var s=e.substr(5).substr(0,e.length-6).split(",");i={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===g.isValidHex(e)){var r=g.hexToRGB(e);i={r:r.r,g:r.g,b:r.b,a:1}}}else if(e instanceof Object&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b){var a=void 0!==e.a?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:a}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(i,t)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this;!0===(arguments.length<=0||void 0===arguments[0]||arguments[0])&&(this.previousColor=g.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){!0===(arguments.length<=1||void 0===arguments[1]||arguments[1])&&(this.initialColor=g.extend({},e)),this.color=e;var t=g.RGBToHSV(e.r,e.g,e.b),i=2*Math.PI,o=this.r*t.s,n=this.centerCoordinates.x+o*Math.sin(i*t.h),s=this.centerCoordinates.y+o*Math.cos(i*t.h);this.colorPickerSelector.style.left=n-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=g.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;var i=g.HSVToRGB(t.h,t.s,t.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],t=g.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var o=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,o,n),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-t.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var e=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new n(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),s.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,i);var o=void 0,n=void 0,s=void 0,r=void 0;this.centerCoordinates={x:.5*t,y:.5*i},this.r=.49*t;var a=2*Math.PI/360,h=1/this.r,l=void 0;for(s=0;s<360;s++)for(r=0;r<this.r;r++)o=this.centerCoordinates.x+r*Math.sin(a*s),n=this.centerCoordinates.y+r*Math.cos(a*s),l=g.HSVToRGB(s*(1/360),r*h,1),e.fillStyle="rgb("+l.r+","+l.g+","+l.b+")",e.fillRect(o-.5,n-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,i)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-t.left,o=e.center.y-t.top,n=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,r=i-s,a=o-n,h=Math.atan2(r,a),l=.98*Math.min(Math.sqrt(r*r+a*a),s),d=Math.cos(h)*l+n,c=Math.sin(h)*l+s;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var u=h/(2*Math.PI);u=u<0?u+1:u;var p=l/this.r,f=g.RGBToHSV(this.color.r,this.color.g,this.color.b);f.h=u,f.s=p;var m=g.HSVToRGB(f.h,f.s,f.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),a);function a(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){i(20),t.onTouch=function(e,t){t.inputHandler=function(e){e.isFirst&&t(e)},e.on("hammer.input",t.inputHandler)},t.onRelease=function(e,t){return t.inputHandler=function(e){e.isFinal&&t(e)},e.on("hammer.input",t.inputHandler)},t.offTouch=function(e,t){e.off("hammer.input",t.inputHandler)},t.offRelease=t.offTouch,t.disablePreventDefaultVertically=function(e){return e.getTouchAction=function(){return["pan-y"]},e}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e},u=i(1),h=!1,s=void 0,l="background: #FFeeee; color: #dd0000",r=(n(p,null,[{key:"validate",value:function(e,t,i){h=!1;var o=s=t;return void 0!==i&&(o=t[i]),p.parse(e,o,[]),h}},{key:"parse",value:function(e,t,i){for(var o in e)e.hasOwnProperty(o)&&p.check(o,e,t,i)}},{key:"check",value:function(e,t,i,o){void 0===i[e]&&void 0===i.__any__?p.getSuggestion(e,i,o):void 0===i[e]&&void 0!==i.__any__?"object"===p.getType(t[e])&&void 0!==i.__any__.__type__?p.checkFields(e,t,i,"__any__",i.__any__.__type__,o):p.checkFields(e,t,i,"__any__",i.__any__,o):void 0!==i[e].__type__?p.checkFields(e,t,i,e,i[e].__type__,o):p.checkFields(e,t,i,e,i[e],o)}},{key:"checkFields",value:function(e,t,i,o,n,s){var r=p.getType(t[e]),a=n[r];void 0!==a?"array"===p.getType(a)&&-1===a.indexOf(t[e])?(console.log('%cInvalid option detected in "'+e+'". Allowed values are:'+p.print(a)+' not "'+t[e]+'". '+p.printLocation(s,e),l),h=!0):"object"===r&&"__any__"!==o&&(s=u.copyAndExtendArray(s,e),p.parse(t[e],i[o],s)):void 0===n.any&&(console.log('%cInvalid type received for "'+e+'". Expected: '+p.print(Object.keys(n))+". Received ["+r+'] "'+t[e]+'"'+p.printLocation(s,e),l),h=!0)}},{key:"getType",value:function(e){var t=void 0===e?"undefined":o(e);return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":void 0!==e.nodeType?"dom":!0===e._isAMomentObject?"moment":"object":"number"===t?"number":"boolean"===t?"boolean":"string"===t?"string":void 0===t?"undefined":t}},{key:"getSuggestion",value:function(e,t,i){var o=p.findInOptions(e,t,i,!1),n=p.findInOptions(e,s,[],!0);void 0!==o.indexMatch?console.log('%cUnknown option detected: "'+e+'" in '+p.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n',l):n.distance<=4&&o.distance>n.distance?console.log('%cUnknown option detected: "'+e+'" in '+p.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+p.printLocation(n.path,n.closestMatch,""),l):o.distance<=8?console.log('%cUnknown option detected: "'+e+'". Did you mean "'+o.closestMatch+'"?'+p.printLocation(o.path,e),l):console.log('%cUnknown option detected: "'+e+'". Did you mean one of these: '+p.print(Object.keys(t))+p.printLocation(i,e),l),h=!0}},{key:"findInOptions",value:function(e,t,i){var o=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],n=1e9,s="",r=[],a=e.toLowerCase(),h=void 0;for(var l in t){var d=void 0;if(void 0!==t[l].__type__&&!0===o){var c=p.findInOptions(e,t[l],u.copyAndExtendArray(i,l));n>c.distance&&(s=c.closestMatch,r=c.path,n=c.distance,h=c.indexMatch)}else-1!==l.toLowerCase().indexOf(a)&&(h=l),(d=p.levenshteinDistance(e,l))<n&&(s=l,r=u.copyArray(i),n=d)}return{closestMatch:s,path:r,distance:n,indexMatch:h}}},{key:"printLocation",value:function(e,t){for(var i="\n\n"+(arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2])+"options = {\n",o=0;o<e.length;o++){for(var n=0;n<o+1;n++)i+="  ";i+=e[o]+": {\n"}for(var s=0;s<e.length+1;s++)i+="  ";i+=t+"\n";for(var r=0;r<e.length+1;r++){for(var a=0;a<e.length-r;a++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var i,o,n=[];for(i=0;i<=t.length;i++)n[i]=[i];for(o=0;o<=e.length;o++)n[0][o]=o;for(i=1;i<=t.length;i++)for(o=1;o<=e.length;o++)t.charAt(i-1)==e.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n[t.length][e.length]}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p)}function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r,t.printStyle=l},function(e,t,i){function o(e,t){var i=n().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add(-3,"days").valueOf(),this.end=i.clone().add(4,"days").valueOf(),this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:n,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=v.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(t)}function u(e){if("horizontal"!=e&&"vertical"!=e)throw new TypeError('Unknown direction "'+e+'". Choose "horizontal" or "vertical".')}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},v=i(1),n=(i(28),i(2)),r=i(31),y=i(32);(o.prototype=new r).setOptions=function(e){if(e){v.selectiveExtend(["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl"],this.options,e),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}},o.prototype.setRange=function(e,t,i,r){!0!==r&&(r=!1);var a=null!=e?v.convert(e,"Date").valueOf():null,h=null!=t?v.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),i){var l=this,d=this.start,c=this.end,u="object"===(void 0===i?"undefined":s(i))&&"duration"in i?i.duration:500,o="object"===(void 0===i?"undefined":s(i))&&"easingFunction"in i?i.easingFunction:"easeInOutQuad",p=v.easingFunctions[o];if(!p)throw new Error("Unknown easing function "+JSON.stringify(o)+". Choose from: "+Object.keys(v.easingFunctions).join(", "));var f=(new Date).valueOf(),m=!1;return function e(){if(!l.props.touch.dragging){var t=(new Date).valueOf()-f,i=p(t/u),o=u<t,n=o||null===a?a:d+(a-d)*i,s=o||null===h?h:c+(h-c)*i;g=l._applyRange(n,s),y.updateHiddenDates(l.options.moment,l.body,l.options.hiddenDates),m=m||g,g&&l.body.emitter.emit("rangechange",{start:new Date(l.start),end:new Date(l.end),byUser:r}),o?m&&l.body.emitter.emit("rangechanged",{start:new Date(l.start),end:new Date(l.end),byUser:r}):l.animationTimer=setTimeout(e,20)}}()}var g=this._applyRange(a,h);if(y.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),g){var n={start:new Date(this.start),end:new Date(this.end),byUser:r};this.body.emitter.emit("rangechange",n),this.body.emitter.emit("rangechanged",n)}},o.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},o.prototype._applyRange=function(e,t){var i,o=null!=e?v.convert(e,"Date").valueOf():this.start,n=null!=t?v.convert(t,"Date").valueOf():this.end,s=null!=this.options.max?v.convert(this.options.max,"Date").valueOf():null,r=null!=this.options.min?v.convert(this.options.min,"Date").valueOf():null;if(isNaN(o)||null===o)throw new Error('Invalid start "'+e+'"');if(isNaN(n)||null===n)throw new Error('Invalid end "'+t+'"');if(n<o&&(n=o),null!==r&&o<r&&(o+=i=r-o,n+=i,null!=s&&s<n&&(n=s)),null!==s&&s<n&&(o-=i=n-s,n-=i,null!=r&&o<r&&(o=r)),null!==this.options.zoomMin){var a=parseFloat(this.options.zoomMin);a<0&&(a=0),n-o<a&&(this.end-this.start===a&&o>this.start&&n<this.end?(o=this.start,n=this.end):(o-=(i=a-(n-o))/2,n+=i/2))}if(null!==this.options.zoomMax){var h=parseFloat(this.options.zoomMax);h<0&&(h=0),h<n-o&&(this.end-this.start===h&&o<this.start&&n>this.end?(o=this.start,n=this.end):(o+=(i=n-o-h)/2,n-=i/2))}var l=this.start!=o||this.end!=n;return o>=this.start&&o<=this.end||n>=this.start&&n<=this.end||this.start>=o&&this.start<=n||this.end>=o&&this.end<=n||this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=n,l},o.prototype.getRange=function(){return{start:this.start,end:this.end}},o.prototype.conversion=function(e,t){return o.conversion(this.start,this.end,e,t)},o.conversion=function(e,t,i,o){return void 0===o&&(o=0),0!=i&&t-e!=0?{offset:e,scale:i/(t-e-o)}:{offset:0,scale:1}},o.prototype._onDragStart=function(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},o.prototype._onDrag=function(e){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var t=this.options.direction;u(t);var i="horizontal"==t?e.deltaX:e.deltaY;i-=this.deltaDifference;var o=this.props.touch.end-this.props.touch.start;o-=y.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var n="horizontal"==t?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl)var s=i/n*o;else s=-i/n*o;var r=this.props.touch.start+s,a=this.props.touch.end+s,h=y.snapAwayFromHidden(this.body.hiddenDates,r,this.previousDelta-i,!0),l=y.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,!0);if(h!=r||l!=a)return this.deltaDifference+=i,this.props.touch.start=h,this.props.touch.end=l,void this._onDrag(e);this.previousDelta=i,this._applyRange(r,a);var d=new Date(this.start),c=new Date(this.end);this.body.emitter.emit("rangechange",{start:d,end:c,byUser:!0})}},o.prototype._onDragEnd=function(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},o.prototype._onMouseWheel=function(e){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&(!this.options.zoomKey||e[this.options.zoomKey])){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i;i=t<0?1-t/5:1/(1+t/5);var o=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center),n=this._pointerToDate(o);this.zoom(i,n,t)}e.preventDefault()}},o.prototype._onTouch=function(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},o.prototype._onPinch=function(e){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center));var t=1/(e.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),o=y.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=y.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),s=o-n,r=i-n+(this.props.touch.start-(i-n))*t,a=i+s+(this.props.touch.end-(i+s))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;var h=y.snapAwayFromHidden(this.body.hiddenDates,r,1-t,!0),l=y.snapAwayFromHidden(this.body.hiddenDates,a,t-1,!0);h==r&&l==a||(this.props.touch.start=h,this.props.touch.end=l,this.scaleOffset=1-e.scale,r=h,a=l),this.setRange(r,a,!1,!0),this.startToFront=!1,this.endToFront=!0}},o.prototype._isInsideRange=function(e){var t=e.center?e.center.x:e.clientX;if(this.options.rtl)var i=t-v.getAbsoluteLeft(this.body.dom.centerContainer);else i=v.getAbsoluteRight(this.body.dom.centerContainer)-t;var o=this.body.util.toTime(i);return o>=this.start&&o<=this.end},o.prototype._pointerToDate=function(e){var t,i=this.options.direction;if(u(i),"horizontal"==i)return this.body.util.toTime(e.x).valueOf();var o=this.body.domProps.center.height;return t=this.conversion(o),e.y/t.scale+t.offset},o.prototype.getPointer=function(e,t){return this.options.rtl?{x:v.getAbsoluteRight(t)-e.x,y:e.y-v.getAbsoluteTop(t)}:{x:e.x-v.getAbsoluteLeft(t),y:e.y-v.getAbsoluteTop(t)}},o.prototype.zoom=function(e,t,i){null==t&&(t=(this.start+this.end)/2);var o=y.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=y.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,t),s=o-n,r=t-n+(this.start-(t-n))*e,a=t+s+(this.end-(t+s))*e;this.startToFront=!(0<i),this.endToFront=!(0<-i);var h=y.snapAwayFromHidden(this.body.hiddenDates,r,i,!0),l=y.snapAwayFromHidden(this.body.hiddenDates,a,-i,!0);h==r&&l==a||(r=h,a=l),this.setRange(r,a,!1,!0),this.startToFront=!1,this.endToFront=!0},o.prototype.move=function(e){var t=this.end-this.start,i=this.start+t*e,o=this.end+t*e;this.start=i,this.end=o},o.prototype.moveTo=function(e){var t=(this.start+this.end)/2-e,i=this.start-t,o=this.end-t;this.setRange(i,o)},e.exports=o},function(e,t){function i(e,t){this.options=null,this.props=null}i.prototype.setOptions=function(e){e&&util.extend(this.options,e)},i.prototype.redraw=function(){return!1},i.prototype.destroy=function(){},i.prototype._isResized=function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e},e.exports=i},function(e,v){v.convertHiddenOptions=function(e,t,i){if(i&&!Array.isArray(i))return v.convertHiddenOptions(e,t,[i]);if(t.hiddenDates=[],i&&1==Array.isArray(i)){for(var o=0;o<i.length;o++)if(void 0===i[o].repeat){var n={};n.start=e(i[o].start).toDate().valueOf(),n.end=e(i[o].end).toDate().valueOf(),t.hiddenDates.push(n)}t.hiddenDates.sort(function(e,t){return e.start-t.start})}},v.updateHiddenDates=function(e,t,i){if(i&&!Array.isArray(i))return v.updateHiddenDates(e,t,[i]);if(i&&void 0!==t.domProps.centerContainer.width){v.convertHiddenOptions(e,t,i);for(var o=e(t.range.start),n=e(t.range.end),s=(t.range.end-t.range.start)/t.domProps.centerContainer.width,r=0;r<i.length;r++)if(void 0!==i[r].repeat){var a=e(i[r].start),h=e(i[r].end);if("Invalid Date"==a._d)throw new Error("Supplied start date is not valid: "+i[r].start);if("Invalid Date"==h._d)throw new Error("Supplied end date is not valid: "+i[r].end);if(4*s<=h-a){var l=0,d=n.clone();switch(i[r].repeat){case"daily":a.day()!=h.day()&&(l=1),a.dayOfYear(o.dayOfYear()),a.year(o.year()),a.subtract(7,"days"),h.dayOfYear(o.dayOfYear()),h.year(o.year()),h.subtract(7-l,"days"),d.add(1,"weeks");break;case"weekly":var c=h.diff(a,"days"),u=a.day();a.date(o.date()),a.month(o.month()),a.year(o.year()),h=a.clone(),a.day(u),h.day(u),h.add(c,"days"),a.subtract(1,"weeks"),h.subtract(1,"weeks"),d.add(1,"weeks");break;case"monthly":a.month()!=h.month()&&(l=1),a.month(o.month()),a.year(o.year()),a.subtract(1,"months"),h.month(o.month()),h.year(o.year()),h.subtract(1,"months"),h.add(l,"months"),d.add(1,"months");break;case"yearly":a.year()!=h.year()&&(l=1),a.year(o.year()),a.subtract(1,"years"),h.year(o.year()),h.subtract(1,"years"),h.add(l,"years"),d.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",i[r].repeat)}for(;a<d;)switch(t.hiddenDates.push({start:a.valueOf(),end:h.valueOf()}),i[r].repeat){case"daily":a.add(1,"days"),h.add(1,"days");break;case"weekly":a.add(1,"weeks"),h.add(1,"weeks");break;case"monthly":a.add(1,"months"),h.add(1,"months");break;case"yearly":a.add(1,"y"),h.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",i[r].repeat)}t.hiddenDates.push({start:a.valueOf(),end:h.valueOf()})}}v.removeDuplicates(t);var p=v.isHidden(t.range.start,t.hiddenDates),f=v.isHidden(t.range.end,t.hiddenDates),m=t.range.start,g=t.range.end;1==p.hidden&&(m=1==t.range.startToFront?p.startDate-1:p.endDate+1),1==f.hidden&&(g=1==t.range.endToFront?f.startDate-1:f.endDate+1),1!=p.hidden&&1!=f.hidden||t.range._applyRange(m,g)}},v.removeDuplicates=function(e){for(var t=e.hiddenDates,i=[],o=0;o<t.length;o++)for(var n=0;n<t.length;n++)o!=n&&1!=t[n].remove&&1!=t[o].remove&&(t[n].start>=t[o].start&&t[n].end<=t[o].end?t[n].remove=!0:t[n].start>=t[o].start&&t[n].start<=t[o].end?(t[o].end=t[n].end,t[n].remove=!0):t[n].end>=t[o].start&&t[n].end<=t[o].end&&(t[o].start=t[n].start,t[n].remove=!0));for(o=0;o<t.length;o++)!0!==t[o].remove&&i.push(t[o]);e.hiddenDates=i,e.hiddenDates.sort(function(e,t){return e.start-t.start})},v.printDates=function(e){for(var t=0;t<e.length;t++)console.log(t,new Date(e[t].start),new Date(e[t].end),e[t].start,e[t].end,e[t].remove)},v.stepOverHiddenDates=function(e,t,i){for(var o=!1,n=t.current.valueOf(),s=0;s<t.hiddenDates.length;s++){var r=t.hiddenDates[s].start,a=t.hiddenDates[s].end;if(r<=n&&n<a){o=!0;break}}if(1==o&&n<t._end.valueOf()&&n!=i){var h=e(i),l=e(a);h.year()!=l.year()?t.switchedYear=!0:h.month()!=l.month()?t.switchedMonth=!0:h.dayOfYear()!=l.dayOfYear()&&(t.switchedDay=!0),t.current=l}},v.toScreen=function(e,t,i){if(0==e.body.hiddenDates.length){var o=e.range.conversion(i);return(t.valueOf()-o.offset)*o.scale}var n=v.isHidden(t,e.body.hiddenDates);1==n.hidden&&(t=n.startDate);var s=v.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);t=v.correctTimeForHidden(e.options.moment,e.body.hiddenDates,e.range,t);o=e.range.conversion(i,s);return(t.valueOf()-o.offset)*o.scale},v.toTime=function(e,t,i){if(0==e.body.hiddenDates.length){var o=e.range.conversion(i);return new Date(t/o.scale+o.offset)}var n=v.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end),s=(e.range.end-e.range.start-n)*t/i,r=v.getAccumulatedHiddenDuration(e.body.hiddenDates,e.range,s);return new Date(r+s+e.range.start)},v.getHiddenDurationBetween=function(e,t,i){for(var o=0,n=0;n<e.length;n++){var s=e[n].start,r=e[n].end;t<=s&&r<i&&(o+=r-s)}return o},v.correctTimeForHidden=function(e,t,i,o){return(o=e(o).toDate().valueOf())-v.getHiddenDurationBefore(e,t,i,o)},v.getHiddenDurationBefore=function(e,t,i,o){var n=0;o=e(o).toDate().valueOf();for(var s=0;s<t.length;s++){var r=t[s].start,a=t[s].end;r>=i.start&&a<i.end&&a<=o&&(n+=a-r)}return n},v.getAccumulatedHiddenDuration=function(e,t,i){for(var o=0,n=0,s=t.start,r=0;r<e.length;r++){var a=e[r].start,h=e[r].end;if(a>=t.start&&h<t.end){if(n+=a-s,s=h,i<=n)break;o+=h-a}}return o},v.snapAwayFromHidden=function(e,t,i,o){var n=v.isHidden(t,e);return 1==n.hidden?i<0?1==o?n.startDate-(n.endDate-t)-1:n.startDate-1:1==o?n.endDate+(t-n.startDate)+1:n.endDate+1:t},v.isHidden=function(e,t){for(var i=0;i<t.length;i++){var o=t[i].start,n=t[i].end;if(o<=e&&e<n)return{hidden:!0,startDate:o,endDate:n}}return{hidden:!1,startDate:o,endDate:n}}},function(e,t,i){function o(){}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=i(13),f=i(20),r=i(28),m=i(1),a=(i(9),i(11),i(30),i(34),i(44)),h=i(45),g=i(32),l=i(46);n(o.prototype),o.prototype._create=function(e){function t(e){i.isActive()&&i.emit("mousewheel",e)}this.dom={},this.dom.container=e,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){!0===this.initialDrawDone&&this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var i=this;this.on("_change",function(e){e&&1==e.queue?i._redrawTimer||(i._redrawTimer=setTimeout(function(){i._redrawTimer=null,i._redraw()},0)):i._redraw()}),this.hammer=new f(this.dom.root);var o=this.hammer.get("pinch").set({enable:!0});r.disablePreventDefaultVertically(o),this.hammer.get("pan").set({threshold:5,direction:f.DIRECTION_HORIZONTAL}),this.listeners={};if(["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){function e(e){i.isActive()&&i.emit(t,e)}i.hammer.on(t,e),i.listeners[t]=e}),r.onTouch(this.hammer,function(e){i.emit("touch",e)}.bind(this)),r.onRelease(this.hammer,function(e){i.emit("release",e)}.bind(this)),this.dom.root.addEventListener("mousewheel",t),this.dom.root.addEventListener("DOMMouseScroll",t),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root)},o.prototype.setOptions=function(t){if(t){if(m.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","throttleRedraw"],this.options,t),this.options.rtl){var e=this.dom.leftContainer;this.dom.leftContainer=this.dom.rightContainer,this.dom.rightContainer=e,this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.orientation={item:void 0,axis:void 0},"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"===s(t.orientation)&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var i=this.timeAxis2=new a(this.body);i.setOptions=function(e){var t=e?m.extend({},e):{};t.orientation="top",a.prototype.setOptions.call(i,t)},this.components.push(i)}}else if(this.timeAxis2){var o=this.components.indexOf(this.timeAxis2);-1!==o&&this.components.splice(o,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&g.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new h(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in t)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(e){return e.setOptions(t)}),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var n=m.deepExtend({},this.options);this.components.forEach(function(e){m.deepExtend(n,e.options)}),this.configurator.setModuleOptions({global:n})}this._origRedraw?this._redraw():(this._origRedraw=this._redraw.bind(this),this._redraw=m.throttle(this._origRedraw,this.options.throttleRedraw))},o.prototype.isActive=function(){return!this.activator||this.activator.active},o.prototype.destroy=function(){for(var e in this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator),this.listeners)this.listeners.hasOwnProperty(e)&&delete this.listeners[e];this.listeners=null,this.hammer=null,this.components.forEach(function(e){return e.destroy()}),this.body=null},o.prototype.setCustomTime=function(e,t){var i=this.customTimes.filter(function(e){return t===e.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));0<i.length&&i[0].setCustomTime(e)},o.prototype.getCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return e[0].getCustomTime()},o.prototype.setCustomTimeTitle=function(e,t){var i=this.customTimes.filter(function(e){return e.options.id===t});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return 0<i.length?i[0].setCustomTitle(e):void 0},o.prototype.getEventProperties=function(e){return{event:e}},o.prototype.addCustomTime=function(e,t){var i=void 0!==e?m.convert(e,"Date").valueOf():new Date;if(this.customTimes.some(function(e){return e.options.id===t}))throw new Error("A custom time with id "+JSON.stringify(t)+" already exists");var o=new l(this.body,m.extend({},this.options,{time:i,id:t}));return this.customTimes.push(o),this.components.push(o),this._redraw(),t},o.prototype.removeCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));e.forEach(function(e){this.customTimes.splice(this.customTimes.indexOf(e),1),this.components.splice(this.components.indexOf(e),1),e.destroy()}.bind(this))},o.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},o.prototype.fit=function(e){var t=this.getDataRange();if(null!==t.min||null!==t.max){var i=t.max-t.min,o=new Date(t.min.valueOf()-.01*i),n=new Date(t.max.valueOf()+.01*i),s=!e||void 0===e.animation||e.animation;this.range.setRange(o,n,s)}},o.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},o.prototype.setWindow=function(e,t,i){var o;if(1==arguments.length){o=void 0===e.animation||e.animation,this.range.setRange(e.start,e.end,o)}else o=!i||void 0===i.animation||i.animation,this.range.setRange(e,t,o)},o.prototype.moveTo=function(e,t){var i=this.range.end-this.range.start,o=m.convert(e,"Date").valueOf(),n=o-i/2,s=o+i/2,r=!t||void 0===t.animation||t.animation;this.range.setRange(n,s,r)},o.prototype.getWindow=function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}},o.prototype.redraw=function(){this._redraw()},o.prototype._redraw=function(){this.redrawCount++;var t=!1,e=this.options,i=this.props,o=this.dom;if(o&&o.container&&0!=o.root.offsetWidth){g.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==e.orientation?(m.addClassName(o.root,"vis-top"),m.removeClassName(o.root,"vis-bottom")):(m.removeClassName(o.root,"vis-top"),m.addClassName(o.root,"vis-bottom")),o.root.style.maxHeight=m.option.asSize(e.maxHeight,""),o.root.style.minHeight=m.option.asSize(e.minHeight,""),o.root.style.width=m.option.asSize(e.width,""),i.border.left=(o.centerContainer.offsetWidth-o.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(o.centerContainer.offsetHeight-o.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var n=o.root.offsetHeight-o.root.clientHeight,s=o.root.offsetWidth-o.root.clientWidth;0===o.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===o.root.clientHeight&&(s=n),i.center.height=o.center.offsetHeight,i.left.height=o.left.offsetHeight,i.right.height=o.right.offsetHeight,i.top.height=o.top.clientHeight||-i.border.top,i.bottom.height=o.bottom.clientHeight||-i.border.bottom;var r=Math.max(i.left.height,i.center.height,i.right.height),a=i.top.height+r+i.bottom.height+n+i.border.top+i.border.bottom;o.root.style.height=m.option.asSize(e.height,a+"px"),i.root.height=o.root.offsetHeight,i.background.height=i.root.height-n;var h=i.root.height-i.top.height-i.bottom.height-n;i.centerContainer.height=h,i.leftContainer.height=h,i.rightContainer.height=i.leftContainer.height,i.root.width=o.root.offsetWidth,i.background.width=i.root.width-s,i.left.width=o.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=o.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var l=i.root.width-i.left.width-i.right.width-s;i.center.width=l,i.centerContainer.width=l,i.top.width=l,i.bottom.width=l,o.background.style.height=i.background.height+"px",o.backgroundVertical.style.height=i.background.height+"px",o.backgroundHorizontal.style.height=i.centerContainer.height+"px",o.centerContainer.style.height=i.centerContainer.height+"px",o.leftContainer.style.height=i.leftContainer.height+"px",o.rightContainer.style.height=i.rightContainer.height+"px",o.background.style.width=i.background.width+"px",o.backgroundVertical.style.width=i.centerContainer.width+"px",o.backgroundHorizontal.style.width=i.background.width+"px",o.centerContainer.style.width=i.center.width+"px",o.top.style.width=i.top.width+"px",o.bottom.style.width=i.bottom.width+"px",o.background.style.left="0",o.background.style.top="0",o.backgroundVertical.style.left=i.left.width+i.border.left+"px",o.backgroundVertical.style.top="0",o.backgroundHorizontal.style.left="0",o.backgroundHorizontal.style.top=i.top.height+"px",o.centerContainer.style.left=i.left.width+"px",o.centerContainer.style.top=i.top.height+"px",o.leftContainer.style.left="0",o.leftContainer.style.top=i.top.height+"px",o.rightContainer.style.left=i.left.width+i.center.width+"px",o.rightContainer.style.top=i.top.height+"px",o.top.style.left=i.left.width+"px",o.top.style.top="0",o.bottom.style.left=i.left.width+"px",o.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var d=this.props.scrollTop;"top"!=e.orientation.item&&(d+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),o.center.style.left="0",o.center.style.top=d+"px",o.left.style.left="0",o.left.style.top=d+"px",o.right.style.left="0",o.right.style.top=d+"px";var c=0==this.props.scrollTop?"hidden":"",u=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";o.shadowTop.style.visibility=c,o.shadowBottom.style.visibility=u,o.shadowTopLeft.style.visibility=c,o.shadowBottomLeft.style.visibility=u,o.shadowTopRight.style.visibility=c,o.shadowBottomRight.style.visibility=u;var p=this.props.center.height>this.props.centerContainer.height;this.hammer.get("pan").set({direction:p?f.DIRECTION_ALL:f.DIRECTION_HORIZONTAL}),this.components.forEach(function(e){t=e.redraw()||t});if(t){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.initialDrawDone=!0,this.body.emitter.emit("changed")}},o.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},o.prototype.setCurrentTime=function(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)},o.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},o.prototype._toTime=function(e){return g.toTime(this,e,this.props.center.width)},o.prototype._toGlobalTime=function(e){return g.toTime(this,e,this.props.root.width)},o.prototype._toScreen=function(e){return g.toScreen(this,e,this.props.center.width)},o.prototype._toGlobalScreen=function(e){return g.toScreen(this,e,this.props.root.width)},o.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},o.prototype._startAutoResize=function(){var e=this;this._stopAutoResize(),this._onResize=function(){return 1!=e.options.autoResize?void e._stopAutoResize():void(e.dom.root&&(e.dom.root.offsetWidth==e.props.lastWidth&&e.dom.root.offsetHeight==e.props.lastHeight||(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight,e.body.emitter.emit("_change"))))},m.addEventListener(window,"resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},o.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(m.removeEventListener(window,"resize",this._onResize),this._onResize=null)},o.prototype._onTouch=function(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},o.prototype._onPinch=function(e){this.touch.allowDragging=!1},o.prototype._onDrag=function(e){if(this.touch.allowDragging){var t=e.deltaY,i=this._getScrollTop();this._setScrollTop(this.touch.initialScrollTop+t)!=i&&this.emit("verticalDrag")}},o.prototype._setScrollTop=function(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop},o.prototype._updateScrollTop=function(){var e=Math.min(this.props.centerContainer.height-this.props.center.height,0);return e!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),0<this.props.scrollTop&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.props.scrollTop},o.prototype._getScrollTop=function(){return this.props.scrollTop},o.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},e.exports=o},function(e,t,i){function c(e,t){this.body=e,this.defaultOptions={rtl:!1,type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(e,t,i){var o=t.order;t.order=e.order,e.order=o},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:n.snap,onAdd:function(e,t){t(e)},onUpdate:function(e,t){t(e)},onMove:function(e,t){t(e)},onRemove:function(e,t){t(e)},onMoving:function(e,t){t(e)},onAddGroup:function(e,t){t(e)},onMoveGroup:function(e,t){t(e)},onRemoveGroup:function(e,t){t(e)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=w.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;var o=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,i){o._onAdd(t.items)},update:function(e,t,i){o._onUpdate(t.items)},remove:function(e,t,i){o._onRemove(t.items)}},this.groupListeners={add:function(e,t,i){o._onAddGroups(t.items)},update:function(e,t,i){o._onUpdateGroups(t.items)},remove:function(e,t,i){o._onRemoveGroups(t.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=i(20),w=i(1),s=i(9),a=i(11),n=i(35),h=i(31),l=i(36),d=i(40),u=i(41),p=i(42),f=i(38),m=i(43),g="__ungrouped__",v="__background__";c.prototype=new h,c.types={background:m,box:u,range:f,point:p},c.prototype._create=function(){var e=document.createElement("div");e.className="vis-itemset",(e["timeline-itemset"]=this).dom.frame=e;var t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;var i=document.createElement("div");i.className="vis-foreground",e.appendChild(i),this.dom.foreground=i;var o=document.createElement("div");o.className="vis-axis",this.dom.axis=o;var n=document.createElement("div");n.className="vis-labelset",this.dom.labelSet=n,this._updateUngrouped();var s=new d(v,null,this);s.show(),this.groups[v]=s,this.hammer=new r(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(e){e.isFirst&&this._onTouch(e)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:r.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new r(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:r.DIRECTION_HORIZONTAL}),this.show()},c.prototype.setOptions=function(i){if(i){w.selectiveExtend(["type","rtl","align","order","stack","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"],this.options,i),"orientation"in i&&("string"==typeof i.orientation?this.options.orientation.item="top"===i.orientation?"top":"bottom":"object"===o(i.orientation)&&"item"in i.orientation&&(this.options.orientation.item=i.orientation.item)),"margin"in i&&("number"==typeof i.margin?(this.options.margin.axis=i.margin,this.options.margin.item.horizontal=i.margin,this.options.margin.item.vertical=i.margin):"object"===o(i.margin)&&(w.selectiveExtend(["axis"],this.options.margin,i.margin),"item"in i.margin&&("number"==typeof i.margin.item?(this.options.margin.item.horizontal=i.margin.item,this.options.margin.item.vertical=i.margin.item):"object"===o(i.margin.item)&&w.selectiveExtend(["horizontal","vertical"],this.options.margin.item,i.margin.item)))),"editable"in i&&("boolean"==typeof i.editable?(this.options.editable.updateTime=i.editable,this.options.editable.updateGroup=i.editable,this.options.editable.add=i.editable,this.options.editable.remove=i.editable):"object"===o(i.editable)&&w.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,i.editable)),"groupEditable"in i&&("boolean"==typeof i.groupEditable?(this.options.groupEditable.order=i.groupEditable,this.options.groupEditable.add=i.groupEditable,this.options.groupEditable.remove=i.groupEditable):"object"===o(i.groupEditable)&&w.selectiveExtend(["order","add","remove"],this.options.groupEditable,i.groupEditable));var e=function(e){var t=i[e];if(t){if(!(t instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=t}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(e),this.markDirty()}},c.prototype.markDirty=function(e){this.groupIds=[],this.stackDirty=!0,e&&e.refreshItems&&w.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()})},c.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},c.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},c.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},c.prototype.setSelection=function(e){var t,i,o,n;for(null==e&&(e=[]),Array.isArray(e)||(e=[e]),t=0,i=this.selection.length;t<i;t++)o=this.selection[t],(n=this.items[o])&&n.unselect();for(this.selection=[],t=0,i=e.length;t<i;t++)o=e[t],(n=this.items[o])&&(this.selection.push(o),n.select())},c.prototype.getSelection=function(){return this.selection.concat([])},c.prototype.getVisibleItems=function(){var e=this.body.range.getRange();if(this.options.rtl)var t=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end);else i=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end);var o=[];for(var n in this.groups)if(this.groups.hasOwnProperty(n))for(var s=this.groups[n].visibleItems,r=0;r<s.length;r++){var a=s[r];this.options.rtl?a.right<i&&a.right+a.width>t&&o.push(a.id):a.left<t&&a.left+a.width>i&&o.push(a.id)}return o},c.prototype._deselect=function(e){for(var t=this.selection,i=0,o=t.length;i<o;i++)if(t[i]==e){t.splice(i,1);break}},c.prototype.redraw=function(){var e=this.options.margin,o=this.body.range,t=w.option.asSize,i=this.options.orientation.item,n=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="vis-itemset",n=this._orderGroups()||n;var r=o.end-o.start;r==this.lastVisibleInterval&&this.props.width==this.props.lastWidth||(this.stackDirty=!0),this.lastVisibleInterval=r,this.props.lastWidth=this.props.width;var a=this.stackDirty,h=this._firstGroup(),l={item:e.item,axis:e.axis},d={item:e.item,axis:e.item.vertical/2},c=0,u=e.axis+e.item.vertical;return this.groups[v].redraw(o,d,a),w.forEach(this.groups,function(e){var t=e==h?l:d,i=e.redraw(o,t,a);n=i||n,c+=e.height}),c=Math.max(c,u),this.stackDirty=!1,s.style.height=t(c),this.props.width=s.offsetWidth,this.props.height=c,this.dom.axis.style.top=t("top"==i?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",n=this._isResized()||n},c.prototype._firstGroup=function(){var e="top"==this.options.orientation.item?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[g]||null},c.prototype._updateUngrouped=function(){var e,t,i=this.groups[g];if(this.groups[v],this.groupsData){if(i)for(t in i.hide(),delete this.groups[g],this.items)if(this.items.hasOwnProperty(t)){(e=this.items[t]).parent&&e.parent.remove(e);var o=this._getGroupId(e.data),n=this.groups[o];n&&n.add(e)||e.hide()}}else if(!i){for(t in i=new l(null,null,this),this.groups[g]=i,this.items)this.items.hasOwnProperty(t)&&(e=this.items[t],i.add(e));i.show()}},c.prototype.getLabelSet=function(){return this.dom.labelSet},c.prototype.setItems=function(e){var t,i=this,o=this.itemsData;if(e){if(!(e instanceof s||e instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(o&&(w.forEach(this.itemListeners,function(e,t){o.off(t,e)}),t=o.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;w.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},c.prototype.getItems=function(){return this.itemsData},c.prototype.setGroups=function(e){var t,i=this;if(this.groupsData&&(w.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(t)),e){if(!(e instanceof s||e instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var o=this.id;w.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,o)}),t=this.groupsData.getIds(),this._onAddGroups(t)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},c.prototype.getGroups=function(){return this.groupsData},c.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},c.prototype._getType=function(e){return e.type||this.options.type||(e.end?"range":"box")},c.prototype._getGroupId=function(e){return"background"==this._getType(e)&&null==e.group?v:this.groupsData?e.group:g},c.prototype._onAdd=c.prototype._onUpdate=function(e){var r=this;e.forEach(function(e){var t,i=r.itemsData.get(e,r.itemOptions),o=r.items[e],n=r._getType(i),s=c.types[n];if(o&&(s&&o instanceof s?r._updateItem(o,i):(t=o.selected,r._removeItem(o),o=null)),!o){if(!s)throw"rangeoverflow"==n?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+n+'"');(o=new s(i,r.conversion,r.options)).id=e,r._addItem(o),t&&(this.selection.push(e),o.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0})},c.prototype._onRemove=function(e){var i=0,o=this;e.forEach(function(e){var t=o.items[e];t&&(i++,o._removeItem(t))}),i&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0}))},c.prototype._order=function(){w.forEach(this.groups,function(e){e.order()})},c.prototype._onUpdateGroups=function(e){this._onAddGroups(e)},c.prototype._onAddGroups=function(e){var r=this;e.forEach(function(e){var t=r.groupsData.get(e),i=r.groups[e];if(i)i.setData(t);else{if(e==g||e==v)throw new Error("Illegal group id. "+e+" is a reserved id.");var o=Object.create(r.options);for(var n in w.extend(o,{height:null}),i=new l(e,t,r),r.groups[e]=i,r.items)if(r.items.hasOwnProperty(n)){var s=r.items[n];s.data.group==e&&i.add(s)}i.order(),i.show()}}),this.body.emitter.emit("_change",{queue:!0})},c.prototype._onRemoveGroups=function(e){var i=this.groups;e.forEach(function(e){var t=i[e];t&&(t.hide(),delete i[e])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},c.prototype._orderGroups=function(){if(this.groupsData){var e=this.groupsData.getIds({order:this.options.groupOrder}),t=!w.equalArray(e,this.groupIds);if(t){var i=this.groups;e.forEach(function(e){i[e].hide()}),e.forEach(function(e){i[e].show()}),this.groupIds=e}return t}return!1},c.prototype._addItem=function(e){this.items[e.id]=e;var t=this._getGroupId(e.data),i=this.groups[t];i&&i.add(e)},c.prototype._updateItem=function(e,t){var i=e.data.group,o=e.data.subgroup;if(e.setData(t),i!=e.data.group||o!=e.data.subgroup){var n=this.groups[i];n&&n.remove(e);var s=this._getGroupId(e.data),r=this.groups[s];r&&r.add(e)}},c.prototype._removeItem=function(e){e.hide(),delete this.items[e.id];var t=this.selection.indexOf(e.id);-1!=t&&this.selection.splice(t,1),e.parent&&e.parent.remove(e)},c.prototype._constructByEndArray=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof f&&t.push(e[i]);return t},c.prototype._onTouch=function(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null},c.prototype._getGroupIndex=function(e){for(var t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t},c.prototype._onDragStart=function(o){var e,t=this.touchParams.item||null,n=this;if(t&&(t.selected||this.options.itemsAlwaysDraggable)){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!t.editable)return;if(!1===t.editable)return;var i=this.touchParams.dragLeftItem,s=this.touchParams.dragRightItem;if(i)e={item:i,initialX:o.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[e];else if(s)e={item:s,initialX:o.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[e];else{this.touchParams.selectedItem=t;var r=this._getGroupIndex(t.data.group),a=this.options.itemsAlwaysDraggable&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=a.map(function(e){var t=n.items[e],i=n._getGroupIndex(t.data.group);return{item:t,initialX:o.center.x,groupOffset:r-i,data:this._cloneItemData(t.data)}}.bind(this))}o.stopPropagation()}else this.options.editable.add&&(o.srcEvent.ctrlKey||o.srcEvent.metaKey)&&this._onDragStartAddItem(o)},c.prototype._onDragStartAddItem=function(e){var t=this.options.snap||null;if(this.options.rtl)var i=(o=w.getAbsoluteRight(this.dom.frame))-e.center.x+10;else{var o=w.getAbsoluteLeft(this.dom.frame);i=e.center.x-o-10}var n=this.body.util.toTime(i),s=this.body.util.getScale(),r=this.body.util.getStep(),a=t?t(n,s,r):n,h={type:"range",start:a,end:a,content:"new item"},l=w.randomUUID();h[this.itemsData._fieldId]=l;var d=this.groupFromTarget(e);d&&(h.group=d.groupId);var c=new f(h,this.conversion,this.options);c.id=l,c.data=this._cloneItemData(h),this._addItem(c);var u={item:c,initialX:e.center.x,data:c.data};this.options.rtl?u.dragLeft=!0:u.dragRight=!0,this.touchParams.itemProps=[u],e.stopPropagation()},c.prototype._onDrag=function(c){if(this.touchParams.itemProps){c.stopPropagation();var u=this,p=this.options.snap||null;if(this.options.rtl)var f=this.body.dom.root.offsetLeft+this.body.domProps.right.width;else f=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var m=this.body.util.getScale(),g=this.body.util.getStep(),e=this.touchParams.selectedItem,t=u.options.editable.updateGroup,v=null;if(t&&e&&null!=e.data.group){var i=u.groupFromTarget(c);i&&(v=this._getGroupIndex(i.groupId))}this.touchParams.itemProps.forEach(function(t){var e=u.body.util.toTime(c.center.x-f),i=u.body.util.toTime(t.initialX-f);if(this.options.rtl)var o=-(e-i);else o=e-i;var n=this._cloneItemData(t.item.data);if(!1!==t.item.editable){if(u.options.editable.updateTime||!0===t.item.editable)if(t.dragLeft){if(this.options.rtl){if(null!=n.end){var s=w.convert(t.data.end,"Date"),r=new Date(s.valueOf()+o);n.end=p?p(r,m,g):r}}else if(null!=n.start){var a=w.convert(t.data.start,"Date"),h=new Date(a.valueOf()+o);n.start=p?p(h,m,g):h}}else if(t.dragRight){if(this.options.rtl){if(null!=n.start){a=w.convert(t.data.start,"Date"),h=new Date(a.valueOf()+o);n.start=p?p(h,m,g):h}}else if(null!=n.end){s=w.convert(t.data.end,"Date"),r=new Date(s.valueOf()+o);n.end=p?p(r,m,g):r}}else if(null!=n.start){a=w.convert(t.data.start,"Date").valueOf(),h=new Date(a+o);if(null!=n.end){var l=(s=w.convert(t.data.end,"Date")).valueOf()-a.valueOf();n.start=p?p(h,m,g):h,n.end=new Date(n.start.valueOf()+l)}else n.start=p?p(h,m,g):h}if((u.options.editable.updateGroup||!0===t.item.editable)&&!t.dragLeft&&!t.dragRight&&null!=v&&null!=n.group){var d=v-t.groupOffset;d=Math.max(0,d),d=Math.min(u.groupIds.length-1,d),n.group=u.groupIds[d]}n=this._cloneItemData(n),u.options.onMoving(n,function(e){e&&t.item.setData(this._cloneItemData(e,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("_change")}},c.prototype._moveToGroup=function(e,t){var i=this.groups[t];if(i&&i.groupId!=e.data.group){var o=e.parent;o.remove(e),o.order(),i.add(e),i.order(),e.data.group=i.groupId}},c.prototype._onDragEnd=function(e){if(this.touchParams.itemProps){e.stopPropagation();var o=this,n=this.itemsData.getDataSet(),t=this.touchParams.itemProps;this.touchParams.itemProps=null,t.forEach(function(t){var i=t.item.id;if(null!=o.itemsData.get(i,o.itemOptions)){var e=this._cloneItemData(t.item.data);o.options.onMove(e,function(e){e?(e[n._fieldId]=i,n.update(e)):(t.item.setData(t.data),o.stackDirty=!0,o.body.emitter.emit("_change"))})}else o.options.onAdd(t.item.data,function(e){o._removeItem(t.item),e&&o.itemsData.getDataSet().add(e),o.stackDirty=!0,o.body.emitter.emit("_change")})}.bind(this))}},c.prototype._onGroupDragStart=function(e){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},c.prototype._onGroupDrag=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this.groupFromTarget(e);if(t&&t.height!=this.groupTouchParams.group.height){var i=t.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,n=w.getAbsoluteTop(t.dom.foreground),s=this.groupTouchParams.group.height;if(i){if(n+s<o)return}else if(o<n+t.height-s)return}if(t&&t!=this.groupTouchParams.group){var r=(l=this.groupsData).get(t.groupId),a=l.get(this.groupTouchParams.group.groupId);a&&r&&(this.options.groupOrderSwap(a,r,this.groupsData),this.groupsData.update(a),this.groupsData.update(r));var h=this.groupsData.getIds({order:this.options.groupOrder});if(!w.equalArray(h,this.groupTouchParams.originalOrder))for(var l=this.groupsData,d=this.groupTouchParams.originalOrder,c=this.groupTouchParams.group.groupId,u=Math.min(d.length,h.length),p=0,f=0,m=0;p<u;){for(;p+f<u&&p+m<u&&h[p+f]==d[p+m];)p++;if(u<=p+f)break;if(h[p+f]!=c)if(d[p+m]!=c){var g=h.indexOf(d[p+m]),v=l.get(h[p+f]),y=l.get(d[p+m]);this.options.groupOrderSwap(v,y,l),l.update(v),l.update(y);var b=h[p+f];h[p+f]=d[p+m],h[g]=b,p++}else m=1;else f=1}}}},c.prototype._onGroupDragEnd=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var l=this,d=l.groupTouchParams.group.groupId,c=l.groupsData.getDataSet(),t=w.extend({},c.get(d));l.options.onMoveGroup(t,function(e){if(e)e[c._fieldId]=d,c.update(e);else{var t=c.getIds({order:l.options.groupOrder});if(!w.equalArray(t,l.groupTouchParams.originalOrder))for(var i=l.groupTouchParams.originalOrder,o=Math.min(i.length,t.length),n=0;n<o;){for(;n<o&&t[n]==i[n];)n++;if(o<=n)break;var s=t.indexOf(i[n]),r=c.get(t[n]),a=c.get(i[n]);l.options.groupOrderSwap(r,a,c),groupsData.update(r),groupsData.update(a);var h=t[n];t[n]=i[n],t[s]=h,n++}}}),l.body.emitter.emit("groupDragged",{groupId:d})}},c.prototype._onSelectItem=function(e){if(this.options.selectable){var t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(t||i)return void this._onMultiSelectItem(e);var o=this.getSelection(),n=this.itemFromTarget(e),s=n?[n.id]:[];this.setSelection(s);var r=this.getSelection();(0<r.length||0<o.length)&&this.body.emitter.emit("select",{items:r,event:e})}},c.prototype._onAddItem=function(e){if(this.options.selectable&&this.options.editable.add){var t=this,i=this.options.snap||null,o=this.itemFromTarget(e);if(o){var n=t.itemsData.get(o.id);this.options.onUpdate(n,function(e){e&&t.itemsData.getDataSet().update(e)})}else{if(this.options.rtl)var s=(r=w.getAbsoluteRight(this.dom.frame))-e.center.x;else{var r=w.getAbsoluteLeft(this.dom.frame);s=e.center.x-r}var a=this.body.util.toTime(s),h=this.body.util.getScale(),l=this.body.util.getStep(),d={start:i?i(a,h,l):a,content:"new item"};if("range"===this.options.type){var c=this.body.util.toTime(s+this.props.width/5);d.end=i?i(c,h,l):c}d[this.itemsData._fieldId]=w.randomUUID();var u=this.groupFromTarget(e);u&&(d.group=u.groupId),d=this._cloneItemData(d),this.options.onAdd(d,function(e){e&&t.itemsData.getDataSet().add(e)})}}},c.prototype._onMultiSelectItem=function(e){if(this.options.selectable){var t=this.itemFromTarget(e);if(t){var i=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1)&&this.options.multiselect){var o=this.itemsData.get(t.id).group,n=void 0;this.options.multiselectPerGroup&&0<i.length&&(n=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&null!=n&&n!=o||i.push(t.id);var s=c._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||n==o)for(var r in i=[],this.items)if(this.items.hasOwnProperty(r)){var a=this.items[r],h=a.data.start,l=void 0!==a.data.end?a.data.end:h;!(h>=s.min&&l<=s.max)||this.options.multiselectPerGroup&&n!=this.itemsData.get(a.id).group||a instanceof m||i.push(a.id)}}else{var d=i.indexOf(t.id);-1==d?i.push(t.id):i.splice(d,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}},c._getItemRange=function(e){var t=null,i=null;return e.forEach(function(e){(null==i||e.start<i)&&(i=e.start),null!=e.end?(null==t||e.end>t)&&(t=e.end):(null==t||e.start>t)&&(t=e.start)}),{min:i,max:t}},c.prototype.itemFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-item"))return t["timeline-item"];t=t.parentNode}return null},c.prototype.groupFromTarget=function(e){for(var t=e.center?e.center.y:e.clientY,i=0;i<this.groupIds.length;i++){var o=this.groupIds[i],n=this.groups[o],s=n.dom.foreground,r=w.getAbsoluteTop(s);if(r<t&&t<r+s.offsetHeight)return n;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&r<t)return n}else if(0===i&&t<r+s.offset)return n}return null},c.itemSetFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-itemset"))return t["timeline-itemset"];t=t.parentNode}return null},c.prototype._cloneItemData=function(e,t){var i=w.extend({},e);return t=t||this.itemsData.getDataSet()._options.type,null!=i.start&&(i.start=w.convert(i.start,t&&t.start||"Date")),null!=i.end&&(i.end=w.convert(i.end,t&&t.end||"Date")),i},e.exports=c},function(e,t,i){function n(e,t,i,o){this.moment=r,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(o)?this.hiddenDates=o:this.hiddenDates=null!=o?[o]:[],this.format=n.FORMAT}var r=i(2),o=i(32),s=i(1);n.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},n.prototype.setMoment=function(e){this.moment=e,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},n.prototype.setFormat=function(e){var t=s.deepExtend({},n.FORMAT);this.format=s.deepExtend(t,e)},n.prototype.setRange=function(e,t,i){if(!(e instanceof Date&&t instanceof Date))throw"No legal start or end date in method setRange";this._start=null!=e?this.moment(e.valueOf()):new Date,this._end=null!=t?this.moment(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},n.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},n.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},n.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},n.prototype.next=function(){var e=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==e&&(this.current=this._end.clone()),o.stepOverHiddenDates(this.moment,this,e)},n.prototype.getCurrent=function(){return this.current},n.prototype.setScale=function(e){e&&"string"==typeof e.scale&&(this.scale=e.scale,this.step=0<e.step?e.step:1,this.autoScale=!1)},n.prototype.setAutoScale=function(e){this.autoScale=e},n.prototype.setMinimumStep=function(e){if(null!=e){var t=31104e6;e<31104e9&&(this.scale="year",this.step=1e3),e<15552e9&&(this.scale="year",this.step=500),e<31104e8&&(this.scale="year",this.step=100),e<50*t&&(this.scale="year",this.step=50),e<10*t&&(this.scale="year",this.step=10),e<5*t&&(this.scale="year",this.step=5),e<t&&(this.scale="year",this.step=1),e<7776e6&&(this.scale="month",this.step=3),e<2592e6&&(this.scale="month",this.step=1),e<432e6&&(this.scale="day",this.step=5),e<1728e5&&(this.scale="day",this.step=2),e<864e5&&(this.scale="day",this.step=1),e<432e5&&(this.scale="weekday",this.step=1),e<144e5&&(this.scale="hour",this.step=4),e<36e5&&(this.scale="hour",this.step=1),e<9e5&&(this.scale="minute",this.step=15),e<6e5&&(this.scale="minute",this.step=10),e<3e5&&(this.scale="minute",this.step=5),e<6e4&&(this.scale="minute",this.step=1),e<15e3&&(this.scale="second",this.step=15),e<1e4&&(this.scale="second",this.step=10),e<5e3&&(this.scale="second",this.step=5),e<1e3&&(this.scale="second",this.step=1),e<200&&(this.scale="millisecond",this.step=200),e<100&&(this.scale="millisecond",this.step=100),e<50&&(this.scale="millisecond",this.step=50),e<10&&(this.scale="millisecond",this.step=10),e<5&&(this.scale="millisecond",this.step=5),e<1&&(this.scale="millisecond",this.step=1)}},n.snap=function(e,t,i){var o=r(e);if("year"==t){var n=o.year()+Math.round(o.month()/12);o.year(Math.round(n/i)*i),o.month(0),o.date(0),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("month"==t)15<o.date()?(o.date(1),o.add(1,"month")):o.date(1),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0);else if("day"==t){switch(i){case 5:case 2:o.hours(24*Math.round(o.hours()/24));break;default:o.hours(12*Math.round(o.hours()/12))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("weekday"==t){switch(i){case 5:case 2:o.hours(12*Math.round(o.hours()/12));break;default:o.hours(6*Math.round(o.hours()/6))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("hour"==t){switch(i){case 4:o.minutes(60*Math.round(o.minutes()/60));break;default:o.minutes(30*Math.round(o.minutes()/30))}o.seconds(0),o.milliseconds(0)}else if("minute"==t){switch(i){case 15:case 10:o.minutes(5*Math.round(o.minutes()/5)),o.seconds(0);break;case 5:o.seconds(60*Math.round(o.seconds()/60));break;default:o.seconds(30*Math.round(o.seconds()/30))}o.milliseconds(0)}else if("second"==t)switch(i){case 15:case 10:o.seconds(5*Math.round(o.seconds()/5)),o.milliseconds(0);break;case 5:o.milliseconds(1e3*Math.round(o.milliseconds()/1e3));break;default:o.milliseconds(500*Math.round(o.milliseconds()/500))}else if("millisecond"==t){var s=5<i?i/2:1;o.milliseconds(Math.round(o.milliseconds()/s)*s)}return o},n.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var e=this.moment(this.current);switch(this.scale){case"millisecond":return 0==e.milliseconds();case"second":return 0==e.seconds();case"minute":return 0==e.hours()&&0==e.minutes();case"hour":return 0==e.hours();case"weekday":case"day":return 1==e.date();case"month":return 0==e.month();case"year":default:return!1}},n.prototype.getLabelMinor=function(e){null==e&&(e=this.current);var t=this.format.minorLabels[this.scale];return t&&0<t.length?this.moment(e).format(t):""},n.prototype.getLabelMajor=function(e){null==e&&(e=this.current);var t=this.format.majorLabels[this.scale];return t&&0<t.length?this.moment(e).format(t):""},n.prototype.getClassName=function(){function e(e){return e/r%2==0?" vis-even":" vis-odd"}function t(e){return e.isSame(new Date,"day")?" vis-today":e.isSame(o().add(1,"day"),"day")?" vis-tomorrow":e.isSame(o().add(-1,"day"),"day")?" vis-yesterday":""}function i(e){return e.isSame(new Date,"month")?" vis-current-month":""}var o=this.moment,n=this.moment(this.current),s=n.locale?n.locale("en"):n.lang("en"),r=this.step;switch(this.scale){case"millisecond":return e(s.milliseconds()).trim();case"second":return e(s.seconds()).trim();case"minute":return e(s.minutes()).trim();case"hour":var a=s.hours();return 4==this.step&&(a=a+"-h"+(a+4)),"vis-h"+a+t(s)+e(s.hours());case"weekday":return"vis-"+s.format("dddd").toLowerCase()+t(s)+(s.isSame(new Date,"week")?" vis-current-week":"")+e(s.date());case"day":var h=s.date();return"vis-day"+h+" vis-"+s.format("MMMM").toLowerCase()+i(s)+e(h-1);case"month":return"vis-"+s.format("MMMM").toLowerCase()+i(s)+e(s.month());case"year":var l=s.year();return"vis-year"+l+(s.isSame(new Date,"year")?" vis-current-year":"")+e(l);default:return""}},e.exports=n},function(e,t,i){function o(e,t,i){this.groupId=e,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=this;this.itemSet.body.emitter.on("checkRangedItems",function(){o.checkRangedItems=!0}),this._create(),this.setData(t)}var p=i(1),c=i(37);i(38),o.prototype._create=function(){var e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;var t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;var i=document.createElement("div");i.className="vis-group",(i["timeline-group"]=this).dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},o.prototype.setData=function(e){var t;if((t=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(e):e&&e.content)instanceof Element){for(this.dom.inner.appendChild(t);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else this.dom.inner.innerHTML=null!=t?t:this.groupId||"";this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?p.removeClassName(this.dom.inner,"vis-hidden"):p.addClassName(this.dom.inner,"vis-hidden");var i=e&&e.className||null;i!=this.className&&(this.className&&(p.removeClassName(this.dom.label,this.className),p.removeClassName(this.dom.foreground,this.className),p.removeClassName(this.dom.background,this.className),p.removeClassName(this.dom.axis,this.className)),p.addClassName(this.dom.label,i),p.addClassName(this.dom.foreground,i),p.addClassName(this.dom.background,i),p.addClassName(this.dom.axis,i),this.className=i),this.style&&(p.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(p.addCssText(this.dom.label,e.style),this.style=e.style)},o.prototype.getLabelWidth=function(){return this.props.label.width},o.prototype.redraw=function(e,t,i){var o=!1,n=this.dom.marker.clientHeight;if(n!=this.lastMarkerHeight&&(this.lastMarkerHeight=n,p.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()}),i=!0),this._calculateSubGroupHeights(),"function"==typeof this.itemSet.options.order){if(i){var s=this;p.forEach(this.items,function(e){e.displayed||(e.redraw(),s.visibleItems.push(e)),e.repositionX(!1)});var r=this.orderedItems.byStart.slice().sort(function(e,t){return s.itemSet.options.order(e.data,t.data)});c.stack(r,t,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.itemSet.options.stack?c.stack(this.visibleItems,t,i):c.nostack(this.visibleItems,t,this.subgroups);var a=this._calculateHeight(t),h=this.dom.foreground;this.top=h.offsetTop,this.right=h.offsetLeft,this.width=h.offsetWidth,o=p.updateProperty(this,"height",a)||o,o=p.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||o,o=p.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||o,this.dom.background.style.height=a+"px",this.dom.foreground.style.height=a+"px",this.dom.label.style.height=a+"px";for(var l=0,d=this.visibleItems.length;l<d;l++){this.visibleItems[l].repositionY(t)}return o},o.prototype._calculateSubGroupHeights=function(){if(0<Object.keys(this.subgroups).length){var t=this;this.resetSubgroups(),p.forEach(this.visibleItems,function(e){void 0!==e.data.subgroup&&(t.subgroups[e.data.subgroup].height=Math.max(t.subgroups[e.data.subgroup].height,e.height),t.subgroups[e.data.subgroup].visible=!0)})}},o.prototype._calculateHeight=function(e){var t,i=this.visibleItems;if(0<i.length){var o=i[0].top,n=i[0].top+i[0].height;if(p.forEach(i,function(e){o=Math.min(o,e.top),n=Math.max(n,e.top+e.height)}),o>e.axis){var s=o-e.axis;n-=s,p.forEach(i,function(e){e.top-=s})}t=n+e.item.vertical/2}else t=0;return Math.max(t,this.props.label.height)},o.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},o.prototype.hide=function(){var e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);var t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var o=this.dom.axis;o.parentNode&&o.parentNode.removeChild(o)},o.prototype.add=function(e){if((this.items[e.id]=e).setParent(this),void 0!==e.data.subgroup&&(void 0===this.subgroups[e.data.subgroup]&&(this.subgroups[e.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[e.data.subgroup].items.push(e)),this.orderSubgroups(),-1==this.visibleItems.indexOf(e)){var t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}},o.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var e=[];if("string"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(e,t){return e.sortField-t.sortField})}else if("function"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(0<e.length)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},o.prototype.resetSubgroups=function(){for(var e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1)},o.prototype.remove=function(e){delete this.items[e.id],e.setParent(null);var t=this.visibleItems.indexOf(e);if(-1!=t&&this.visibleItems.splice(t,1),void 0!==e.data.subgroup){var i=this.subgroups[e.data.subgroup];if(i){var o=i.items.indexOf(e);i.items.splice(o,1),i.items.length||(delete this.subgroups[e.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},o.prototype.removeFromDataSet=function(e){this.itemSet.removeItem(e.id)},o.prototype.order=function(){for(var e=p.toArray(this.items),t=[],i=[],o=0;o<e.length;o++)void 0!==e[o].data.end&&i.push(e[o]),t.push(e[o]);this.orderedItems={byStart:t,byEnd:i},c.orderByStart(this.orderedItems.byStart),c.orderByEnd(this.orderedItems.byEnd)},o.prototype._updateVisibleItems=function(e,t,i){function o(e){return e<l?-1:e<=d?0:1}var n,s,r=[],a={},h=(i.end-i.start)/4,l=i.start-h,d=i.end+h;if(0<t.length)for(s=0;s<t.length;s++)this._checkIfVisibleWithReference(t[s],r,a,i);var c=p.binarySearchCustom(e.byStart,o,"data","start");if(this._traceVisible(c,e.byStart,r,a,function(e){return e.data.start<l||e.data.start>d}),1==this.checkRangedItems)for(this.checkRangedItems=!1,s=0;s<e.byEnd.length;s++)this._checkIfVisibleWithReference(e.byEnd[s],r,a,i);else{var u=p.binarySearchCustom(e.byEnd,o,"data","end");this._traceVisible(u,e.byEnd,r,a,function(e){return e.data.end<l||e.data.end>d})}for(s=0;s<r.length;s++)(n=r[s]).displayed||n.show(),n.repositionX();return r},o.prototype._traceVisible=function(e,t,i,o,n){var s,r;if(-1!=e){for(r=e;0<=r&&!n(s=t[r]);r--)void 0===o[s.id]&&(o[s.id]=!0,i.push(s));for(r=e+1;r<t.length&&!n(s=t[r]);r++)void 0===o[s.id]&&(o[s.id]=!0,i.push(s))}},o.prototype._checkIfVisible=function(e,t,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()},o.prototype._checkIfVisibleWithReference=function(e,t,i,o){e.isVisible(o)?void 0===i[e.id]&&(i[e.id]=!0,t.push(e)):e.displayed&&e.hide()},e.exports=o},function(e,d){d.orderByStart=function(e){e.sort(function(e,t){return e.data.start-t.data.start})},d.orderByEnd=function(e){e.sort(function(e,t){return("end"in e.data?e.data.end:e.data.start)-("end"in t.data?t.data.end:t.data.start)})},d.stack=function(e,t,i){var o,n;if(i)for(o=0,n=e.length;o<n;o++)e[o].top=null;for(o=0,n=e.length;o<n;o++){var s=e[o];if(s.stack&&null===s.top){s.top=t.axis;do{for(var r=null,a=0,h=e.length;a<h;a++){var l=e[a];if(null!==l.top&&l!==s&&l.stack&&d.collision(s,l,t.item,l.options.rtl)){r=l;break}}null!=r&&(s.top=r.top+r.height+t.item.vertical)}while(r)}}},d.nostack=function(e,t,i){var o,n,s;for(o=0,n=e.length;o<n;o++)if(void 0!==e[o].data.subgroup){for(var r in s=t.axis,i)i.hasOwnProperty(r)&&1==i[r].visible&&i[r].index<i[e[o].data.subgroup].index&&(s+=i[r].height+t.item.vertical);e[o].top=s}else e[o].top=t.axis},d.collision=function(e,t,i,o){return o?e.right-i.horizontal+.001<t.right+t.width&&e.right+e.width+i.horizontal-.001>t.right&&e.top-i.vertical+.001<t.top+t.height&&e.top+e.height+i.vertical-.001>t.top:e.left-i.horizontal+.001<t.left+t.width&&e.left+e.width+i.horizontal-.001>t.left&&e.top-i.vertical+.001<t.top+t.height&&e.top+e.height+i.vertical-.001>t.top}},function(e,t,i){function o(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,e){if(null==e.start)throw new Error('Property "start" missing in item '+e.id);if(null==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39));(o.prototype=new n(null,null,null)).baseClassName="vis-item vis-range",o.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),(e.box["timeline-item"]=this).dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.box.className=this.baseClassName+o,this.overflow="hidden"!==window.getComputedStyle(e.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(e.box),this._repaintDragLeft(),this._repaintDragRight()},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}},o.prototype.repositionX=function(e){var t,i,o=this.parent.width,n=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end);void 0!==e&&!0!==e||(n<-o&&(n=-o),2*o<s&&(s=2*o));var r=Math.max(s-n,1);switch(i=this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=r+this.props.content.width,this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=r,Math.min(s-n,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px",this.options.align){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(r-i,0)+"px":this.dom.content.style.left=Math.max(r-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((r-i)/2,0)+"px":this.dom.content.style.left=Math.max((r-i)/2,0)+"px";break;default:t=this.overflow?0<s?Math.max(-n,0):-i:n<0?-n:0,this.options.rtl?this.dom.content.style.right=t+"px":this.dom.content.style.left=t+"px"}},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box;t.style.top="top"==e?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var e=document.createElement("div");e.className="vis-drag-left",(e.dragLeftItem=this).dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},o.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var e=document.createElement("div");e.className="vis-drag-right",(e.dragRightItem=this).dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},e.exports=o},function(e,t,i){function o(e,t,i){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=e.editable)}var n=i(20),s=i(1);o.prototype.stack=!0,o.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setData=function(e){null!=e.group&&this.data.group!=e.group&&this.parent.itemSet._moveToGroup(this,e.group),e.hasOwnProperty("editable")&&"boolean"==typeof e.editable&&(this.editable=e.editable),this.data=e,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setParent=function(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e},o.prototype.isVisible=function(e){return!1},o.prototype.show=function(){return!1},o.prototype.hide=function(){return!1},o.prototype.redraw=function(){},o.prototype.repositionX=function(){},o.prototype.repositionY=function(){},o.prototype._repaintDeleteButton=function(e){var t=(this.options.editable.remove||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&t&&!this.dom.deleteButton){var i=this,o=document.createElement("div");this.options.rtl?o.className="vis-delete-rtl":o.className="vis-delete",o.title="Delete this item",new n(o).on("tap",function(e){e.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(o),this.dom.deleteButton=o}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},o.prototype._updateContents=function(e){var t;if(this.options.template){var i=this.parent.itemSet.itemsData.get(this.id);t=this.options.template(i)}else t=this.data.content;if(this._contentToString(this.content)!==this._contentToString(t)){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(null!=t)e.innerHTML=t;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=t}},o.prototype._updateTitle=function(e){null!=this.data.title?e.title=this.data.title||"":e.removeAttribute("vis-title")},o.prototype._updateDataAttributes=function(e){if(this.options.dataAttributes&&0<this.options.dataAttributes.length){var t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;t=Object.keys(this.data)}for(var i=0;i<t.length;i++){var o=t[i],n=this.data[o];null!=n?e.setAttribute("data-"+o,n):e.removeAttribute("data-"+o)}}},o.prototype._updateStyle=function(e){this.style&&(s.removeCssText(e,this.style),this.style=null),this.data.style&&(s.addCssText(e,this.data.style),this.style=this.data.style)},o.prototype._contentToString=function(e){return"string"!=typeof e&&e&&"outerHTML"in e?e.outerHTML:e},o.prototype.getWidthLeft=function(){return 0},o.prototype.getWidthRight=function(){return 0},e.exports=o},function(e,t,i){function o(e,t,i){n.call(this,e,t,i),this.width=0,this.height=0,this.top=0,this.left=0}var n=(i(1),i(36));(o.prototype=Object.create(n.prototype)).redraw=function(e,t,i){this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var o=0,n=this.visibleItems.length;o<n;o++){this.visibleItems[o].repositionY(t)}return!1},o.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,e&&null==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);i(1),(o.prototype=new n(null,null,null)).isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("DIV"),e.content=document.createElement("DIV"),e.content.className="vis-item-content",e.box.appendChild(e.content),e.line=document.createElement("DIV"),e.line.className="vis-line",e.dot=document.createElement("DIV"),e.dot.className="vis-dot",(e.box["timeline-item"]=this).dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(!e.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(e.line)}if(!e.dot.parentNode){var o=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(e.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");e.box.className="vis-item vis-box"+s,e.line.className="vis-item vis-line"+s,e.dot.className="vis-item vis-dot"+s,this.props.dot.height=e.dot.offsetHeight,this.props.dot.width=e.dot.offsetWidth,this.props.line.width=e.line.offsetWidth,this.width=e.box.offsetWidth,this.height=e.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(e.box)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}},o.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start),t=this.options.align;"right"==t?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width+"px",this.dom.dot.style.left=e-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==t?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e+"px",this.dom.dot.style.right=e+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e+"px",this.dom.dot.style.left=e+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.dot.width/2+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width/2+"px",this.dom.dot.style.left=e-this.props.dot.width/2+"px")},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box,i=this.dom.line,o=this.dom.dot;if("top"==e)t.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var n=this.parent.itemSet.props.height,s=n-this.parent.top-this.parent.height+this.top;t.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=n-s+"px",i.style.bottom="0"}o.style.top=-this.props.dot.height/2+"px"},o.prototype.getWidthLeft=function(){return this.width/2},o.prototype.getWidthRight=function(){return this.width/2},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,e&&null==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);(o.prototype=new n(null,null,null)).isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).point=document.createElement("div"),e.content=document.createElement("div"),e.content.className="vis-item-content",e.point.appendChild(e.content),e.dot=document.createElement("div"),e.point.appendChild(e.dot),(e.point["timeline-item"]=this).dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.point.className="vis-item vis-point"+o,e.dot.className="vis-item vis-dot"+o,this.props.dot.width=e.dot.offsetWidth,this.props.dot.height=e.dot.offsetHeight,this.props.content.height=e.content.offsetHeight,this.options.rtl?e.content.style.marginRight=2*this.props.dot.width+"px":e.content.style.marginLeft=2*this.props.dot.width+"px",this.width=e.point.offsetWidth,this.height=e.point.offsetHeight,e.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?e.dot.style.right=this.props.dot.width/2+"px":e.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(e.point)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},o.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=e-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=e-this.props.dot.width,this.dom.point.style.left=this.left+"px")},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.point;t.style.top="top"==e?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype.getWidthLeft=function(){return this.props.dot.width},o.prototype.getWidthRight=function(){return this.props.dot.width},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,e){if(null==e.start)throw new Error('Property "start" missing in item '+e.id);if(null==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39)),d=i(40),s=i(38);(o.prototype=new n(null,null,null)).baseClassName="vis-item vis-background",o.prototype.stack=!1,o.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");e.box.className=this.baseClassName+i,this.overflow="hidden"!==window.getComputedStyle(e.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},o.prototype.show=s.prototype.show,o.prototype.hide=s.prototype.hide,o.prototype.repositionX=s.prototype.repositionX,o.prototype.repositionY=function(e){var t,i="top"===this.options.orientation.item;if(this.dom.content.style.top=i?"":"0",this.dom.content.style.bottom=i?"0":"",void 0!==this.data.subgroup){var o=this.data.subgroup,n=this.parent.subgroups,s=n[o].index;if(1==i){t=this.parent.subgroups[o].height+e.item.vertical,t+=0==s?e.axis-.5*e.item.vertical:0;var r=this.parent.top;for(var a in n)n.hasOwnProperty(a)&&1==n[a].visible&&n[a].index<s&&(r+=n[a].height+e.item.vertical);r+=0!=s?e.axis-.5*e.item.vertical:0,this.dom.box.style.top=r+"px",this.dom.box.style.bottom=""}else{r=this.parent.top;var h=0;for(var a in n)if(n.hasOwnProperty(a)&&1==n[a].visible){var l=n[a].height+e.item.vertical;h+=l,n[a].index>s&&(r+=l)}t=this.parent.subgroups[o].height+e.item.vertical,this.dom.box.style.top=this.parent.height-h+r+"px",this.dom.box.style.bottom=""}}else this.parent instanceof d?(t=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=i?"0":"",this.dom.box.style.bottom=i?"":"0"):(t=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=t+"px"},e.exports=o},function(e,t,i){function o(e,t){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:k.FORMAT,moment:r,timeAxis:null},this.options=x.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},x=i(1),s=i(31),k=i(35),S=i(32),r=i(2);(o.prototype=new s).setOptions=function(e){e&&(x.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),x.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation.axis=e.orientation:"object"===n(e.orientation)&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&("function"==typeof r.locale?r.locale(e.locale):r.lang(e.locale)))},o.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},o.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},o.prototype.redraw=function(){var e=this.props,t=this.dom.foreground,i=this.dom.background,o="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,n=t.parentNode!==o;this._calculateCharSize();var s=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,r=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;e.minorLabelHeight=s?e.minorCharHeight:0,e.majorLabelHeight=r?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;var a=t.nextSibling,h=i.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i),t.style.height=this.props.height+"px",this._repaintLabels(),a?o.insertBefore(t,a):o.appendChild(t),h?this.body.dom.backgroundVertical.insertBefore(i,h):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||n},o.prototype._repaintLabels=function(){var e=this.options.orientation.axis,t=x.convert(this.body.range.start,"Number"),i=x.convert(this.body.range.end,"Number"),o=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),n=o-S.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,o);n-=this.body.util.toTime(0).valueOf();var s=new k(new Date(t),new Date(i),n,this.body.hiddenDates);s.setMoment(this.options.moment),this.options.format&&s.setFormat(this.options.format),this.options.timeAxis&&s.setScale(this.options.timeAxis),this.step=s;var r=this.dom;r.redundant.lines=r.lines,r.redundant.majorTexts=r.majorTexts,r.redundant.minorTexts=r.minorTexts,r.lines=[],r.majorTexts=[],r.minorTexts=[];var a,h,l,d,c,u,p,f=0,m=void 0,g=0;for(s.start(),a=s.getCurrent(),l=this.body.util.toScreen(a);s.hasNext()&&g<1e3;){g++,d=s.isMajor(),p=s.getClassName(),u=s.getLabelMinor(),h=l,s.next(),a=s.getCurrent(),s.isMajor(),f;var v=.4*f<=(f=(l=this.body.util.toScreen(a))-h);if(this.options.showMinorLabels&&v){var y=this._repaintMinorText(h,u,e,p);y.style.width=f+"px"}d&&this.options.showMajorLabels?(0<h&&(null==m&&(m=h),y=this._repaintMajorText(h,s.getLabelMajor(),e,p)),c=this._repaintMajorLine(h,f,e,p)):v?c=this._repaintMinorLine(h,f,e,p):c&&(c.style.width=parseInt(c.style.width)+f+"px")}if(1e3!==g||O||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),O=!0),this.options.showMajorLabels){var b=this.body.util.toTime(0),w=s.getLabelMajor(b),_=w.length*(this.props.majorCharWidth||10)+10;(null==m||_<m)&&this._repaintMajorText(0,w,e,p)}x.forEach(this.dom.redundant,function(e){for(;e.length;){var t=e.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}})},o.prototype._repaintMinorText=function(e,t,i,o){var n=this.dom.redundant.minorTexts.shift();if(!n){var s=document.createTextNode("");(n=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(n)}return this.dom.minorTexts.push(n),n.childNodes[0].nodeValue=t,n.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n.className="vis-text vis-minor "+o,n},o.prototype._repaintMajorText=function(e,t,i,o){var n=this.dom.redundant.majorTexts.shift();if(!n){var s=document.createTextNode(t);(n=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(n)}return this.dom.majorTexts.push(n),n.childNodes[0].nodeValue=t,n.className="vis-text vis-major "+o,n.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n},o.prototype._repaintMinorLine=function(e,t,i,o){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var s=this.props;return n.style.top="top"==i?s.majorLabelHeight+"px":this.body.domProps.top.height+"px",n.style.height=s.minorLineHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e-s.minorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-minor "+o):(n.style.left=e-s.minorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-minor "+o),n.style.width=t+"px",n},o.prototype._repaintMajorLine=function(e,t,i,o){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var s=this.props;return n.style.top="top"==i?"0":this.body.domProps.top.height+"px",this.options.rtl?(n.style.left="",n.style.right=e-s.majorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-major "+o):(n.style.left=e-s.majorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-major "+o),n.style.height=s.majorLineHeight+"px",n.style.width=t+"px",n};var O=!(o.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth});e.exports=o},function(e,t,i){function o(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=r(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var i=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(e){i.hammer.on(e,function(e){e.stopPropagation()})}),document&&document.body&&(this.onClick=function(e){!function(e,t){for(;e;){if(e===t)return 1;e=e.parentNode}return}(e.target,t)&&i.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=n(),this.escListener=this.deactivate.bind(this)}var n=i(23),s=i(13),r=i(20),a=i(1);s(o.prototype),o.current=null,o.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},o.prototype.activate=function(){o.current&&o.current.deactivate(),(o.current=this).active=!0,this.dom.overlay.style.display="none",a.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},o.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",a.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},o.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()},e.exports=o},function(e,t,i){function o(e,t){this.body=e,this.defaultOptions={moment:a,locales:h,locale:"en",id:void 0,title:void 0},this.options=s.extend({},this.defaultOptions),t&&t.time?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this.setOptions(t),this._create()}var n=i(20),s=i(1),r=i(31),a=i(2),h=i(47);(o.prototype=new r).setOptions=function(e){e&&s.selectiveExtend(["moment","locale","locales","id"],this.options,e)},o.prototype._create=function(){var e=document.createElement("div");e["custom-time"]=this,e.className="vis-custom-time "+(this.options.id||""),e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var t=document.createElement("div");t.style.position="relative",t.style.top="0px",t.style.left="-10px",t.style.height="100%",t.style.width="20px",e.appendChild(t),this.hammer=new n(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_HORIZONTAL})},o.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},o.prototype.redraw=function(){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));var t=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),i=this.options.locales.en);var o=this.options.title;return void 0===o&&(o=(o=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")).charAt(0).toUpperCase()+o.substring(1)),this.bar.style.left=t+"px",this.bar.title=o,!1},o.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},o.prototype.setCustomTime=function(e){this.customTime=s.convert(e,"Date"),this.redraw()},o.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},o.prototype.setCustomTitle=function(e){this.options.title=e},o.prototype._onDragStart=function(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()},o.prototype._onDrag=function(e){if(this.eventParams.dragging){var t=this.body.util.toScreen(this.eventParams.customTime)+e.deltaX,i=this.body.util.toTime(t);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation()}},o.prototype._onDragEnd=function(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation())},o.customTimeFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("custom-time"))return t["custom-time"];t=t.parentNode}return null},e.exports=o},function(e,t){t.en={current:"current",time:"time"},t.en_EN=t.en,t.en_US=t.en,t.nl={current:"huidige",time:"tijd"},t.nl_NL=t.nl,t.nl_BE=t.nl},function(e,t,i){function o(e,t){this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:r,locales:a,locale:"en"},this.options=n.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(t)}var n=i(1),s=i(31),r=i(2),a=i(47);(o.prototype=new s)._create=function(){var e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e},o.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},o.prototype.setOptions=function(e){e&&n.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,e)},o.prototype.redraw=function(){if(this.options.showCurrentTime){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());var t=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(t),o=this.options.locales[this.options.locale];o||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),o=this.options.locales.en);var n=o.current+" "+o.time+": "+t.format("dddd, MMMM Do YYYY, H:mm:ss");n=n.charAt(0).toUpperCase()+n.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=n}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},o.prototype.start=function(){var i=this;!function e(){i.stop();var t=1/i.body.range.conversion(i.body.domProps.center.width).scale/10;t<30&&(t=30),1e3<t&&(t=1e3),i.redraw(),i.body.emitter.emit("currentTimeTick"),i.currentTimeTimer=setTimeout(e,t)}()},o.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},o.prototype.setCurrentTime=function(e){var t=n.convert(e,"Date").valueOf(),i=(new Date).valueOf();this.offset=t-i,this.redraw()},o.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},e.exports=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="date",r="object",a="moment",h={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:r,boolean:o,function:"function"}},align:{string:i},rtl:{boolean:o,undefined:"undefined"},autoResize:{boolean:o},throttleRedraw:{number:n},clickToUse:{boolean:o},dataAttributes:{string:i,array:"array"},editable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},updateGroup:{boolean:o,undefined:"undefined"},updateTime:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:r}},end:{number:n,date:s,string:i,moment:a},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:r}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:r}},__type__:{object:r}},moment:{function:"function"},groupOrder:{string:i,function:"function"},groupEditable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},order:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:r}},groupOrderSwap:{function:"function"},height:{string:i,number:n},hiddenDates:{start:{date:s,number:n,string:i,moment:a},end:{date:s,number:n,string:i,moment:a},repeat:{string:i},__type__:{object:r,array:"array"}},itemsAlwaysDraggable:{boolean:o},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:r}},margin:{axis:{number:n},item:{horizontal:{number:n,undefined:"undefined"},vertical:{number:n,undefined:"undefined"},__type__:{object:r,number:n}},__type__:{object:r,number:n}},max:{date:s,number:n,string:i,moment:a},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:s,number:n,string:i,moment:a},minHeight:{number:n,string:i},moveable:{boolean:o},multiselect:{boolean:o},multiselectPerGroup:{boolean:o},onAdd:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},order:{function:"function"},orientation:{axis:{string:i,undefined:"undefined"},item:{string:i,undefined:"undefined"},__type__:{string:i,object:r}},selectable:{boolean:o},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},stack:{boolean:o},snap:{function:"function",null:"null"},start:{date:s,number:n,string:i,moment:a},template:{function:"function"},groupTemplate:{function:"function"},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:r}},type:{string:i},width:{string:i,number:n},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},__type__:{object:r}};t.allOptions=h,t.configureOptions={global:{align:["center","left","right"],direction:!1,autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}}},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,o){if(!(Array.isArray(i)||i instanceof h||i instanceof l)&&i instanceof Object){var n=o;o=i,i=n}var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:a,width:null,height:null,maxHeight:null,minHeight:null},this.options=u.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new d(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new p(this.body),this.components.push(this.timeAxis),this.currentTime=new f(this.body),this.components.push(this.currentTime),this.linegraph=new g(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){s.emit("click",s.getEventProperties(e))}),this.on("doubletap",function(e){s.emit("doubleClick",s.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){s.emit("contextmenu",s.getEventProperties(e))},o&&this.setOptions(o),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var s=o(i(26)),r=o(i(29)),a=(i(13),i(20),i(2)),u=i(1),h=i(9),l=i(11),d=i(30),c=i(33),p=i(44),f=i(48),m=i(46),g=i(51),v=i(29).printStyle,y=i(59).allOptions,b=i(59).configureOptions;(n.prototype=new c).setOptions=function(e){!0===r.default.validate(e,y)&&console.log("%cErrors have been found in the supplied options object.",v),c.prototype.setOptions.call(this,e)},n.prototype.setItems=function(e){var t,i=null==this.itemsData;if(t=e?e instanceof h||e instanceof l?e:new h(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.linegraph&&this.linegraph.setItems(t),i)if(null!=this.options.start||null!=this.options.end){var o=null!=this.options.start?this.options.start:null,n=null!=this.options.end?this.options.end:null;this.setWindow(o,n,{animation:!1})}else this.fit({animation:!1})},n.prototype.setGroups=function(e){var t;t=e?e instanceof h||e instanceof l?e:new h(e):null,this.groupsData=t,this.linegraph.setGroups(t)},n.prototype.getLegend=function(e,t,i){return void 0===t&&(t=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[e]?this.linegraph.groups[e].getLegend(t,i):"cannot find group:'"+e+"'"},n.prototype.isGroupVisible=function(e){return void 0!==this.linegraph.groups[e]&&(this.linegraph.groups[e].visible&&(void 0===this.linegraph.options.groups.visibility[e]||1==this.linegraph.options.groups.visibility[e]))},n.prototype.getDataRange=function(){var e=null,t=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var o=0;o<this.linegraph.groups[i].itemsData.length;o++){var n=this.linegraph.groups[i].itemsData[o],s=u.convert(n.x,"Date").valueOf();e=null==e||s<e?s:e,t=null==t||t<s?s:t}return{min:null!=e?new Date(e):null,max:null!=t?new Date(t):null}},n.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,o=t-u.getAbsoluteLeft(this.dom.centerContainer),n=i-u.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(o),r=m.customTimeFromTarget(e),a=u.getTarget(e),h=null;u.hasParent(a,this.timeAxis.dom.foreground)||this.timeAxis2&&u.hasParent(a,this.timeAxis2.dom.foreground)?h="axis":u.hasParent(a,this.linegraph.yAxisLeft.dom.frame)||u.hasParent(a,this.linegraph.yAxisRight.dom.frame)?h="data-axis":u.hasParent(a,this.linegraph.legendLeft.dom.frame)||u.hasParent(a,this.linegraph.legendRight.dom.frame)?h="legend":null!=r?h="custom-time":u.hasParent(a,this.currentTime.bar)?h="current-time":u.hasParent(a,this.dom.center)&&(h="background");var l=[],d=this.linegraph.yAxisLeft,c=this.linegraph.yAxisRight;return d.hidden||l.push(d.screenToValue(n)),c.hidden||l.push(c.screenToValue(n)),{event:e,what:h,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:n,time:s,value:l}},n.prototype._createConfigurator=function(){return new s.default(this,this.dom.container,b)},e.exports=n},function(e,t,i){function o(e,t){this.id=p.randomUUID(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=p.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var o=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,i){o._onAdd(t.items)},update:function(e,t,i){o._onUpdate(t.items)},remove:function(e,t,i){o._onRemove(t.items)}},this.groupListeners={add:function(e,t,i){o._onAddGroups(t.items)},update:function(e,t,i){o._onUpdateGroups(t.items)},remove:function(e,t,i){o._onRemoveGroups(t.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(t),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){o.lastStart=o.body.range.start,o.svg.style.left=p.option.asSize(-o.props.width),o.forceGraphUpdate=!0,o.redraw.call(o)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p=i(1),c=i(8),s=i(9),r=i(11),a=i(31),h=i(52),l=i(54),d=i(58),u=i(55),f=i(57),m=i(56),g="__ungrouped__";(o.prototype=new a)._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new d(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new d(this.body,this.options.legend,"right",this.options.groups),this.show()},o.prototype.setOptions=function(e){if(e){void 0===e.graphHeight&&void 0!==e.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==e.graphHeight&&parseInt((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),p.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,e),p.mergeOptions(this.options,e,"interpolation"),p.mergeOptions(this.options,e,"drawPoints"),p.mergeOptions(this.options,e,"shaded"),p.mergeOptions(this.options,e,"legend"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==e.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==e.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(g)&&this.groups[g].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},o.prototype.setItems=function(e){var t,i=this,o=this.itemsData;if(e){if(!(e instanceof s||e instanceof r))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(o&&(p.forEach(this.itemListeners,function(e,t){o.off(t,e)}),t=o.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;p.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t)}},o.prototype.setGroups=function(e){var t,i=this;if(this.groupsData){p.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null;for(var o=0;o<t.length;o++)this._removeGroup(t[o])}if(e){if(!(e instanceof s||e instanceof r))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var n=this.id;p.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}},o.prototype._onUpdate=function(e){this._updateAllGroupData()},o.prototype._onAdd=function(e){this._onUpdate(e)},o.prototype._onRemove=function(e){this._onUpdate(e)},o.prototype._onUpdateGroups=function(e){this._updateAllGroupData()},o.prototype._onAddGroups=function(e){this._onUpdateGroups(e)},o.prototype._onRemoveGroups=function(e){for(var t=0;t<e.length;t++)this._removeGroup(e[t]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},o.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&("right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])},o.prototype._updateGroup=function(e,t){this.groups.hasOwnProperty(t)?(this.groups[t].update(e),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.updateGroup(t,this.groups[t]),this.legendRight.updateGroup(t,this.groups[t]),this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t)):(this.yAxisLeft.updateGroup(t,this.groups[t]),this.legendLeft.updateGroup(t,this.groups[t]),this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t))):(this.groups[t]=new l(e,t,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.addGroup(t,this.groups[t]),this.legendRight.addGroup(t,this.groups[t])):(this.yAxisLeft.addGroup(t,this.groups[t]),this.legendLeft.addGroup(t,this.groups[t]))),this.legendLeft.redraw(),this.legendRight.redraw()},o.prototype._updateAllGroupData=function(){if(null!=this.itemsData){for(var e={},t=this.itemsData.get(),i={},o=0;o<t.length;o++){null!=(a=(n=t[o]).group)||(a=g),i.hasOwnProperty(a)?i[a]++:i[a]=1}for(o=0;o<t.length;o++){var n;null!=(a=(n=t[o]).group)||(a=g),e.hasOwnProperty(a)||(e[a]=new Array(i[a]));var s=p.bridgeObject(n);s.x=p.convert(n.x,"Date"),s.orginalY=n.y,s.y=Number(n.y);var r=e[a].length-i[a]--;e[a][r]=s}for(var a in this.groups)this.groups.hasOwnProperty(a)&&(e.hasOwnProperty(a)||(e[a]=new Array(0)));for(var a in e)if(e.hasOwnProperty(a))if(0==e[a].length)this.groups.hasOwnProperty(a)&&this._removeGroup(a);else{var h=void 0;null!=this.groupsData&&(h=this.groupsData.get(a)),null==h&&(h={id:a,content:this.options.defaultGroup+a}),this._updateGroup(h,a),this.groups[a].setItems(e[a])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},o.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var t=this.body.range.end-this.body.range.start,i=t!=this.lastVisibleInterval;if(this.lastVisibleInterval=t,1==e&&(this.svg.style.width=p.option.asSize(3*this.props.width),this.svg.style.left=p.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==e||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)e=this._updateGraph()||e,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var o=this.body.range.start-this.lastStart,n=this.body.range.end-this.body.range.start;if(0!=this.props.width){var s=o*(this.props.width/n);this.svg.style.left=-this.props.width-s+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e},o.prototype._getSortedGroupIds=function(){var e=[];for(var t in this.groups)if(this.groups.hasOwnProperty(t)){var i=this.groups[t];1!=i.visible||void 0!==this.options.groups.visibility[t]&&1!=this.options.groups.visibility[t]||e.push({id:t,zIndex:i.options.zIndex})}p.insertSort(e,function(e,t){var i=e.zIndex,o=t.zIndex;return void 0===i&&(i=0),void 0===o&&(o=0),i==o?0:i<o?-1:1});for(var o=new Array(e.length),n=0;n<e.length;n++)o[n]=e[n].id;return o},o.prototype._updateGraph=function(){if(c.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var e,t,i={},o=this.body.util.toGlobalTime(-this.body.domProps.root.width),n=this.body.util.toGlobalTime(2*this.body.domProps.root.width),s=this._getSortedGroupIds();if(0<s.length){var r={};for(this._getRelevantData(s,r,o,n),this._applySampling(s,r),t=0;t<s.length;t++)this._convertXcoordinates(r[s[t]]);if(this._getYRanges(s,r,i),1==this._updateYAxis(s,i))return c.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0;this.abortedGraphUpdate=!1;var a=void 0;for(t=0;t<s.length;t++)e=this.groups[s[t]],!0===this.options.stack&&"line"===this.options.style&&(null!=e.options.excludeFromStacking&&e.options.excludeFromStacking||(null!=a&&(this._stack(r[e.id],r[a.id]),1==e.options.shaded.enabled&&"group"!==e.options.shaded.orientation&&("top"==e.options.shaded.orientation&&"group"!==a.options.shaded.orientation?(a.options.shaded.orientation="group",a.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=a.id))),a=e)),this._convertYcoordinates(r[s[t]],e);var h={};for(t=0;t<s.length;t++)if("line"===(e=this.groups[s[t]]).options.style&&1==e.options.shaded.enabled){var l=r[s[t]];if(null==l||0==l.length)continue;if(h.hasOwnProperty(s[t])||(h[s[t]]=f.calcPath(l,e)),"group"===e.options.shaded.orientation){var d=e.options.shaded.groupId;if(-1===s.indexOf(d)){console.log(e.id+": Unknown shading group target given:"+d);continue}h.hasOwnProperty(d)||(h[d]=f.calcPath(r[d],this.groups[d])),f.drawShading(h[s[t]],e,h[d],this.framework)}else f.drawShading(h[s[t]],e,void 0,this.framework)}for(u.draw(s,r,this.framework),t=0;t<s.length;t++)if(e=this.groups[s[t]],0<r[s[t]].length)switch(e.options.style){case"line":h.hasOwnProperty(s[t])||(h[s[t]]=f.calcPath(r[s[t]],e)),f.draw(h[s[t]],e,this.framework);case"point":case"points":"point"!=e.options.style&&"points"!=e.options.style&&1!=e.options.drawPoints.enabled||m.draw(r[s[t]],e,this.framework)}}}return c.cleanupElements(this.svgElements),!1},o.prototype._stack=function(e,t){for(var i,o,n,s,r,a=i=0;a<e.length;a++){r=s=void 0;for(var h=i;h<t.length;h++){if(t[h].x===e[a].x){s=t[h],r=t[h],i=h;break}if(t[h].x>e[a].x){r=t[h],s=0==h?r:t[h-1],i=h;break}}void 0===r&&(s=t[t.length-1],r=t[t.length-1]),o=r.x-s.x,n=r.y-s.y,e[a].y=0==o?e[a].orginalY+r.y:e[a].orginalY+n/o*(e[a].x-s.x)+s.y}},o.prototype._getRelevantData=function(e,t,i,o){var n,s,r,a;if(0<e.length)for(s=0;s<e.length;s++){var h=(n=this.groups[e[s]]).getItems();if(1==n.options.sort){function l(e,t){return e.getTime()==t.getTime()?0:e<t?-1:1}var d=Math.max(0,p.binarySearchValue(h,i,"x","before",l)),c=Math.min(h.length,p.binarySearchValue(h,o,"x","after",l)+1);c<=0&&(c=h.length);var u=new Array(c-d);for(r=d;r<c;r++)a=n.itemsData[r],u[r-d]=a;t[e[s]]=u}else t[e[s]]=n.itemsData}},o.prototype._applySampling=function(e,t){if(0<e.length)for(var i=0;i<e.length;i++)if(1==this.groups[e[i]].options.sampling){var o=t[e[i]];if(0<o.length){var n,s=o.length,r=s/(this.body.util.toGlobalScreen(o[o.length-1].x)-this.body.util.toGlobalScreen(o[0].x));n=Math.min(Math.ceil(.2*s),Math.max(1,Math.round(r)));for(var a=new Array(s),h=0;h<s;h+=n){a[Math.round(h/n)]=o[h]}t[e[i]]=a.splice(0,Math.round(s/n))}}},o.prototype._getYRanges=function(e,t,i){var o,n,s,r,a=[],h=[];if(0<e.length){for(s=0;s<e.length;s++)o=t[e[s]],r=this.groups[e[s]].options,0<o.length&&(n=this.groups[e[s]],!0===r.stack&&"bar"===r.style?"left"===r.yAxisOrientation?a=a.concat(n.getItems()):h=h.concat(n.getItems()):i[e[s]]=n.getYRange(o,e[s]));u.getStackedYRange(a,i,e,"__barStackLeft","left"),u.getStackedYRange(h,i,e,"__barStackRight","right")}},o.prototype._updateYAxis=function(e,t){var i,o,n=!1,s=!1,r=!1,a=1e9,h=1e9,l=-1e9,d=-1e9;if(0<e.length){for(var c=0;c<e.length;c++){var u=this.groups[e[c]];u&&"right"!=u.options.yAxisOrientation?(s=!0,l=-(a=1e9)):u&&u.options.yAxisOrientation&&(r=!0,d=-(h=1e9))}for(c=0;c<e.length;c++)t.hasOwnProperty(e[c])&&!0!==t[e[c]].ignore&&(i=t[e[c]].min,o=t[e[c]].max,"right"!=t[e[c]].yAxisOrientation?(s=!0,a=i<a?i:a,l=l<o?o:l):(r=!0,h=i<h?i:h,d=d<o?o:d));1==s&&this.yAxisLeft.setRange(a,l),1==r&&this.yAxisRight.setRange(h,d)}n=this._toggleAxisVisiblity(s,this.yAxisLeft)||n,n=this._toggleAxisVisiblity(r,this.yAxisRight)||n,1==r&&1==s?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!s,this.yAxisRight.masterAxis=this.yAxisLeft,n=(0==this.yAxisRight.master&&(this.yAxisLeft.lineOffset=1==r?this.yAxisRight.width:0,n=this.yAxisLeft.redraw()||n),this.yAxisRight.redraw()||n);var p=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(c=0;c<p.length;c++)-1!=e.indexOf(p[c])&&e.splice(e.indexOf(p[c]),1);return n},o.prototype._toggleAxisVisiblity=function(e,t){var i=!1;return 0==e?t.dom.frame.parentNode&&0==t.hidden&&(t.hide(),i=!0):t.dom.frame.parentNode||1!=t.hidden||(t.show(),i=!0),i},o.prototype._convertXcoordinates=function(e){for(var t=this.body.util.toScreen,i=0;i<e.length;i++)e[i].screen_x=t(e[i].x)+this.props.width,e[i].screen_y=e[i].y},o.prototype._convertYcoordinates=function(e,t){var i=this.yAxisLeft,o=Number(this.svg.style.height.replace("px",""));"right"==t.options.yAxisOrientation&&(i=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(i.convertValue(e[n].y));t.setZeroPosition(Math.min(o,i.convertValue(0)))},e.exports=o},function(e,t,i){function o(e,t,i,o){this.id=s.randomUUID(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=o,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=s.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var n=this;this.body.emitter.on("verticalDrag",function(){n.dom.lineContainer.style.top=n.body.domProps.scrollTop+"px"})}var s=i(1),a=i(8),n=i(31),h=i(53);(o.prototype=new n).addGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1},o.prototype.updateGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.amountOfGroups+=1),this.groups[e]=t},o.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],--this.amountOfGroups)},o.prototype.setOptions=function(e){if(e){var t=!1;this.options.orientation!=e.orientation&&void 0!==e.orientation&&(t=!0);s.selectiveDeepExtend(["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"],this.options,e),this.minWidth=Number((""+this.options.width).replace("px","")),!0===t&&this.dom.frame&&(this.hide(),this.show())}},o.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},o.prototype._redrawGroupIcons=function(){a.prepareElements(this.svgElements);var e,t=this.options.iconWidth,i=11.5;e="left"===this.options.orientation?4:this.width-t-4;var o=Object.keys(this.groups);o.sort(function(e,t){return e<t?-1:1});for(var n=0;n<o.length;n++){var s=o[n];!0!==this.groups[s].visible||void 0!==this.linegraphOptions.visibility[s]&&!0!==this.linegraphOptions.visibility[s]||(this.groups[s].getLegend(t,15,this.framework,e,i),i+=19)}a.cleanupElements(this.svgElements),this.iconsRemoved=!1},o.prototype._cleanupIcons=function(){!1===this.iconsRemoved&&(a.prepareElements(this.svgElements),a.cleanupElements(this.svgElements),this.iconsRemoved=!0)},o.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.rtl,this.body.dom.left.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},o.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},o.prototype.setRange=function(e,t){this.range.start=e,this.range.end=t},o.prototype.redraw=function(){var e=!1,t=0;for(var i in this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px",this.groups)this.groups.hasOwnProperty(i)&&(!0!==this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&!0!==this.linegraphOptions.visibility[i]||t++);if(0===this.amountOfGroups||0===t)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=!0===this.options.visible?Number((""+this.options.width).replace("px","")):0;var o=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();var s=this.options.orientation,r=this.options.showMinorLabels,a=this.options.showMajorLabels;o.minorLabelHeight=r?o.minorCharHeight:0,o.majorLabelHeight=a?o.majorCharHeight:0,o.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,o.minorLineHeight=1,o.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,o.majorLineHeight=1,"left"===s?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e},o.prototype._redrawLabels=function(){var o=this;a.prepareElements(this.DOMelements.lines),a.prepareElements(this.DOMelements.labels);var n=this.options.orientation,e=null!=this.options[n].range?this.options[n].range:{},t=!0;null!=e.max&&(this.range.end=e.max,t=!1);var i=!0;null!=e.min&&(this.range.start=e.min,i=!1),this.scale=new h(this.range.start,this.range.end,i,t,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[n].format),!1===this.master&&null!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0,this.scale.getLines().forEach(function(e){var t=e.y,i=e.major;o.options.showMinorLabels&&!1===i&&o._redrawLabel(t-2,e.val,n,"vis-y-axis vis-minor",o.props.minorCharHeight),i&&0<=t&&o._redrawLabel(t-2,e.val,n,"vis-y-axis vis-major",o.props.majorCharHeight),!0===o.master&&(i?o._redrawLine(t,n,"vis-grid vis-horizontal vis-major",o.options.majorLinesOffset,o.props.majorLineWidth):o._redrawLine(t,n,"vis-grid vis-horizontal vis-minor",o.options.minorLinesOffset,o.props.minorLineWidth))});var s=0;void 0!==this.options[n].title&&void 0!==this.options[n].title.text&&(s=this.props.titleCharHeight);var r=!0===this.options.icons?Math.max(this.options.iconWidth,s)+this.options.labelOffsetX+15:s+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-r&&!0===this.options.visible?(this.width=this.maxLabelSize+r,this.options.width=this.width+"px",a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),this.redraw(),!0):this.maxLabelSize<this.width-r&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+r),this.options.width=this.width+"px",a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),this.redraw(),!0):(a.cleanupElements(this.DOMelements.lines),a.cleanupElements(this.DOMelements.labels),!1)},o.prototype.convertValue=function(e){return this.scale.convertValue(e)},o.prototype.screenToValue=function(e){return this.scale.screenToValue(e)},o.prototype._redrawLabel=function(e,t,i,o,n){var s=a.getDOMElement("div",this.DOMelements.labels,this.dom.frame);s.className=o,s.innerHTML=t,"left"===i?(s.style.left="-"+this.options.labelOffsetX+"px",s.style.textAlign="right"):(s.style.right="-"+this.options.labelOffsetX+"px",s.style.textAlign="left"),s.style.top=e-.5*n+this.options.labelOffsetY+"px",t+="";var r=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*r&&(this.maxLabelSize=t.length*r)},o.prototype._redrawLine=function(e,t,i,o,n){if(!0===this.master){var s=a.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);s.className=i,s.innerHTML="","left"===t?s.style.left=this.width-o+"px":s.style.right=this.width-o+"px",s.style.width=n+"px",s.style.top=e+"px"}},o.prototype._redrawTitle=function(e){if(a.prepareElements(this.DOMelements.title),void 0!==this.options[e].title&&void 0!==this.options[e].title.text){var t=a.getDOMElement("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-"+e,t.innerHTML=this.options[e].title.text,void 0!==this.options[e].title.style&&s.addCssText(t,this.options[e].title.style),"left"===e?t.style.left=this.props.titleCharHeight+"px":t.style.right=this.props.titleCharHeight+"px",t.style.width=this.height+"px"}a.cleanupElements(this.DOMelements.title)},o.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),o=document.createElement("div");o.className="vis-y-axis vis-major vis-measure",o.appendChild(i),this.dom.frame.appendChild(o),this.props.majorCharHeight=o.clientHeight,this.props.majorCharWidth=o.clientWidth,this.dom.frame.removeChild(o)}if(!("titleCharHeight"in this.props)){var n=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-title vis-measure",s.appendChild(n),this.dom.frame.appendChild(s),this.props.titleCharHeight=s.clientHeight,this.props.titleCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}},e.exports=o},function(e,t){function i(e,t,i,o,n,s){var r=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],a=!(arguments.length<=7||void 0===arguments[7])&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=n,this.majorCharHeight=s,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=r,this.autoScaleStart=i,this.autoScaleEnd=o,this.formattingFunction=a,i||o){function h(e){var t=e-e%(l.magnitudefactor*l.minorSteps[l.minorStepIdx]);return e%(l.magnitudefactor*l.minorSteps[l.minorStepIdx])>l.magnitudefactor*l.minorSteps[l.minorStepIdx]*.5?t+l.magnitudefactor*l.minorSteps[l.minorStepIdx]:t}var l=this;i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),o&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}i.prototype.setCharHeight=function(e){this.majorCharHeight=e},i.prototype.setHeight=function(e){this.containerHeight=e},i.prototype.determineScale=function(){var e=this._end-this._start;this.scale=this.containerHeight/e;var t=this.majorCharHeight/this.scale,i=0<e?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var o=0;i<0&&(o=i);for(var n=!1,s=o;Math.abs(s)<=Math.abs(i);s++){this.magnitudefactor=Math.pow(10,s);for(var r=0;r<this.minorSteps.length;r++){if(t<=this.magnitudefactor*this.minorSteps[r]){n=!0,this.minorStepIdx=r;break}}if(!0===n)break}},i.prototype.is_major=function(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0},i.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},i.prototype.getFirstMajor=function(){var e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)},i.prototype.formatValue=function(e){var t=e.toPrecision(5);return"function"==typeof this.formattingFunction&&(t=this.formattingFunction(e)),"number"==typeof t?""+t:"string"==typeof t?t:e.toPrecision(5)},i.prototype.getLines=function(){for(var e=[],t=this.getStep(),i=(t-this._start%t)%t,o=this._start+i;1e-5<this._end-o;o+=t)o!=this._start&&e.push({major:this.is_major(o),y:this.convertValue(o),val:this.formatValue(o)});return e},i.prototype.followScale=function(e){function t(){r.magnitudefactor*=2}function i(){r.magnitudefactor/=2}var o=this.minorStepIdx,n=this._start,s=this._end,r=this;e.minorStepIdx<=1&&this.minorStepIdx<=1||1<e.minorStepIdx&&1<this.minorStepIdx||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==o||t(),t()):(this.minorStepIdx=2,1==o||i(),i()));for(var a=(e.getLines(),e.convertValue(0)),h=e.getStep()*e.scale,l=!1,d=0;!l&&d++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var c=this.containerHeight/this.scale;this._start=n,this._end=this._start+c;var u=this._end*this.scale,p=this.magnitudefactor*this.majorSteps[this.minorStepIdx],f=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){var m=a-u;this._end+=m/this.scale,this._start=this._end-c}else this.autoScaleStart?this._start-=f/this.scale:this._start+=p-f/this.scale,this._end=this._start+c;if(!this.autoScaleEnd&&this._end>s+1e-5)i(),l=!1;else{if(!this.autoScaleStart&&this._start<n-1e-5){if(!(this.zeroAlign&&0<=n)){i(),l=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}l=!(this.autoScaleStart&&this.autoScaleEnd&&c<s-n)||(t(),!1)}}},i.prototype.convertValue=function(e){return this.containerHeight-(e-this._start)*this.scale},i.prototype.screenToValue=function(e){return(this.containerHeight-e)/this.scale+this._start},e.exports=i},function(e,t,i){function o(e,t,i,o){this.id=t;this.options=s.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],i),this.usingDefaultStyle=void 0===e.className,this.groupsUsingDefaultStyles=o,this.zeroPosition=0,this.update(e),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===e.visible||e.visible}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(1),r=(i(8),i(55)),a=i(57),h=i(56);o.prototype.setItems=function(e){null!=e?(this.itemsData=e,1==this.options.sort&&s.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]},o.prototype.getItems=function(){return this.itemsData},o.prototype.setZeroPosition=function(e){this.zeroPosition=e},o.prototype.setOptions=function(e){if(void 0!==e){s.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,e),"function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),s.mergeOptions(this.options,e,"interpolation"),s.mergeOptions(this.options,e,"drawPoints"),s.mergeOptions(this.options,e,"shaded"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},o.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===e.visible||e.visible,this.style=e.style,this.setOptions(e.options)},o.prototype.getLegend=function(e,t,i,o,n){null!=i&&null!=i||(i={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]});switch(null!=o&&null!=o||(o=0),null!=n&&null!=n||(n=.5*t),this.options.style){case"line":a.drawIcon(this,o,n,e,t,i);break;case"points":case"point":h.drawIcon(this,o,n,e,t,i);break;case"bar":r.drawIcon(this,o,n,e,t,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},o.prototype.getYRange=function(e){for(var t=e[0].y,i=e[0].y,o=0;o<e.length;o++)t=t>e[o].y?e[o].y:t,i=i<e[o].y?e[o].y:i;return{min:t,max:i,yAxisOrientation:this.options.yAxisOrientation}},e.exports=o},function(e,t,i){function g(e,t){}var v=i(8),y=i(56);g.drawIcon=function(e,t,i,o,n,s){var r=.5*n,a=v.getSVGElement("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",t),a.setAttributeNS(null,"y",i-r),a.setAttributeNS(null,"width",o),a.setAttributeNS(null,"height",2*r),a.setAttributeNS(null,"class","vis-outline");var h=Math.round(.3*o),l=e.options.barChart.width/h,d=Math.round(.4*n),c=Math.round(.75*n),u=Math.round((o-2*h)/3);if(v.drawBar(t+.5*h+u,i+r-d-1,h,d,e.className+" vis-bar",s.svgElements,s.svg,e.style),v.drawBar(t+1.5*h+u+2,i+r-c-1,h,c,e.className+" vis-bar",s.svgElements,s.svg,e.style),1==e.options.drawPoints.enabled){var p={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/l,className:e.className};v.drawPoint(t+.5*h+u,i+r-d-1,p,s.svgElements,s.svg),v.drawPoint(t+1.5*h+u+2,i+r-c-1,p,s.svgElements,s.svg)}},g.draw=function(e,t,i){var o,n,s,r,a,h,l=[],d={},c=0;for(a=0;a<e.length;a++)if("bar"===(r=i.groups[e[a]]).options.style&&!0===r.visible&&(void 0===i.options.groups.visibility[e[a]]||!0===i.options.groups.visibility[e[a]]))for(h=0;h<t[e[a]].length;h++)l.push({screen_x:t[e[a]][h].screen_x,screen_y:t[e[a]][h].screen_y,x:t[e[a]][h].x,y:t[e[a]][h].y,groupId:e[a],label:t[e[a]][h].label}),c+=1;if(0!==c)for(l.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x}),g._getDataIntersections(d,l),a=0;a<l.length;a++){var u=null!=(r=i.groups[l[a].groupId]).options.barChart.minWidth?r.options.barChart.minWidth:.1*r.options.barChart.width,p=0;if(void 0===d[n=l[a].screen_x])a+1<l.length&&(o=Math.abs(l[a+1].screen_x-n)),s=g._getSafeDrawData(o,r,u);else{var f=a+(d[n].amount-d[n].resolved);d[n].resolved,f<l.length&&(o=Math.abs(l[f].screen_x-n)),s=g._getSafeDrawData(o,r,u),d[n].resolved+=1,!0===r.options.stack&&!0!==r.options.excludeFromStacking?l[a].screen_y<r.zeroPosition?(p=d[n].accumulatedNegative,d[n].accumulatedNegative+=r.zeroPosition-l[a].screen_y):(p=d[n].accumulatedPositive,d[n].accumulatedPositive+=r.zeroPosition-l[a].screen_y):!0===r.options.barChart.sideBySide&&(s.width=s.width/d[n].amount,s.offset+=d[n].resolved*s.width-.5*s.width*(d[n].amount+1))}if(v.drawBar(l[a].screen_x+s.offset,l[a].screen_y-p,s.width,r.zeroPosition-l[a].screen_y,r.className+" vis-bar",i.svgElements,i.svg,r.style),!0===r.options.drawPoints.enabled){var m={screen_x:l[a].screen_x,screen_y:l[a].screen_y-p,x:l[a].x,y:l[a].y,groupId:l[a].groupId,label:l[a].label};y.draw([m],r,i,s.offset)}}},g._getDataIntersections=function(e,t){for(var i,o=0;o<t.length;o++)o+1<t.length&&(i=Math.abs(t[o+1].screen_x-t[o].screen_x)),0<o&&(i=Math.min(i,Math.abs(t[o-1].screen_x-t[o].screen_x))),0===i&&(void 0===e[t[o].screen_x]&&(e[t[o].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[t[o].screen_x].amount+=1)},g._getSafeDrawData=function(e,t,i){var o,n;return e<t.options.barChart.width&&0<e?(o=e<i?i:e,n=0,"left"===t.options.barChart.align?n-=.5*e:"right"===t.options.barChart.align&&(n+=.5*e)):(o=t.options.barChart.width,n=0,"left"===t.options.barChart.align?n-=.5*t.options.barChart.width:"right"===t.options.barChart.align&&(n+=.5*t.options.barChart.width)),{width:o,offset:n}},g.getStackedYRange=function(e,t,i,o,n){if(0<e.length){e.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x});var s={};g._getDataIntersections(s,e),t[o]=g._getStackedYRange(s,e),t[o].yAxisOrientation=n,i.push(o)}},g._getStackedYRange=function(e,t){for(var i,o=t[0].screen_y,n=t[0].screen_y,s=0;s<t.length;s++)void 0===e[i=t[s].screen_x]?(o=o>t[s].screen_y?t[s].screen_y:o,n=n<t[s].screen_y?t[s].screen_y:n):t[s].screen_y<0?e[i].accumulatedNegative+=t[s].screen_y:e[i].accumulatedPositive+=t[s].screen_y;for(var r in e)e.hasOwnProperty(r)&&(o=(o=o>e[r].accumulatedNegative?e[r].accumulatedNegative:o)>e[r].accumulatedPositive?e[r].accumulatedPositive:o,n=(n=n<e[r].accumulatedNegative?e[r].accumulatedNegative:n)<e[r].accumulatedPositive?e[r].accumulatedPositive:n);return{min:o,max:n}},e.exports=g},function(e,t,i){function o(e,t){}function d(e,t){return{style:(t=void 0===t?{}:t).style||e.options.drawPoints.style,styles:t.styles||e.options.drawPoints.styles,size:t.size||e.options.drawPoints.size,className:t.className||e.className}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=i(8);o.draw=function(e,t,i,o){o=o||0;for(var n=(h=t,l=l=void 0,(a=i).options&&a.options.drawPoints&&a.options.drawPoints.onRender&&"function"==typeof a.options.drawPoints.onRender&&(l=a.options.drawPoints.onRender),h.group.options&&h.group.options.drawPoints&&h.group.options.drawPoints.onRender&&"function"==typeof h.group.options.drawPoints.onRender&&(l=h.group.options.drawPoints.onRender),l),s=0;s<e.length;s++)if(n){var r=n(e[s],t);!0!==r&&"object"!==(void 0===r?"undefined":c(r))||u.drawPoint(e[s].screen_x+o,e[s].screen_y,d(t,r),i.svgElements,i.svg,e[s].label)}else u.drawPoint(e[s].screen_x+o,e[s].screen_y,d(t),i.svgElements,i.svg,e[s].label);var a,h,l},o.drawIcon=function(e,t,i,o,n,s){var r=.5*n,a=u.getSVGElement("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",t),a.setAttributeNS(null,"y",i-r),a.setAttributeNS(null,"width",o),a.setAttributeNS(null,"height",2*r),a.setAttributeNS(null,"class","vis-outline"),u.drawPoint(t+.5*o,i,d(e),s.svgElements,s.svg)},e.exports=o},function(e,t,i){function o(e,t){}var c=i(8);o.calcPath=function(e,t){if(null!=e&&0<e.length){return 1==t.options.interpolation.enabled?o._catmullRom(e,t):o._linear(e)}},o.drawIcon=function(e,t,i,o,n,s){var r,a,h=.5*n,l=c.getSVGElement("rect",s.svgElements,s.svg);if(l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",i-h),l.setAttributeNS(null,"width",o),l.setAttributeNS(null,"height",2*h),l.setAttributeNS(null,"class","vis-outline"),(r=c.getSVGElement("path",s.svgElements,s.svg)).setAttributeNS(null,"class",e.className),void 0!==e.style&&r.setAttributeNS(null,"style",e.style),r.setAttributeNS(null,"d","M"+t+","+i+" L"+(t+o)+","+i),1==e.options.shaded.enabled&&(a=c.getSVGElement("path",s.svgElements,s.svg),"top"==e.options.shaded.orientation?a.setAttributeNS(null,"d","M"+t+", "+(i-h)+"L"+t+","+i+" L"+(t+o)+","+i+" L"+(t+o)+","+(i-h)):a.setAttributeNS(null,"d","M"+t+","+i+" L"+t+","+(i+h)+" L"+(t+o)+","+(i+h)+"L"+(t+o)+","+i),a.setAttributeNS(null,"class",e.className+" vis-icon-fill"),void 0!==e.options.shaded.style&&""!==e.options.shaded.style&&a.setAttributeNS(null,"style",e.options.shaded.style)),1==e.options.drawPoints.enabled){var d={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};c.drawPoint(t+.5*o,i,d,s.svgElements,s.svg)}},o.drawShading=function(e,t,i,o){if(1==t.options.shaded.enabled){var n=Number(o.svg.style.height.replace("px","")),s=c.getSVGElement("path",o.svgElements,o.svg),r="L";1==t.options.interpolation.enabled&&(r="C");var a,h;h="top"==t.options.shaded.orientation?0:"bottom"==t.options.shaded.orientation?n:Math.min(Math.max(0,t.zeroPosition),n),a="group"==t.options.shaded.orientation&&null!=i&&null!=i?"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,r,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,r,!0)+i[0][0]+","+i[0][1]+" Z":"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,r,!1)+" V"+h+" H"+e[0][0]+" Z",s.setAttributeNS(null,"class",t.className+" vis-fill"),void 0!==t.options.shaded.style&&s.setAttributeNS(null,"style",t.options.shaded.style),s.setAttributeNS(null,"d",a)}},o.draw=function(e,t,i){if(null!=e&&null!=e){var o=c.getSVGElement("path",i.svgElements,i.svg);o.setAttributeNS(null,"class",t.className),void 0!==t.style&&o.setAttributeNS(null,"style",t.style);var n="L";1==t.options.interpolation.enabled&&(n="C"),o.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,n,!1))}},o.serializePath=function(e,t,i){if(e.length<2)return"";var o=t;if(i)for(var n=e.length-2;0<n;n--)o+=e[n][0]+","+e[n][1]+" ";else for(n=1;n<e.length;n++)o+=e[n][0]+","+e[n][1]+" ";return o},o._catmullRomUniform=function(e){var t,i,o,n,s,r,a=[];a.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var h=e.length,l=0;l<h-1;l++)t=0==l?e[0]:e[l-1],i=e[l],o=e[l+1],n=l+2<h?e[l+2]:o,s={screen_x:(-t.screen_x+6*i.screen_x+o.screen_x)*(1/6),screen_y:(-t.screen_y+6*i.screen_y+o.screen_y)*(1/6)},r={screen_x:(i.screen_x+6*o.screen_x-n.screen_x)*(1/6),screen_y:(i.screen_y+6*o.screen_y-n.screen_y)*(1/6)},a.push([s.screen_x,s.screen_y]),a.push([r.screen_x,r.screen_y]),a.push([o.screen_x,o.screen_y]);return a},o._catmullRom=function(e,t){var i=t.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(e);var o,n,s,r,a,h,l,d,c,u,p,f,m,g,v,y,b,w,_,x=[];x.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var k=e.length,S=0;S<k-1;S++)o=0==S?e[0]:e[S-1],n=e[S],s=e[S+1],r=S+2<k?e[S+2]:s,l=Math.sqrt(Math.pow(o.screen_x-n.screen_x,2)+Math.pow(o.screen_y-n.screen_y,2)),d=Math.sqrt(Math.pow(n.screen_x-s.screen_x,2)+Math.pow(n.screen_y-s.screen_y,2)),c=Math.sqrt(Math.pow(s.screen_x-r.screen_x,2)+Math.pow(s.screen_y-r.screen_y,2)),g=Math.pow(c,i),y=Math.pow(c,2*i),v=Math.pow(d,i),b=Math.pow(d,2*i),_=Math.pow(l,i),u=2*(w=Math.pow(l,2*i))+3*_*v+b,p=2*y+3*g*v+b,0<(f=3*_*(_+v))&&(f=1/f),0<(m=3*g*(g+v))&&(m=1/m),a={screen_x:(-b*o.screen_x+u*n.screen_x+w*s.screen_x)*f,screen_y:(-b*o.screen_y+u*n.screen_y+w*s.screen_y)*f},h={screen_x:(y*n.screen_x+p*s.screen_x-b*r.screen_x)*m,screen_y:(y*n.screen_y+p*s.screen_y-b*r.screen_y)*m},0==a.screen_x&&0==a.screen_y&&(a=n),0==h.screen_x&&0==h.screen_y&&(h=s),x.push([a.screen_x,a.screen_y]),x.push([h.screen_x,h.screen_y]),x.push([s.screen_x,s.screen_y]);return x},o._linear=function(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i].screen_x,e[i].screen_y]);return t},e.exports=o},function(e,t,i){function o(e,t,i,o){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=n.extend({},this.defaultOptions),this.linegraphOptions=o,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(t)}var n=i(1),l=i(8),s=i(31);(o.prototype=new s).clear=function(){this.groups={},this.amountOfGroups=0},o.prototype.addGroup=function(e,t){1!=t.options.excludeFromLegend&&(this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1)},o.prototype.updateGroup=function(e,t){this.groups[e]=t},o.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],--this.amountOfGroups)},o.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},o.prototype.setOptions=function(e){n.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,e)},o.prototype.redraw=function(){var e=0,t=Object.keys(this.groups);t.sort(function(e,t){return e<t?-1:1});for(var i=0;i<t.length;i++){var o=t[i];1!=this.groups[o].visible||void 0!==this.linegraphOptions.visibility[o]&&1!=this.linegraphOptions.visibility[o]||e++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==e)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(i=0;i<t.length;i++){o=t[i];1!=this.groups[o].visible||void 0!==this.linegraphOptions.visibility[o]&&1!=this.linegraphOptions.visibility[o]||(s+=this.groups[o].content+"<br />")}this.dom.textArea.innerHTML=s,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},o.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=Object.keys(this.groups);e.sort(function(e,t){return e<t?-1:1}),l.resetElements(this.svgElements);var t=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(t.replace("px","")),o=i,n=this.options.iconSize,s=.75*this.options.iconSize,r=i+.5*s+3;this.svg.style.width=n+5+i+"px";for(var a=0;a<e.length;a++){var h=e[a];1!=this.groups[h].visible||void 0!==this.linegraphOptions.visibility[h]&&1!=this.linegraphOptions.visibility[h]||(this.groups[h].getLegend(n,s,this.framework,o,r),r+=s+this.options.iconSpacing)}}},e.exports=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="date",r="object",a="moment",h={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:r,boolean:o,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:i},sort:{boolean:o},sampling:{boolean:o},stack:{boolean:o},graphHeight:{string:i,number:n},shaded:{enabled:{boolean:o},orientation:{string:["bottom","top","zero","group"]},groupId:{object:r},__type__:{boolean:o,object:r}},style:{string:["line","bar","points"]},barChart:{width:{number:n},minWidth:{number:n},sideBySide:{boolean:o},align:{string:["left","center","right"]},__type__:{object:r}},interpolation:{enabled:{boolean:o},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:n},__type__:{object:r,boolean:o}},drawPoints:{enabled:{boolean:o},onRender:{function:"function"},size:{number:n},style:{string:["square","circle"]},__type__:{object:r,boolean:o,function:"function"}},dataAxis:{showMinorLabels:{boolean:o},showMajorLabels:{boolean:o},icons:{boolean:o},width:{string:i,number:n},visible:{boolean:o},alignZeros:{boolean:o},left:{range:{min:{number:n},max:{number:n},__type__:{object:r}},format:{function:"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:r}},__type__:{object:r}},right:{range:{min:{number:n},max:{number:n},__type__:{object:r}},format:{function:"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:r}},__type__:{object:r}},__type__:{object:r}},legend:{enabled:{boolean:o},icons:{boolean:o},left:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:r}},right:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:r}},__type__:{object:r,boolean:o}},groups:{visibility:{any:"any"},__type__:{object:r}},autoResize:{boolean:o},throttleRedraw:{number:n},clickToUse:{boolean:o},end:{number:n,date:s,string:i,moment:a},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:r}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:r}},__type__:{object:r}},moment:{function:"function"},height:{string:i,number:n},hiddenDates:{start:{date:s,number:n,string:i,moment:a},end:{date:s,number:n,string:i,moment:a},repeat:{string:i},__type__:{object:r,array:"array"}},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:r}},max:{date:s,number:n,string:i,moment:a},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:s,number:n,string:i,moment:a},minHeight:{number:n,string:i},moveable:{boolean:o},multiselect:{boolean:o},orientation:{string:i},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},start:{date:s,number:n,string:i,moment:a},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:r}},width:{string:i,number:n},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},zIndex:{number:n},__type__:{object:r}};t.allOptions=h,t.configureOptions={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}}},function(e,i,t){i.util=t(1),i.DOMutil=t(8),i.DataSet=t(9),i.DataView=t(11),i.Queue=t(10),i.Network=t(61),i.network={Images:t(62),dotparser:t(118),gephiParser:t(119),allOptions:t(114)},i.network.convertDot=function(e){return i.network.dotparser.DOTToGraph(e)},i.network.convertGephi=function(e,t){return i.network.gephiParser.parseGephi(e,t)},i.moment=t(2),i.Hammer=t(20),i.keycharm=t(23)},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i){var o=this;if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:D,clickToUse:!1},S.extend(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new s.default(function(){return o.body.emitter.emit("_requestRedraw")}),this.groups=new r.default,this.canvas=new u.default(this.body),this.selectionHandler=new m.default(this.body,this.canvas),this.interactionHandler=new f.default(this.body,this.canvas,this.selectionHandler),this.view=new p.default(this.body,this.canvas),this.renderer=new c.default(this.body,this.canvas),this.physics=new l.default(this.body),this.layoutEngine=new g.default(this.body),this.clustering=new d.default(this.body),this.manipulation=new v.default(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new a.default(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new h.default(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new x.default(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(t)}var s=o(i(62)),r=o(i(63)),a=o(i(64)),h=o(i(84)),l=o(i(93)),d=o(i(102)),c=o(i(105)),u=o(i(106)),p=o(i(107)),f=o(i(108)),m=o(i(111)),g=o(i(112)),v=o(i(113)),y=o(i(26)),b=i(29),w=o(b),_=i(114),x=o(i(115));i(117);var k=i(13),S=i(1),O=(i(9),i(11),i(118)),C=i(119),M=i(45),D=i(120);k(n.prototype),n.prototype.setOptions=function(e){var t=this;if(void 0!==e){!0===w.default.validate(e,_.allOptions)&&console.log("%cErrors have been found in the supplied options object.",b.printStyle);if(S.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,e),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),void 0!==e.groups&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new y.default(this,this.body.container,_.configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(e.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};S.deepExtend(i.nodes,this.nodesHandler.options),S.deepExtend(i.edges,this.edgesHandler.options),S.deepExtend(i.layout,this.layoutEngine.options),S.deepExtend(i.interaction,this.selectionHandler.options),S.deepExtend(i.interaction,this.renderer.options),S.deepExtend(i.interaction,this.interactionHandler.options),S.deepExtend(i.manipulation,this.manipulation.options),S.deepExtend(i.physics,this.physics.options),S.deepExtend(i.global,this.canvas.options),S.deepExtend(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==e.clickToUse?!0===e.clickToUse?void 0===this.activator&&(this.activator=new M(this.canvas.frame),this.activator.on("change",function(){t.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},n.prototype._updateVisibleIndices=function(){var e=this.body.nodes,t=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],e)e.hasOwnProperty(i)&&!1===e[i].options.hidden&&this.body.nodeIndices.push(e[i].id);for(var o in t)t.hasOwnProperty(o)&&!1===t[o].options.hidden&&this.body.edgeIndices.push(t[o].id)},n.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e._updateVisibleIndices(),e.body.emitter.emit("_requestRedraw"),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})},n.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=O.DOTToGraph(e.dot);this.setData(t)}else if(e&&e.gephi){console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=C.parseGephi(e.gephi);this.setData(i)}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},n.prototype.destroy=function(){for(var e in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)delete this.body.nodes[e];for(var t in this.body.edges)delete this.body.edges[t];S.recursiveDOMDelete(this.body.container)},n.prototype._updateValueRange=function(e){var t,i=void 0,o=void 0,n=0;for(t in e)if(e.hasOwnProperty(t)){var s=e[t].getValue();void 0!==s&&(i=void 0===i?s:Math.min(s,i),o=void 0===o?s:Math.max(s,o),n+=s)}if(void 0!==i&&void 0!==o)for(t in e)e.hasOwnProperty(t)&&e[t].setValueRange(i,o,n)},n.prototype.isActive=function(){return!this.activator||this.activator.active},n.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},n.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},n.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},n.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},n.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},n.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},n.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},n.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},n.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},n.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},n.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},n.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},n.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},n.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},n.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},n.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},n.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},n.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},n.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},n.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},n.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},n.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},n.prototype.getConnectedNodes=function(e){return void 0!==this.body.nodes[e]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},n.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},n.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},n.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},n.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},n.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},n.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},n.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},n.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},n.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},n.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},n.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},n.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},n.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},n.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},n.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},n.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},n.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},n.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},n.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e},e.exports=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"_addImageToCache",value:function(e,t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),this.images[e]=t}},{key:"_tryloadBrokenUrl",value:function(e,t,i){var o=this;void 0!==e&&void 0!==t&&void 0!==i&&(i.onerror=function(){console.error("Could not load brokenImage:",t),o._addImageToCache(e,new Image)},i.src=t)}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t,i){var o=this,n=this.images[e];if(n)return n;var s=new Image;return s.onload=function(){o._addImageToCache(e,s),o._redrawWithImage(s)},s.onerror=function(){console.error("Could not load image:",e),o._tryloadBrokenUrl(e,t,s)},s.src=e,s}}]),o);function o(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.images={},this.imageBroken={},this.callback=e}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e},n=i(1),s=(o(r,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(void 0!==e)for(var i in e)if(e.hasOwnProperty(i)&&-1===t.indexOf(i)){var o=e[i];this.add(i,o)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(e){var t=this.groups[e];if(void 0===t)if(!1===this.options.useDefaultGroups&&0<this.groupsArray.length){var i=this.groupIndex%this.groupsArray.length;this.groupIndex++,(t={}).color=this.groups[this.groupsArray[i]],this.groups[e]=t}else{var o=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(t={}).color=this.defaultGroups[o],this.groups[e]=t}return t}},{key:"add",value:function(e,t){return this.groups[e]=t,this.groupsArray.push(e),t}}]),r);function r(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},n.extend(this.options,this.defaultOptions)}function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=s},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e},s=o(i(65)),r=o(i(66)),a=i(1),h=i(9),l=i(11),d=(n(c,[{key:"bindEventListeners",value:function(){var i=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(i.nodesListeners,function(e,t){i.body.data.nodes&&i.body.data.nodes.off(t,e)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){if(s.default.parseOptions(this.options,e),void 0!==e.shape)for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&this.body.nodes[t].updateShape();if(void 0!==e.font)for(var i in r.default.parseOptions(this.options.font,e),this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i]._reset());if(void 0!==e.size)for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.body.nodes[o]._reset();void 0===e.hidden&&void 0===e.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],o=this.body.data.nodes;if(e instanceof h||e instanceof l)this.body.data.nodes=e;else if(Array.isArray(e))this.body.data.nodes=new h,this.body.data.nodes.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new h}o&&a.forEach(this.nodesListeners,function(e,t){o.off(t,e)}),this.body.nodes={},this.body.data.nodes&&function(){var i=t;a.forEach(t.nodesListeners,function(e,t){i.body.data.nodes.on(t,e)});var e=t.body.data.nodes.getIds();t.add(e,!0)}(),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=void 0,o=[],n=0;n<e.length;n++){i=e[n];var s=this.body.data.nodes.get(i),r=this.create(s);o.push(r),this.body.nodes[i]=r}this.layoutEngine.positionInitially(o),!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t){for(var i=this.body.nodes,o=!1,n=0;n<e.length;n++){var s=e[n],r=i[s],a=t[n];void 0!==r?o=r.setOptions(a):(o=!0,r=this.create(a),i[s]=r)}!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,i=0;i<e.length;i++)delete t[e[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){return new(arguments.length<=1||void 0===arguments[1]?s.default:arguments[1])(e,this.body,this.images,this.groups,this.options)}},{key:"refresh",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this.body.nodes;for(var i in t){var o=void 0;t.hasOwnProperty(i)&&(o=t[i]);var n=this.body.data.nodes._data[i];void 0!==o&&void 0!==n&&(!0===e&&o.setOptions({x:null,y:null}),o.setOptions({fixed:!1}),o.setOptions(n))}}},{key:"getPositions",value:function(e){var t={};if(void 0!==e){if(!0===Array.isArray(e)){for(var i=0;i<e.length;i++)if(void 0!==this.body.nodes[e[i]]){var o=this.body.nodes[e[i]];t[e[i]]={x:Math.round(o.x),y:Math.round(o.y)}}}else if(void 0!==this.body.nodes[e]){var n=this.body.nodes[e];t[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(var s=0;s<this.body.nodeIndices.length;s++){var r=this.body.nodes[this.body.nodeIndices[s]];t[this.body.nodeIndices[s]]={x:Math.round(r.x),y:Math.round(r.y)}}return t}},{key:"storePositions",value:function(){var e=[],t=this.body.data.nodes.getDataSet();for(var i in t._data)if(t._data.hasOwnProperty(i)){var o=this.body.nodes[i];t._data[i].x==Math.round(o.x)&&t._data[i].y==Math.round(o.y)||e.push({id:o.id,x:Math.round(o.x),y:Math.round(o.y)})}t.update(e)}},{key:"getBoundingBox",value:function(e){return void 0!==this.body.nodes[e]?this.body.nodes[e].shape.boundingBox:void 0}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],o={},n=0;n<i.edges.length;n++){var s=i.edges[n];s.toId==i.id?void 0===o[s.fromId]&&(t.push(s.fromId),o[s.fromId]=!0):s.fromId==i.id&&void 0===o[s.toId]&&(t.push(s.toId),o[s.toId]=!0)}return t}},{key:"getConnectedEdges",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],o=0;o<i.edges.length;o++)t.push(i.edges[o].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,i){var o=this;void 0!==this.body.nodes[e]?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(i),setTimeout(function(){o.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",e)}}]),c);function c(e,t,i,o){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,c),this.body=e,this.images=t,this.groups=i,this.layoutEngine=o,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(e,t){n.add(t.items)},update:function(e,t){n.update(t.items,t.data)},remove:function(e,t){n.remove(t.items)}},this.options={},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,o){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}function u(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=d},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&k(e.prototype,t),i&&k(e,i),e},s=o(i(66)),r=o(i(67)),a=o(i(69)),h=o(i(71)),l=o(i(72)),d=o(i(73)),c=o(i(75)),u=o(i(76)),p=o(i(77)),f=o(i(78)),m=o(i(79)),g=o(i(80)),v=o(i(81)),y=o(i(82)),b=o(i(83)),w=(o(i(29)),i(1)),_=(n(x,[{key:"attachEdge",value:function(e){-1===this.edges.indexOf(e)&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t=this.edges.indexOf(e);-1!=t&&this.edges.splice(t,1)}},{key:"setOptions",value:function(e){var t=this.options.shape;if(e){if(void 0!==e.id&&(this.id=e.id),void 0===this.id)throw"Node must have an id";if(void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=parseFloat(e.value)),"number"==typeof e.group||"string"==typeof e.group&&""!=e.group){var i=this.grouplist.get(e.group);w.deepExtend(this.options,i),this.options.color=w.parseColor(this.options.color)}if(x.parseOptions(this.options,e,!0,this.globalOptions),void 0!==this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}return this.updateLabelModule(),this.updateShape(t),void 0!==e.hidden||void 0!==e.physics}}},{key:"updateLabelModule",value:function(){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj);else switch(this.options.shape){case"box":this.shape=new r.default(this.options,this.body,this.labelModule);break;case"circle":this.shape=new a.default(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new h.default(this.options,this.body,this.labelModule,this.imageObj);break;case"database":this.shape=new l.default(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new d.default(this.options,this.body,this.labelModule);break;case"dot":this.shape=new c.default(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new u.default(this.options,this.body,this.labelModule);break;case"icon":this.shape=new p.default(this.options,this.body,this.labelModule);break;case"image":this.shape=new f.default(this.options,this.body,this.labelModule,this.imageObj);break;case"square":this.shape=new m.default(this.options,this.body,this.labelModule);break;case"star":this.shape=new g.default(this.options,this.body,this.labelModule);break;case"text":this.shape=new v.default(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new y.default(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new b.default(this.options,this.body,this.labelModule);break;default:this.shape=new u.default(this.options,this.body,this.labelModule)}this._reset()}},{key:"select",value:function(){this.selected=!0,this._reset()}},{key:"unselect",value:function(){this.selected=!1,this._reset()}},{key:"_reset",value:function(){this.shape.width=void 0,this.shape.height=void 0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*s}this.options.size=this.options.scaling.min+o*n}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){this.shape.draw(e,this.x,this.y,this.selected,this.hover)}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){this.shape.resize(e,this.selected)}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(w.selectiveNotDeepExtend(["color","font","fixed","shadow"],e,t,i),w.mergeOptions(e,t,"shadow",i,o),void 0!==t.color&&null!==t.color){var n=w.parseColor(t.color);w.fillIfDefined(e.color,n)}else!0===i&&null===t.color&&(e.color=w.bridgeObject(o.color));void 0!==t.fixed&&null!==t.fixed&&("boolean"==typeof t.fixed?(e.fixed.x=t.fixed,e.fixed.y=t.fixed):(void 0!==t.fixed.x&&"boolean"==typeof t.fixed.x&&(e.fixed.x=t.fixed.x),void 0!==t.fixed.y&&"boolean"==typeof t.fixed.y&&(e.fixed.y=t.fixed.y))),void 0!==t.font&&null!==t.font?s.default.parseOptions(e.font,t):!0===i&&null===t.font&&(e.font=w.bridgeObject(o.font)),void 0!==t.scaling&&w.mergeOptions(e.scaling,t.scaling,"label",i,o.scaling)}}]),x);function x(e,t,i,o,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,x),this.options=w.bridgeObject(n),this.globalOptions=n,this.body=t,this.edges=[],this.id=void 0,this.imagelist=i,this.grouplist=o,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new s.default(this.body,this.options,!1),this.setOptions(e)}function k(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=_},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(1),r=(o(a,[{key:"setOptions",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.nodeOptions=e,this.fontOptions=s.deepExtend({},e.font,!0),void 0!==e.label&&(this.labelDirty=!0),void 0!==e.font&&(a.parseOptions(this.fontOptions,e,t),"string"==typeof e.font?this.baseSize=this.fontOptions.size:"object"===n(e.font)&&void 0!==e.font.size&&(this.baseSize=e.font.size))}},{key:"draw",value:function(e,t,i,o){var n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];if(void 0!==this.nodeOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.nodeOptions.label&&s<this.nodeOptions.scaling.label.drawThreshold-1||(this.calculateLabelSize(e,o,t,i,n),this._drawBackground(e),this._drawText(e,o,t,i,n))}}},{key:"_drawBackground",value:function(e){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background)if(e.fillStyle=this.fontOptions.background,this.isEdgeLabel)switch(this.fontOptions.align){case"middle":e.fillRect(.5*-this.size.width,.5*-this.size.height,this.size.width,this.size.height);break;case"top":e.fillRect(.5*-this.size.width,-(this.size.height+2),this.size.width,this.size.height);break;case"bottom":e.fillRect(.5*-this.size.width,2,this.size.width,this.size.height);break;default:e.fillRect(this.size.left,this.size.top-1,this.size.width,this.size.height)}else e.fillRect(this.size.left,this.size.top-1,this.size.width,this.size.height)}},{key:"_drawText",value:function(e,t,i,o){var n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4],s=this.fontOptions.size,r=s*this.body.view.scale;r>=this.nodeOptions.scaling.label.maxVisible&&(s=Number(this.nodeOptions.scaling.label.maxVisible)/this.body.view.scale);var a=this.size.yLine,h=this._getColor(r),l=m(h,2),d=l[0],c=l[1],u=this._setAlignment(e,i,a,n),p=m(u,2);i=p[0],a=p[1],e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+s+"px "+this.fontOptions.face,e.fillStyle=d,this.isEdgeLabel||"left"!==this.fontOptions.align?e.textAlign="center":(e.textAlign=this.fontOptions.align,i-=.5*this.size.width),0<this.fontOptions.strokeWidth&&(e.lineWidth=this.fontOptions.strokeWidth,e.strokeStyle=c,e.lineJoin="round");for(var f=0;f<this.lineCount;f++)0<this.fontOptions.strokeWidth&&e.strokeText(this.lines[f],i,a),e.fillText(this.lines[f],i,a),a+=s}},{key:"_setAlignment",value:function(e,t,i,o){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(i=t=0,"top"===this.fontOptions.align?(e.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(e.textBaseline="hanging",i+=4):e.textBaseline="middle"):e.textBaseline=o,[t,i]}},{key:"_getColor",value:function(e){var t=this.fontOptions.color||"#000000",i=this.fontOptions.strokeColor||"#ffffff";if(e<=this.nodeOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.nodeOptions.scaling.label.drawThreshold-e)));t=s.overrideOpacity(t,o),i=s.overrideOpacity(i,o)}return[t,i]}},{key:"getTextSize",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return{width:this._processLabel(e,t),height:this.fontOptions.size*this.lineCount,lineCount:this.lineCount}}},{key:"calculateLabelSize",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3],n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];!0===this.labelDirty&&(this.size.width=this._processLabel(e,t)),this.size.height=this.fontOptions.size*this.lineCount,this.size.left=i-.5*this.size.width,this.size.top=o-.5*this.size.height,this.size.yLine=o+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===n&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4),this.labelDirty=!1}},{key:"_processLabel",value:function(e,t){var i=0,o=[""],n=0;if(void 0!==this.nodeOptions.label){n=(o=String(this.nodeOptions.label).split("\n")).length,e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+this.fontOptions.size+"px "+this.fontOptions.face,i=e.measureText(o[0]).width;for(var s=1;s<n;s++){var r=e.measureText(o[s]).width;i=i<r?r:i}}return this.lines=o,this.lineCount=n,i}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if("string"==typeof t.font){var o=t.font.split(" ");e.size=o[0].replace("px",""),e.face=o[1],e.color=o[2]}else"object"===n(t.font)&&s.fillIfDefined(e,t.font,i);e.size=Number(e.size)}}]),a);function a(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=i}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=i.width+10,this.height=i.height+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.lineWidth=o?r:s,e.lineWidth/=this.body.view.scale,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background;var a=this.options.shapeProperties.borderRadius;e.roundRect(this.left,this.top,this.width,this.height,a),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),0<s&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height;var n=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-n,this.boundingBox.top=this.top-n,this.boundingBox.bottom=this.top+this.height+n,this.boundingBox.right=this.left+this.width+n}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"_distanceToBorder",value:function(e,t){var i=this.options.borderWidth;return this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}},{key:"enableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e){if(!1!==this.options.shapeProperties.borderDashes)if(void 0!==e.setLineDash){var t=this.options.shapeProperties.borderDashes;!0===t&&(t=[5,15]),e.setLineDash(t)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1}},{key:"disableBorderDashes",value:function(e){!1!==this.options.shapeProperties.borderDashes&&(void 0!==e.setLineDash?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1))}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=t,this.labelModule=i,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.boundingBox={top:0,left:0,right:0,bottom:0}}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(70),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t),o=Math.max(i.width,i.height)+10;this.options.size=o/2,this.width=o,this.height=o,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2,this._drawRawCircle(e,t,i,o,n,this.options.size),this.boundingBox.top=i-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=i+this.options.size,this.updateBoundingBox(t,i),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"setOptions",value:function(e,t){this.options=e,t&&(this.imageObj=t)}},{key:"_resizeImage",value:function(){var e,t,i,o=!1;this.imageObj.width&&this.imageObj.height?!1===this.imageLoaded&&(o=this.imageLoaded=!0):this.imageLoaded=!1,this.width&&this.height&&!0!==o||(this.imageObj.width&&this.imageObj.height&&(t=e=0),t=!1===this.options.shapeProperties.useImageSize?this.imageObj.width>this.imageObj.height?(i=this.imageObj.width/this.imageObj.height,e=2*this.options.size*i||this.imageObj.width,2*this.options.size||this.imageObj.height):(i=this.imageObj.width&&this.imageObj.height?this.imageObj.height/this.imageObj.width:1,e=2*this.options.size,2*this.options.size*i):(e=this.imageObj.width,this.imageObj.height),this.width=e,this.height=t,this.radius=.5*this.width)}},{key:"_drawRawCircle",value:function(e,t,i,o,n,s){var r=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,h=(o?a:r)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.circle(t,i,s),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),0<h&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore()}},{key:"_drawImageAtPosition",value:function(e){if(0!=this.imageObj.width){e.globalAlpha=1,this.enableShadow(e);var t=this.imageObj.width/this.width/this.body.view.scale;if(2<t&&!0===this.options.shapeProperties.interpolation){var i=this.imageObj.width,o=this.imageObj.height,n=document.createElement("canvas");n.width=i,n.height=i;var s=n.getContext("2d");t*=.5,i*=.5,o*=.5,s.drawImage(this.imageObj,0,0,i,o);for(var r=0,a=1;2<t&&a<4;)s.drawImage(n,r,0,i,o,r+i,0,i/2,o/2),r+=i,t*=.5,i*=.5,o*=.5,a+=1;e.drawImage(n,r,0,i,o,this.left,this.top,this.width,this.height)}else e.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(e)}}},{key:"_drawImageLabel",value:function(e,t,i,o){var n,s=0;if(void 0!==this.height){s=.5*this.height;var r=this.labelModule.getTextSize(e);1<=r.lineCount&&(s+=r.height/2)}n=i+s,this.options.label&&(this.labelOffset=s),this.labelModule.draw(e,t,n,o,"hanging")}}]),a);function a(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i));return o.labelOffset=0,o.imageLoaded=!1,o}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(70),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(){if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){if(!this.width){var e=2*this.options.size;this.width=e,this.height=e,this._swapToImageResizeWhenImageLoaded=!0,this.radius=.5*this.width}}else this._swapToImageResizeWhenImageLoaded&&(this.width=void 0,this.height=void 0,this._swapToImageResizeWhenImageLoaded=!1),this._resizeImage()}},{key:"draw",value:function(e,t,i,o,n){this.resize(),this.left=t-this.width/2,this.top=i-this.height/2;var s=Math.min(.5*this.height,.5*this.width);this._drawRawCircle(e,t,i,o,n,s),e.save(),e.clip(),this._drawImageAtPosition(e),e.restore(),this._drawImageLabel(e,t,i,o),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),a);function a(e,t,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i));return n.imageObj=o,n._swapToImageResizeWhenImageLoaded=!0,n}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t).width+10;this.width=i,this.height=i,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.database(t-this.width/2,i-.5*this.height,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),0<a&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"diamond",4,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_resizeShape",value:function(){if(void 0===this.width){var e=2*this.options.size;this.width=e,this.height=e,this.radius=.5*this.width}}},{key:"_drawShape",value:function(e,t,i,o,n,s,r){this._resizeShape(),this.left=o-this.width/2,this.top=n-this.height/2;var a=this.options.borderWidth,h=this.options.borderWidthSelected||2*this.options.borderWidth,l=(s?h:a)/this.body.view.scale;if(e.lineWidth=Math.min(this.width,l),e.strokeStyle=s?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,e.fillStyle=s?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,e[t](o,n,this.options.size),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),0<l&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),void 0!==this.options.label){var d=n+.5*this.height+3;this.labelModule.draw(e,o,d,s,"hanging")}this.updateBoundingBox(o,n)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3))}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"circle",2,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),this.options.size}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=1.5*i.width,this.height=2*i.height,this.width<this.height&&(this.width=this.height),this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-.5*this.width,this.top=i-.5*this.height;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.ellipse(this.left,this.top,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),0<a&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=.5*this.width,o=.5*this.height,n=Math.sin(t)*i,s=Math.cos(t)*o;return i*o/Math.sqrt(n*n+s*s)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){if(void 0===this.width){var t=Number(this.options.icon.size),i=Number(this.options.icon.size);this.width=t+10,this.height=i+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e),this.options.icon.size=this.options.icon.size||50,this.left=t-.5*this.width,this.top=i-.5*this.height,this._icon(e,t,i,o),void 0!==this.options.label&&this.labelModule.draw(e,t,i+.5*this.height+5,o),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-.5*this.options.icon.size,this.boundingBox.left=e-.5*this.options.icon.size,this.boundingBox.right=e+.5*this.options.icon.size,this.boundingBox.bottom=t+.5*this.options.icon.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(e,t,i,o){var n=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=(o?"bold ":"")+n+"px "+this.options.icon.face,e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e),e.fillText(this.options.icon.code,t,i),this.disableShadow(e)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(70),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(){this._resizeImage()}},{key:"draw",value:function(e,t,i,o,n){if(this.resize(),this.left=t-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.beginPath(),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),e.fill(),e.save(),0<a&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),e.closePath()}this._drawImageAtPosition(e),this._drawImageLabel(e,t,i,o||n),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.resize(),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i));return n.imageObj=o,n}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"square",2,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"star",4,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(68),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=i.width+10,this.height=i.height+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o||n),this.left=t-this.width/2,this.top=i-this.height/2,this.enableShadow(e),this.labelModule.draw(e,t,i,o||n),this.disableShadow(e),this.updateBoundingBox(t,i,e,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"triangle",3,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(74),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"triangleDown",3,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e},s=o(i(85)),r=o(i(66)),a=i(1),h=i(9),l=i(11),d=(n(c,[{key:"bindEventListeners",value:function(){var r=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){"dynamic"===e&&(e="continuous");var t=!1;for(var i in r.body.edges)if(r.body.edges.hasOwnProperty(i)){var o=r.body.edges[i],n=r.body.data.edges._data[i];if(void 0!==n){var s=n.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===e?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:e}}),t=!0)}}!0===t&&r.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){r.reconnectEdges(),r.markAllEdgesAsDirty()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(r.edgesListeners,function(e,t){r.body.data.edges&&r.body.data.edges.off(t,e)}),delete r.body.functions.createEdge,delete r.edgesListeners.add,delete r.edgesListeners.update,delete r.edgesListeners.remove,delete r.edgesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){s.default.parseOptions(this.options,e),void 0!==e.color&&this.markAllEdgesAsDirty();var t=!1;if(void 0!==e.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(t=this.body.edges[i].updateEdgeType()||t);if(void 0!==e.font)for(var o in r.default.parseOptions(this.options.font,e),this.body.edges)this.body.edges.hasOwnProperty(o)&&this.body.edges[o].updateLabelModule();void 0===e.hidden&&void 0===e.physics&&!0!==t||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var i=this,t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],o=this.body.data.edges;if(e instanceof h||e instanceof l)this.body.data.edges=e;else if(Array.isArray(e))this.body.data.edges=new h,this.body.data.edges.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.edges=new h}if(o&&a.forEach(this.edgesListeners,function(e,t){o.off(t,e)}),this.body.edges={},this.body.data.edges){a.forEach(this.edgesListeners,function(e,t){i.body.data.edges.on(t,e)});var n=this.body.data.edges.getIds();this.add(n,!0)}!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.body.edges,o=this.body.data.edges,n=0;n<e.length;n++){var s=e[n],r=i[s];r&&r.disconnect();var a=o.get(s,{showInternalIds:!0});i[s]=this.create(a)}!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,i=this.body.data.edges,o=!1,n=0;n<e.length;n++){var s=e[n],r=i.get(s),a=t[s];void 0!==a?(a.disconnect(),o=a.setOptions(r)||o,a.connect()):(this.body.edges[s]=this.create(r),o=!0)}!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.edges,i=0;i<e.length;i++){var o=e[i],n=t[o];void 0!==n&&(n.cleanup(),n.disconnect(),delete t[o])}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function(){var e=this.body.edges;for(var t in e){var i=void 0;e.hasOwnProperty(t)&&(i=e[t]);var o=this.body.data.edges._data[t];void 0!==i&&void 0!==o&&i.setOptions(o)}}},{key:"create",value:function(e){return new s.default(e,this.body,this.options)}},{key:"markAllEdgesAsDirty",value:function(){for(var e in this.body.edges)this.body.edges[e].edgeType.colorDirty=!0}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,i=this.body.edges;for(e in t)t.hasOwnProperty(e)&&(t[e].edges=[]);for(e in i)if(i.hasOwnProperty(e)){var o=i[e];o.from=null,o.to=null,o.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.edges[e]){var i=this.body.edges[e];i.fromId&&t.push(i.fromId),i.toId&&t.push(i.toId)}return t}}]),c);function c(e,t,i){var o=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,c),this.body=e,this.images=t,this.groups=i,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(e,t){o.add(t.items)},update:function(e,t){o.update(t.items)},remove:function(e,t){o.remove(t.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1},middle:{enabled:!1,scaleFactor:1},from:{enabled:!1,scaleFactor:1}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal"},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,o){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}function u(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=d},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),e},a=o(i(66)),s=o(i(86)),h=o(i(90)),l=o(i(91)),d=o(i(92)),c=i(1),u=(n(p,[{key:"setOptions",value:function(e){if(e){this.colorDirty=!0,p.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=parseFloat(e.value)),this.updateLabelModule();var t=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===e.hidden&&void 0===e.physics||(t=!0),t}}},{key:"updateLabelModule",value:function(){this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=!1,t=!0,i=this.options.smooth;return void 0!==this.edgeType&&(this.edgeType instanceof h.default&&!0===i.enabled&&"dynamic"===i.type&&(t=!1),this.edgeType instanceof s.default&&!0===i.enabled&&"cubicBezier"===i.type&&(t=!1),this.edgeType instanceof l.default&&!0===i.enabled&&"dynamic"!==i.type&&"cubicBezier"!==i.type&&(t=!1),this.edgeType instanceof d.default&&!1===i.enabled&&(t=!1),!0===t&&(e=this.cleanup())),!0===t?!0===this.options.smooth.enabled?"dynamic"===this.options.smooth.type?(e=!0,this.edgeType=new h.default(this.options,this.body,this.labelModule)):"cubicBezier"===this.options.smooth.type?this.edgeType=new s.default(this.options,this.body,this.labelModule):this.edgeType=new l.default(this.options,this.body,this.labelModule):this.edgeType=new d.default(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*s}this.options.width=this.options.scaling.min+o*n}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,!0===this.options.arrows.from.enabled&&(i.from=this.edgeType.getArrowData(e,"from",t,this.selected,this.hover),!1===this.options.arrowStrikethrough&&(this.edgeType.fromPoint=i.from.core)),!0===this.options.arrows.to.enabled&&(i.to=this.edgeType.getArrowData(e,"to",t,this.selected,this.hover),!1===this.options.arrowStrikethrough&&(this.edgeType.toPoint=i.to.core)),!0===this.options.arrows.middle.enabled&&(i.middle=this.edgeType.getArrowData(e,"middle",t,this.selected,this.hover)),this.edgeType.drawLine(e,this.selected,this.hover,t),this.drawArrows(e,i),this.drawLabel(e,t)}},{key:"drawArrows",value:function(e,t){!0===this.options.arrows.from.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.from),!0===this.options.arrows.middle.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.middle),!0===this.options.arrows.to.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.to)}},{key:"drawLabel",value:function(e,t){if(void 0!==this.options.label){var i=this.from,o=this.to,n=this.from.selected||this.to.selected||this.selected;if(i.id!=o.id){this.labelModule.pointToSelf=!1;var s=this.edgeType.getPoint(.5,t);e.save(),"horizontal"!==this.options.font.align&&(this.labelModule.calculateLabelSize(e,n,s.x,s.y),e.translate(s.x,this.labelModule.size.yLine),this._rotateForLabelAlignment(e)),this.labelModule.draw(e,s.x,s.y,n),e.restore()}else{this.labelModule.pointToSelf=!0;var r,a,h=this.options.selfReferenceSize;a=i.shape.width>i.shape.height?(r=i.x+.5*i.shape.width,i.y-h):(r=i.x+h,i.y-.5*i.shape.height),s=this._pointOnCircle(r,a,h,.125),this.labelModule.draw(e,s.x,s.y,n)}}}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=this.from.x,i=this.from.y,o=this.to.x,n=this.to.y,s=e.left,r=e.top;return this.edgeType.getDistanceToEdge(t,i,o,n,s,r)<10}return!1}},{key:"_rotateForLabelAlignment",value:function(e){var t=this.from.y-this.to.y,i=this.from.x-this.to.x,o=Math.atan2(t,i);(o<-1&&i<0||0<o&&i<0)&&(o+=Math.PI),e.rotate(o)}},{key:"_pointOnCircle",value:function(e,t,i,o){var n=2*o*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(c.selectiveDeepExtend(["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"],e,t,i),c.mergeOptions(e,t,"smooth",i,o),c.mergeOptions(e,t,"shadow",i,o),void 0!==t.dashes&&null!==t.dashes?e.dashes=t.dashes:!0===i&&null===t.dashes&&(e.dashes=Object.create(o.dashes)),void 0!==t.scaling&&null!==t.scaling?(void 0!==t.scaling.min&&(e.scaling.min=t.scaling.min),void 0!==t.scaling.max&&(e.scaling.max=t.scaling.max),c.mergeOptions(e.scaling,t.scaling,"label",i,o.scaling)):!0===i&&null===t.scaling&&(e.scaling=Object.create(o.scaling)),void 0!==t.arrows&&null!==t.arrows)if("string"==typeof t.arrows){var n=t.arrows.toLowerCase();e.arrows.to.enabled=-1!=n.indexOf("to"),e.arrows.middle.enabled=-1!=n.indexOf("middle"),e.arrows.from.enabled=-1!=n.indexOf("from")}else{if("object"!==r(t.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(t.arrows));c.mergeOptions(e.arrows,t.arrows,"to",i,o.arrows),c.mergeOptions(e.arrows,t.arrows,"middle",i,o.arrows),c.mergeOptions(e.arrows,t.arrows,"from",i,o.arrows)}else!0===i&&null===t.arrows&&(e.arrows=Object.create(o.arrows));if(void 0!==t.color&&null!==t.color)if(e.color=c.deepExtend({},e.color,!0),c.isString(t.color))e.color.color=t.color,e.color.highlight=t.color,e.color.hover=t.color,e.color.inherit=!1;else{var s=!1;void 0!==t.color.color&&(e.color.color=t.color.color,s=!0),void 0!==t.color.highlight&&(e.color.highlight=t.color.highlight,s=!0),void 0!==t.color.hover&&(e.color.hover=t.color.hover,s=!0),void 0!==t.color.inherit&&(e.color.inherit=t.color.inherit),void 0!==t.color.opacity&&(e.color.opacity=Math.min(1,Math.max(0,t.color.opacity))),void 0===t.color.inherit&&!0===s&&(e.color.inherit=!1)}else!0===i&&null===t.color&&(e.color=c.bridgeObject(o.color));void 0!==t.font&&null!==t.font?a.default.parseOptions(e.font,t):!0===i&&null===t.font&&(e.font=c.bridgeObject(o.font))}}]),p);function p(e,t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),void 0===t)throw"No body provided";this.options=c.bridgeObject(i),this.globalOptions=i,this.body=t,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.colorDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new a.default(this.body,this.options,!0),this.setOptions(e)}function f(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=u},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(87),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_line",value:function(e,t){var i=t[0],o=t[1];e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t||void 0===i.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.bezierCurveTo(i.x,i.y,o.x,o.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"_getViaCoordinates",value:function(){var e=this.from.x-this.to.x,t=this.from.y-this.to.y,i=void 0,o=void 0,n=void 0,s=void 0,r=this.options.smooth.roundness;return n=(Math.abs(e)>Math.abs(t)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(o=this.from.y,s=this.to.y,i=this.from.x-r*e,this.to.x+r*e):(o=this.from.y-r*t,s=this.to.y+r*t,i=this.from.x,this.to.x),[{x:i,y:o},{x:n,y:s}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){var r=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6],a=d(r,2),h=a[0],l=a[1];return this._getDistanceToBezierEdge(e,t,i,o,n,s,h,l)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=d(t,2),o=i[0],n=i[1],s=e,r=[];return r[0]=Math.pow(1-s,3),r[1]=3*s*Math.pow(1-s,2),r[2]=3*Math.pow(s,2)*(1-s),r[3]=Math.pow(s,3),{x:r[0]*this.fromPoint.x+r[1]*o.x+r[2]*n.x+r[3]*this.toPoint.x,y:r[0]*this.fromPoint.y+r[1]*o.y+r[2]*n.y+r[3]*this.toPoint.y}}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(88),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_getDistanceToBezierEdge",value:function(e,t,i,o,n,s,r,a){var h=1e9,l=void 0,d=void 0,c=void 0,u=void 0,p=void 0,f=e,m=t,g=[0,0,0,0];for(d=1;d<10;d++)c=.1*d,g[0]=Math.pow(1-c,3),g[1]=3*c*Math.pow(1-c,2),g[2]=3*Math.pow(c,2)*(1-c),g[3]=Math.pow(c,3),u=g[0]*e+g[1]*r.x+g[2]*a.x+g[3]*i,p=g[0]*t+g[1]*r.y+g[2]*a.y+g[3]*o,0<d&&(h=(l=this._getDistanceToLine(f,m,u,p,n,s))<h?l:h),f=u,m=p;return h}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(89),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_findBorderPositionBezier",value:function(e,t){var i,o,n,s=arguments.length<=2||void 0===arguments[2]?this._getViaCoordinates():arguments[2],r=0,a=0,h=1,l=this.to,d=!1;for(e.id===this.from.id&&(l=this.from,d=!0);a<=h&&r<10;){var c=.5*(a+h);if(i=this.getPoint(c,s),o=Math.atan2(l.y-i.y,l.x-i.x),n=l.distanceToBorder(t,o)-Math.sqrt(Math.pow(i.x-l.x,2)+Math.pow(i.y-l.y,2)),Math.abs(n)<.2)break;n<0?!1===d?a=c:h=c:!1===d?h=c:a=c,r++}return i.t=c,i}},{key:"_getDistanceToBezierEdge",value:function(e,t,i,o,n,s,r){var a=1e9,h=void 0,l=void 0,d=void 0,c=void 0,u=void 0,p=e,f=t;for(l=1;l<10;l++)d=.1*l,c=Math.pow(1-d,2)*e+2*d*(1-d)*r.x+Math.pow(d,2)*i,u=Math.pow(1-d,2)*t+2*d*(1-d)*r.y+Math.pow(d,2)*o,0<l&&(a=(h=this._getDistanceToLine(p,f,c,u,n,s))<a?h:a),p=c,f=u;return a}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e},a=i(1),n=(o(s,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,i,o){e.strokeStyle=this.getColor(e,t,i),e.lineWidth=this.getLineWidth(t,i),!1!==this.options.dashes?this._drawDashedLine(e,o):this._drawLine(e,o)}},{key:"_drawLine",value:function(e,t,i,o){if(this.from!=this.to)this._line(e,t,i,o);else{var n=this._getCircleData(e),s=b(n,3),r=s[0],a=s[1],h=s[2];this._circle(e,r,a,h)}}},{key:"_drawDashedLine",value:function(e,t,i,o){e.lineCap="round";var n=[5,5];if(!0===Array.isArray(this.options.dashes)&&(n=this.options.dashes),void 0!==e.setLineDash){if(e.save(),e.setLineDash(n),e.lineDashOffset=0,this.from!=this.to)this._line(e,t);else{var s=this._getCircleData(e),r=b(s,3),a=r[0],h=r[1],l=r[2];this._circle(e,a,h,l)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)e.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,n);else{var d=this._getCircleData(e),c=b(d,3),u=c[0],p=c[1],f=c[2];this._circle(e,u,p,f)}this.enableShadow(e),e.stroke(),this.disableShadow(e)}}},{key:"findBorderPosition",value:function(e,t,i){return this.from!=this.to?this._findBorderPosition(e,t,i):this._findBorderPositionCircle(e,t,i)}},{key:"findBorderPositions",value:function(e){var t={},i={};if(this.from!=this.to)t=this._findBorderPosition(this.from,e),i=this._findBorderPosition(this.to,e);else{var o=this._getCircleData(e),n=b(o,3),s=n[0],r=n[1];n[2],t=this._findBorderPositionCircle(this.from,e,{x:s,y:r,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,e,{x:s,y:r,low:.6,high:.8,direction:1})}return{from:t,to:i}}},{key:"_getCircleData",value:function(e){var t=void 0,i=void 0,o=this.from,n=this.options.selfReferenceSize;return void 0!==e&&void 0===o.shape.width&&o.shape.resize(e),i=o.shape.width>o.shape.height?(t=o.x+.5*o.shape.width,o.y-n):(t=o.x+n,o.y-.5*o.shape.height),[t,i,n]}},{key:"_pointOnCircle",value:function(e,t,i,o){var n=2*o*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"_findBorderPositionCircle",value:function(e,t,i){for(var o=i.x,n=i.y,s=i.low,r=i.high,a=i.direction,h=0,l=this.options.selfReferenceSize,d=void 0,c=void 0,u=void 0,p=.5*(s+r);s<=r&&h<10&&(p=.5*(s+r),d=this._pointOnCircle(o,n,l,p),c=Math.atan2(e.y-d.y,e.x-d.x),u=e.distanceToBorder(t,c)-Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2)),!(Math.abs(u)<.05));)0<u?0<a?s=p:r=p:0<a?r=p:s=p,h++;return d.t=p,d}},{key:"getLineWidth",value:function(e,t){return!0===e?Math.max(this.selectionWidth,.3/this.body.view.scale):!0===t?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(e,t,i){var o=this.options.color;if(!1!==o.inherit){if("both"===o.inherit&&this.from.id!==this.to.id){var n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),s=void 0,r=void 0;return s=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border,!1===this.from.selected&&!1===this.to.selected?(s=a.overrideOpacity(this.from.options.color.border,this.options.color.opacity),r=a.overrideOpacity(this.to.options.color.border,this.options.color.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(s=this.from.options.color.border),n.addColorStop(0,s),n.addColorStop(1,r),n}!0===this.colorDirty&&("to"===o.inherit?(this.color.highlight=this.to.options.color.highlight.border,this.color.hover=this.to.options.color.hover.border,this.color.color=a.overrideOpacity(this.to.options.color.border,o.opacity)):(this.color.highlight=this.from.options.color.highlight.border,this.color.hover=this.from.options.color.hover.border,this.color.color=a.overrideOpacity(this.from.options.color.border,o.opacity)))}else!0===this.colorDirty&&(this.color.highlight=o.highlight,this.color.hover=o.hover,this.color.color=a.overrideOpacity(o.color,o.opacity));return!(this.colorDirty=!1)===t?this.color.highlight:!0===i?this.color.hover:this.color.color}},{key:"_circle",value:function(e,t,i,o){this.enableShadow(e),e.beginPath(),e.arc(t,i,o,0,2*Math.PI,!1),e.stroke(),this.disableShadow(e)}},{key:"getDistanceToEdge",value:function(e,t,i,o,n,s,r){var a=0;if(this.from!=this.to)a=this._getDistanceToEdge(e,t,i,o,n,s,r);else{var h=this._getCircleData(),l=b(h,3),d=l[0],c=l[1],u=l[2],p=d-n,f=c-s;a=Math.abs(Math.sqrt(p*p+f*f)-u)}return this.labelModule.size.left<n&&this.labelModule.size.left+this.labelModule.size.width>n&&this.labelModule.size.top<s&&this.labelModule.size.top+this.labelModule.size.height>s?0:a}},{key:"_getDistanceToLine",value:function(e,t,i,o,n,s){var r=i-e,a=o-t,h=((n-e)*r+(s-t)*a)/(r*r+a*a);1<h?h=1:h<0&&(h=0);var l=e+h*r-n,d=t+h*a-s;return Math.sqrt(l*l+d*d)}},{key:"getArrowData",value:function(e,t,i,o,n){var s=void 0,r=void 0,a=void 0,h=void 0,l=void 0,d=void 0,c=this.getLineWidth(o,n);if(d="from"===t?(a=this.from,h=this.to,l=.1,this.options.arrows.from.scaleFactor):"to"===t?(a=this.to,h=this.from,l=-.1,this.options.arrows.to.scaleFactor):(a=this.to,h=this.from,this.options.arrows.middle.scaleFactor),a!=h)if("middle"!==t)if(!0===this.options.smooth.enabled){r=this.findBorderPosition(a,e,{via:i});var u=this.getPoint(Math.max(0,Math.min(1,r.t+l)),i);s=Math.atan2(r.y-u.y,r.x-u.x)}else s=Math.atan2(a.y-h.y,a.x-h.x),r=this.findBorderPosition(a,e);else s=Math.atan2(a.y-h.y,a.x-h.x),r=this.getPoint(.5,i);else{var p=this._getCircleData(e),f=b(p,3),m=f[0],g=f[1],v=f[2];s="from"===t?-2*(r=this.findBorderPosition(this.from,e,{x:m,y:g,low:.25,high:.6,direction:-1})).t*Math.PI+1.5*Math.PI+.1*Math.PI:"to"===t?-2*(r=this.findBorderPosition(this.from,e,{x:m,y:g,low:.6,high:1,direction:1})).t*Math.PI+1.5*Math.PI-1.1*Math.PI:(r=this._pointOnCircle(m,g,v,.175),3.9269908169872414)}var y=15*d+3*c;return{point:r,core:{x:r.x-.9*y*Math.cos(s),y:r.y-.9*y*Math.sin(s)},angle:s,length:y}}},{key:"drawArrowHead",value:function(e,t,i,o){e.strokeStyle=this.getColor(e,t,i),e.fillStyle=e.strokeStyle,e.lineWidth=this.getLineWidth(t,i),e.arrow(o.point.x,o.point.y,o.angle,o.length),this.enableShadow(e),e.fill(),this.disableShadow(e)}},{key:"enableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}]),s);function s(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),this.body=t,this.labelModule=i,this.options={},this.setOptions(e),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=n},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(88),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"setOptions",value:function(e){var t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===t&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],!(this.via=void 0))}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,t=this.body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this.body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.via:arguments[1],i=e;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t,this.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){return this._getDistanceToBezierEdge(e,t,i,o,n,s,this.via)}}]),a);function a(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i));return o._boundFunction=function(){o.positionBezierNode()},o.body.emitter.on("_repositionBezierNodes",o._boundFunction),o}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(88),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e=void 0,t=void 0,i=this.options.smooth.roundness,o=this.options.smooth.type,n=Math.abs(this.from.x-this.to.x),s=Math.abs(this.from.y-this.to.y);if("discrete"===o||"diagonalCross"===o)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y-i*s):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y-i*s):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y+i*s):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y+i*s)),"discrete"===o&&(e=n<i*s?this.from.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n)),"discrete"===o&&(t=s<i*n?this.from.y:t));else if("straightCross"===o)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(e=this.from.x,t=this.from.y<this.to.y?this.to.y-(1-i)*s:this.to.y+(1-i)*s):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y);else if("horizontal"===o)e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y;else if("vertical"===o)e=this.from.x,t=this.from.y<this.to.y?this.to.y-(1-i)*s:this.to.y+(1-i)*s;else if("curvedCW"===o){n=this.to.x-this.from.x,s=this.from.y-this.to.y;var r=Math.sqrt(n*n+s*s),a=Math.PI,h=(Math.atan2(s,n)+(.5*i+.5)*a)%(2*a);e=this.from.x+(.5*i+.5)*r*Math.sin(h),t=this.from.y+(.5*i+.5)*r*Math.cos(h)}else if("curvedCCW"===o){n=this.to.x-this.from.x,s=this.from.y-this.to.y;var l=Math.sqrt(n*n+s*s),d=Math.PI,c=(Math.atan2(s,n)+(.5*-i+.5)*d)%(2*d);e=this.from.x+(.5*i+.5)*l*Math.sin(c),t=this.from.y+(.5*i+.5)*l*Math.cos(c)}else Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y-i*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y-i*s,e=this.to.x>e?this.to.x:e):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y+i*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y+i*s,e=this.to.x>e?this.to.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t)));return{x:e,y:t}}},{key:"_findBorderPosition",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this._findBorderPositionBezier(e,t,i.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){var r=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(e,t,i,o,n,s,r)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=e;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y}}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(89),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_line",value:function(e){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){var i=this.to,o=this.from;e.id===this.from.id&&(i=this.from,o=this.to);var n=Math.atan2(i.y-o.y,i.x-o.x),s=i.x-o.x,r=i.y-o.y,a=Math.sqrt(s*s+r*r),h=(a-e.distanceToBorder(t,n))/a,l={};return l.x=(1-h)*o.x+h*i.x,l.y=(1-h)*o.y+h*i.y,l}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){return this._getDistanceToLine(e,t,i,o,n,s)}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&g(e.prototype,t),i&&g(e,i),e},s=o(i(94)),r=o(i(95)),a=o(i(96)),h=o(i(97)),l=o(i(98)),d=o(i(99)),c=o(i(100)),u=o(i(101)),p=i(1),f=(n(m,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",function(){e.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){e.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){e.stopSimulation(),e.ready=!1}),this.body.emitter.on("disablePhysics",function(){e.physicsEnabled=!1,e.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){e.setOptions(e.options),!0===e.ready&&e.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===e.ready&&e.startSimulation()}),this.body.emitter.on("stopSimulation",function(){e.stopSimulation()}),this.body.emitter.on("destroy",function(){e.stopSimulation(!1),e.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){e.updatePhysicsData()})}},{key:"setOptions",value:function(e){void 0!==e&&(!1===e?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):(this.physicsEnabled=!0,p.selectiveNotDeepExtend(["stabilization"],this.options,e),p.mergeOptions(this.options,e,"stabilization"),void 0===e.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var e;"forceAtlas2Based"===this.options.solver?(e=this.options.forceAtlas2Based,this.nodesSolver=new c.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e),this.gravitySolver=new u.default(this.body,this.physicsBody,e)):("repulsion"===this.options.solver?(e=this.options.repulsion,this.nodesSolver=new r.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e)):"hierarchicalRepulsion"===this.options.solver?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new a.default(this.body,this.physicsBody,e),this.edgesSolver=new l.default(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new s.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e)),this.gravitySolver=new d.default(this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];(this.stabilized=!0)===e&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),!(this.viewFunction=void 0)===e&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=Date.now();this.physicsTick(),(Date.now()-e<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.stabilizationIterations:arguments[0];(1<this.stabilizationIterations||!0===this.startedStabilization)&&setTimeout(function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0},0)}},{key:"physicsTick",value:function(){!1===this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0),!1===this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.calculateForces(),this.moveNodes(),this.revert(),this.timestep=.5*this.timestep,this.calculateForces(),this.moveNodes(),this.calculateForces(),this.moveNodes(),!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))):(this.calculateForces(),this.moveNodes()),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.calculateForces(),this.moveNodes()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var i in e)e.hasOwnProperty(i)&&!0===e[i].options.physics&&this.physicsBody.physicsNodeIndices.push(e[i].id);for(var o in t)t.hasOwnProperty(o)&&!0===t[o].options.physics&&this.physicsBody.physicsEdgeIndices.push(t[o].id);for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var s=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[s]={x:0,y:0},void 0===this.physicsBody.velocities[s]&&(this.physicsBody.velocities[s]={x:0,y:0})}for(var r in this.physicsBody.velocities)void 0===e[r]&&delete this.physicsBody.velocities[r]}},{key:"revert",value:function(){var e=Object.keys(this.previousStates),t=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var o=0;o<e.length;o++){var n=e[o];void 0!==t[n]?!0===t[n].options.physics&&(this.referenceState[n]={positions:{x:t[n].x,y:t[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,t[n].x=this.previousStates[n].x,t[n].y=this.previousStates[n].y):delete this.previousStates[n]}}},{key:"_evaluateStepQuality",value:function(){var e=void 0,t=void 0,i=this.body.nodes,o=this.referenceState;for(var n in this.referenceState)if(this.referenceState.hasOwnProperty(n)&&void 0!==i[n]&&(e=i[n].x-o[n].positions.x,t=i[n].y-o[n].positions.y,.3<Math.sqrt(Math.pow(e,2)+Math.pow(t,2))))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=this.options.maxVelocity?this.options.maxVelocity:1e9,i=0,o=0,n=0;n<e.length;n++){var s=e[n],r=this._performStep(s,t);i=Math.max(i,r),o+=r}this.adaptiveTimestepEnabled=o/e.length<5,this.stabilized=i<this.options.minVelocity}},{key:"_performStep",value:function(e,t){var i=this.body.nodes[e],o=this.timestep,n=this.physicsBody.forces,s=this.physicsBody.velocities;if(!(this.previousStates[e]={x:i.x,y:i.y,vx:s[e].x,vy:s[e].y})===i.options.fixed.x){var r=this.modelOptions.damping*s[e].x,a=(n[e].x-r)/i.options.mass;s[e].x+=a*o,s[e].x=Math.abs(s[e].x)>t?0<s[e].x?t:-t:s[e].x,i.x+=s[e].x*o}else n[e].x=0,s[e].x=0;if(!1===i.options.fixed.y){var h=this.modelOptions.damping*s[e].y,l=(n[e].y-h)/i.options.mass;s[e].y+=l*o,s[e].y=Math.abs(s[e].y)>t?0<s[e].y?t:-t:s[e].y,i.y+=s[e].y*o}else n[e].y=0,s[e].y=0;return Math.sqrt(Math.pow(s[e].x,2)+Math.pow(s[e].y,2))}},{key:"calculateForces",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve()}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&e[t].x&&e[t].y&&(this.freezeCache[t]={x:e[t].options.fixed.x,y:e[t].options.fixed.y},e[t].options.fixed.x=!0,e[t].options.fixed.y=!0)}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&void 0!==this.freezeCache[t]&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.options.stabilization.iterations:arguments[0];return"number"!=typeof t&&(console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations),t=this.options.stabilization.iterations),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return e._stabilizationBatch()},0))}},{key:"_stabilizationBatch",value:function(){!1===this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0);for(var e=0;!1===this.stabilized&&e<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations;)this.physicsTick(),e++;!1===this.stabilized&&this.stabilizationIterations<this.targetIterations?(this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations}),setTimeout(this._stabilizationBatch.bind(this),0)):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var i=this.body.nodes[this.physicsBody.physicsNodeIndices[t]],o=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[t]],n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),s=Math.min(Math.max(5,n),15),r=3*s,a=p.HSVToHex((180-180*Math.min(1,Math.max(0,.03*n)))/360,1,1);e.lineWidth=s,e.strokeStyle=a,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+20*o.x,i.y+20*o.y),e.stroke();var h=Math.atan2(o.y,o.x);e.fillStyle=a,e.arrow(i.x+20*o.x+Math.cos(h)*r,i.y+20*o.y+Math.sin(h)*r,h,r),e.fill()}}}]),m);function m(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,m),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},p.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}function g(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=f},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&0<this.physicsBody.physicsNodeIndices.length){var e=void 0,t=this.body.nodes,i=this.physicsBody.physicsNodeIndices,o=i.length,n=this._formBarnesHutTree(t,i);this.barnesHutTree=n;for(var s=0;s<o;s++)0<(e=t[i[s]]).options.mass&&(this._getForceContribution(n.root.children.NW,e),this._getForceContribution(n.root.children.NE,e),this._getForceContribution(n.root.children.SW,e),this._getForceContribution(n.root.children.SE,e))}}},{key:"_getForceContribution",value:function(e,t){var i,o,n;0<e.childrenCount&&(i=e.centerOfMass.x-t.x,o=e.centerOfMass.y-t.y,(n=Math.sqrt(i*i+o*o))*e.calcSize>this.thetaInversed?this._calculateForces(n,i,o,t,e):4===e.childrenCount?(this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)):e.children.data.id!=t.id&&this._calculateForces(n,i,o,t,e))}},{key:"_calculateForces",value:function(e,t,i,o,n){0===e&&(t=e=.1),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,e-o.shape.radius));var s=this.options.gravitationalConstant*n.mass*o.options.mass/Math.pow(e,3),r=t*s,a=i*s;this.physicsBody.forces[o.id].x+=r,this.physicsBody.forces[o.id].y+=a}},{key:"_formBarnesHutTree",value:function(e,t){for(var i=void 0,o=t.length,n=e[t[0]].x,s=e[t[0]].y,r=e[t[0]].x,a=e[t[0]].y,h=1;h<o;h++){var l=e[t[h]].x,d=e[t[h]].y;0<e[t[h]].options.mass&&(l<n&&(n=l),r<l&&(r=l),d<s&&(s=d),a<d&&(a=d))}var c=Math.abs(r-n)-Math.abs(a-s);0<c?(s-=.5*c,a+=.5*c):(n+=.5*c,r-=.5*c);var u=Math.max(1e-5,Math.abs(r-n)),p=.5*u,f=.5*(n+r),m=.5*(s+a),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:f-p,maxX:f+p,minY:m-p,maxY:m+p},size:u,calcSize:1/u,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var v=0;v<o;v++)0<(i=e[t[v]]).options.mass&&this._placeInTree(g.root,i);return g}},{key:"_updateBranchMass",value:function(e,t){var i=e.mass+t.options.mass,o=1/i;e.centerOfMass.x=e.centerOfMass.x*e.mass+t.x*t.options.mass,e.centerOfMass.x*=o,e.centerOfMass.y=e.centerOfMass.y*e.mass+t.y*t.options.mass,e.centerOfMass.y*=o,e.mass=i;var n=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<n?n:e.maxWidth}},{key:"_placeInTree",value:function(e,t,i){1==i&&void 0!==i||this._updateBranchMass(e,t),e.children.NW.range.maxX>t.x?e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NW"):this._placeInRegion(e,t,"SW"):e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NE"):this._placeInRegion(e,t,"SE")}},{key:"_placeInRegion",value:function(e,t,i){switch(e.children[i].childrenCount){case 0:e.children[i].children.data=t,e.children[i].childrenCount=1,this._updateBranchMass(e.children[i],t);break;case 1:e.children[i].children.data.x===t.x&&e.children[i].children.data.y===t.y?(t.x+=this.seededRandom(),t.y+=this.seededRandom()):(this._splitBranch(e.children[i]),this._placeInTree(e.children[i],t));break;case 4:this._placeInTree(e.children[i],t)}}},{key:"_splitBranch",value:function(e){var t=null;1===e.childrenCount&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),null!=t&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var i=void 0,o=void 0,n=void 0,s=void 0,r=.5*e.size;switch(t){case"NW":i=e.range.minX,o=e.range.minX+r,n=e.range.minY,s=e.range.minY+r;break;case"NE":i=e.range.minX+r,o=e.range.maxX,n=e.range.minY,s=e.range.minY+r;break;case"SW":i=e.range.minX,o=e.range.minX+r,n=e.range.minY+r,s=e.range.maxY;break;case"SE":i=e.range.minX+r,o=e.range.maxX,n=e.range.minY+r,s=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:o,minY:n,maxY:s},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){void 0!==this.barnesHutTree&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,i){void 0===i&&(i="#FF0000"),4===e.childrenCount&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=i,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.barnesHutTree,this.setOptions(i),this.randomSeed=5}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,o,n,s,r,a,h=this.body.nodes,l=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,c=this.options.nodeDistance,u=-2/3/c,p=0;p<l.length-1;p++){r=h[l[p]];for(var f=p+1;f<l.length;f++)e=(a=h[l[f]]).x-r.x,t=a.y-r.y,0===(i=Math.sqrt(e*e+t*t))&&(e=i=.1*Math.random()),i<2*c&&(s=i<.5*c?1:u*i+4/3,o=e*(s/=i),n=t*s,d[r.id].x-=o,d[r.id].y-=n,d[a.id].x+=o,d[a.id].y+=n)}}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.setOptions(i)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){var e,t,i,o,n,s,r,a,h,l,d=this.body.nodes,c=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,p=this.options.nodeDistance;for(h=0;h<c.length-1;h++)for(r=d[c[h]],l=h+1;l<c.length;l++)a=d[c[l]],r.level===a.level&&(e=a.x-r.x,t=a.y-r.y,s=(i=Math.sqrt(e*e+t*t))<p?-Math.pow(.05*i,2)+Math.pow(.05*p,2):0,0===i?i=.01:s/=i,o=e*s,n=t*s,u[r.id].x-=o,u[r.id].y-=n,u[a.id].x+=o,u[a.id].y+=n)}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.setOptions(i)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=this.physicsBody.physicsEdgeIndices,o=this.body.edges,n=void 0,s=void 0,r=void 0,a=0;a<i.length;a++)!0===(t=o[i[a]]).connected&&t.toId!==t.fromId&&void 0!==this.body.nodes[t.toId]&&void 0!==this.body.nodes[t.fromId]&&(void 0!==t.edgeType.via?(e=void 0===t.options.length?this.options.springLength:t.options.length,n=t.to,s=t.edgeType.via,r=t.from,this._calculateSpringForce(n,s,.5*e),this._calculateSpringForce(s,r,.5*e)):(e=void 0===t.options.length?1.5*this.options.springLength:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,i){var o=e.x-t.x,n=e.y-t.y,s=Math.max(Math.sqrt(o*o+n*n),.01),r=this.options.springConstant*(i-s)/s,a=o*r,h=n*r;void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x+=a,this.physicsBody.forces[e.id].y+=h),void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x-=a,this.physicsBody.forces[t.id].y-=h)}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.setOptions(i)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,o,n,s,r,a=this.body.edges,h=this.physicsBody.physicsEdgeIndices,l=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,c=0;c<l.length;c++){var u=l[c];d[u].springFx=0,d[u].springFy=0}for(var p=0;p<h.length;p++)!0===(t=a[h[p]]).connected&&(e=void 0===t.options.length?this.options.springLength:t.options.length,i=t.from.x-t.to.x,o=t.from.y-t.to.y,r=0===(r=Math.sqrt(i*i+o*o))?.01:r,n=i*(g=this.options.springConstant*(e-r)/r),s=o*g,t.to.level!=t.from.level?(void 0!==d[t.toId]&&(d[t.toId].springFx-=n,d[t.toId].springFy-=s),void 0!==d[t.fromId]&&(d[t.fromId].springFx+=n,d[t.fromId].springFy+=s)):(void 0!==d[t.toId]&&(d[t.toId].x-=.5*n,d[t.toId].y-=.5*s),void 0!==d[t.fromId]&&(d[t.fromId].x+=.5*n,d[t.fromId].y+=.5*s)));for(var f,m,g=1,v=0;v<l.length;v++){var y=l[v];f=Math.min(g,Math.max(-g,d[y].springFx)),m=Math.min(g,Math.max(-g,d[y].springFy)),d[y].x+=f,d[y].y+=m}for(var b=0,w=0,_=0;_<l.length;_++){var x=l[_];b+=d[x].x,w+=d[x].y}for(var k=b/l.length,S=w/l.length,O=0;O<l.length;O++){var C=l[O];d[C].x-=k,d[C].y-=S}}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.setOptions(i)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=void 0,o=void 0,n=this.body.nodes,s=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,a=0;a<s.length;a++)e=-(o=n[s[a]]).x,t=-o.y,i=Math.sqrt(e*e+t*t),this._calculateForces(i,e,t,r,o)}},{key:"_calculateForces",value:function(e,t,i,o,n){var s=0===e?0:this.options.centralGravity/e;o[n.id].x=t*s,o[n.id].y=i*s}}]),o);function o(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.body=e,this.physicsBody=t,this.setOptions(i)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(94),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_calculateForces",value:function(e,t,i,o,n){0===e&&(t=e=.1*Math.random()),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,e-o.shape.radius));var s=o.edges.length+1,r=this.options.gravitationalConstant*n.mass*o.options.mass*s/Math.pow(e,2),a=t*r,h=i*r;this.physicsBody.forces[o.id].x+=a,this.physicsBody.forces[o.id].y+=h}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},s=i(99),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((o=s)&&o.__esModule?o:{default:o}).default),n(a,[{key:"_calculateForces",value:function(e,t,i,o,n){if(0<e){var s=n.edges.length+1,r=this.options.centralGravity*s*n.options.mass;o[n.id].x=t*r,o[n.id].y=i*r}}}]),a);function a(e,t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(a).call(this,e,t,i))}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=r},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e},P=o(i(103)),y=o(i(104)),I=i(1),s=(n(a,[{key:"setOptions",value:function(e){}},{key:"clusterByHubsize",value:function(e,t){void 0===e?e=this._getHubSize():"object"===(void 0===e?"undefined":r(e))&&(t=this._checkOptions(e),e=this._getHubSize());for(var i=[],o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodes[this.body.nodeIndices[o]];n.edges.length>=e&&i.push(n.id)}for(var s=0;s<i.length;s++)this.clusterByConnection(i[s],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);for(var i={},o={},n=0;n<this.body.nodeIndices.length;n++){var s=this.body.nodeIndices[n],r=this.body.nodes[s],a=P.default.cloneOptions(r);if(!0===e.joinCondition(a)){i[s]=this.body.nodes[s];for(var h=0;h<r.edges.length;h++){var l=r.edges[h];void 0===this.clusteredEdges[l.id]&&(o[l.id]=l)}}}this._cluster(i,o,e,t)}},{key:"clusterByEdgeCount",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];t=this._checkOptions(t);for(var o=[],n={},s=void 0,r=void 0,a=void 0,h=void 0,l=void 0,d=0;d<this.body.nodeIndices.length;d++){var c={},u={};if(void 0===n[h=this.body.nodeIndices[d]]){l=0,a=this.body.nodes[h],r=[];for(var p=0;p<a.edges.length;p++)s=a.edges[p],void 0===this.clusteredEdges[s.id]&&(s.toId!==s.fromId&&l++,r.push(s));if(l===e){for(var f=!0,m=0;m<r.length;m++){s=r[m];var g=this._getConnectedId(s,h);if(void 0===t.joinCondition)u[s.id]=s,c[h]=this.body.nodes[h],c[g]=this.body.nodes[g],n[h]=!0;else{var v=P.default.cloneOptions(this.body.nodes[h]);if(!0!==t.joinCondition(v)){f=!1;break}u[s.id]=s,c[h]=this.body.nodes[h],n[h]=!0}}0<Object.keys(c).length&&0<Object.keys(u).length&&!0===f&&o.push({nodes:c,edges:u})}}}for(var y=0;y<o.length;y++)this._cluster(o[y].nodes,o[y].edges,t,!1);!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===e)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[e])throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[e];void 0===(t=this._checkOptions(t,o)).clusterNodeProperties.x&&(t.clusterNodeProperties.x=o.x),void 0===t.clusterNodeProperties.y&&(t.clusterNodeProperties.y=o.y),void 0===t.clusterNodeProperties.fixed&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=o.options.fixed.x,t.clusterNodeProperties.fixed.y=o.options.fixed.y);var n={},s={},r=o.id,a=P.default.cloneOptions(o);n[r]=o;for(var h=0;h<o.edges.length;h++){var l=o.edges[h];if(void 0===this.clusteredEdges[l.id]){var d=this._getConnectedId(l,r);if(void 0===this.clusteredNodes[d])if(d!==r)if(void 0===t.joinCondition)s[l.id]=l,n[d]=this.body.nodes[d];else{var c=P.default.cloneOptions(this.body.nodes[d]);!0===t.joinCondition(a,c)&&(s[l.id]=l,n[d]=this.body.nodes[d])}else s[l.id]=l}}this._cluster(n,s,t,i)}},{key:"_createClusterEdges",value:function(e,t,i,o){for(var n=void 0,s=void 0,r=void 0,a=void 0,h=void 0,l=void 0,d=Object.keys(e),c=[],u=0;u<d.length;u++){r=e[s=d[u]];for(var p=0;p<r.edges.length;p++)n=r.edges[p],void 0===this.clusteredEdges[n.id]&&(n.toId==n.fromId?t[n.id]=n:l=n.toId==s?(a=i.id,h=n.fromId):(a=n.toId,h=i.id,a),void 0===e[l]&&c.push({edge:n,fromId:h,toId:a}))}for(var f=0;f<c.length;f++){var m=c[f].edge,g=P.default.cloneOptions(m,"edge");I.deepExtend(g,o),g.from=c[f].fromId,g.to=c[f].toId,g.id="clusterEdge:"+I.randomUUID();var v=this.body.functions.createEdge(g);v.clusteringEdgeReplacingId=m.id,(this.body.edges[v.id]=v).connect(),this._backupEdgeOptions(m),m.setOptions({physics:!1,hidden:!0})}}},{key:"_checkOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]||arguments[3];if(!(Object.keys(e).length<2)){for(var n in e)if(e.hasOwnProperty(n)&&void 0!==this.clusteredNodes[n])return;var s=I.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var r=[];for(var a in e)if(e.hasOwnProperty(a)){var h=P.default.cloneOptions(e[a]);r.push(h)}var l=[];for(var d in t)if(t.hasOwnProperty(d)&&"clusterEdge:"!==d.substr(0,12)){var c=P.default.cloneOptions(t[d],"edge");l.push(c)}if(!(s=i.processProperties(s,r,l)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+I.randomUUID());var u=s.id;void 0===s.label&&(s.label="cluster");var p=void 0;void 0===s.x&&(p=this._getClusterPosition(e),s.x=p.x),void 0===s.y&&(void 0===p&&(p=this._getClusterPosition(e)),s.y=p.y),s.id=u;var f=this.body.functions.createNode(s,y.default);for(var m in f.isCluster=!0,f.containedNodes=e,f.containedEdges=t,f.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[s.id]=f,this._createClusterEdges(e,t,s,i.clusterEdgeProperties),t)if(t.hasOwnProperty(m)&&void 0!==this.body.edges[m]){var g=this.body.edges[m];this._backupEdgeOptions(g),g.setOptions({physics:!1,hidden:!0})}for(var v in e)e.hasOwnProperty(v)&&(this.clusteredNodes[v]={clusterId:s.id,node:this.body.nodes[v]},this.body.nodes[v].setOptions({hidden:!0,physics:!1}));!(s.id=void 0)===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){void 0===this.clusteredEdges[e.id]&&(this.clusteredEdges[e.id]={physics:e.options.physics,hidden:e.options.hidden})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];void 0!==t&&(e.setOptions({physics:t.physics,hidden:t.hidden}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return void 0!==this.body.nodes[e]?!0===this.body.nodes[e].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t=Object.keys(e),i=e[t[0]].x,o=e[t[0]].x,n=e[t[0]].y,s=e[t[0]].y,r=void 0,a=1;a<t.length;a++)i=(r=e[t[a]]).x<i?r.x:i,o=r.x>o?r.x:o,n=r.y<n?r.y:n,s=r.y>s?r.y:s;return{x:.5*(i+o),y:.5*(n+s)}}},{key:"openCluster",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===e)throw new Error("No clusterNodeId supplied to openCluster.");if(void 0===this.body.nodes[e])throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(void 0!==this.body.nodes[e].containedNodes){var o=this.body.nodes[e],n=o.containedNodes,s=o.containedEdges;if(void 0!==t&&void 0!==t.releaseFunction&&"function"==typeof t.releaseFunction){var r={},a={x:o.x,y:o.y};for(var h in n)if(n.hasOwnProperty(h)){var l=this.body.nodes[h];r[h]={x:l.x,y:l.y}}var d=t.releaseFunction(a,r);for(var c in n)if(n.hasOwnProperty(c)){var u=this.body.nodes[c];void 0!==d[c]&&(u.x=void 0===d[c].x?o.x:d[c].x,u.y=void 0===d[c].y?o.y:d[c].y)}}else for(var p in n)if(n.hasOwnProperty(p)){var f=this.body.nodes[p];!1===(f=n[p]).options.fixed.x&&(f.x=o.x),!1===f.options.fixed.y&&(f.y=o.y)}for(var m in n)if(n.hasOwnProperty(m)){var g=this.body.nodes[m];g.vx=o.vx,g.vy=o.vy,g.setOptions({hidden:!1,physics:!0}),delete this.clusteredNodes[m]}for(var v=[],y=0;y<o.edges.length;y++)v.push(o.edges[y]);for(var b=0;b<v.length;b++){var w=v[b],_=this._getConnectedId(w,e);if(void 0!==this.clusteredNodes[_]){var x=this.body.nodes[this.clusteredNodes[_].clusterId],k=this.body.edges[w.clusteringEdgeReplacingId];if(void 0!==k){delete s[(x.containedEdges[k.id]=k).id];var S=k.fromId,O=k.toId;k.toId==_?O=this.clusteredNodes[_].clusterId:S=this.clusteredNodes[_].clusterId;var C=P.default.cloneOptions(k,"edge");I.deepExtend(C,x.clusterEdgeProperties);var M="clusterEdge:"+I.randomUUID();I.deepExtend(C,{from:S,to:O,hidden:!1,physics:!0,id:M});var D=this.body.functions.createEdge(C);D.clusteringEdgeReplacingId=k.id,this.body.edges[M]=D,this.body.edges[M].connect()}}else{var E=this.body.edges[w.clusteringEdgeReplacingId];void 0!==E&&this._restoreEdge(E)}w.cleanup(),w.disconnect(),delete this.body.edges[w.id]}for(var T in s)s.hasOwnProperty(T)&&this._restoreEdge(s[T]);delete this.body.nodes[e],!0===i&&this.body.emitter.emit("_dataChanged")}else console.log("The node:"+e+" is not a cluster.")}},{key:"getNodesInCluster",value:function(e){var t=[];if(!0===this.isCluster(e)){var i=this.body.nodes[e].containedNodes;for(var o in i)i.hasOwnProperty(o)&&t.push(this.body.nodes[o].id)}return t}},{key:"findNode",value:function(e){for(var t=[],i=0;void 0!==this.clusteredNodes[e]&&i<100;)t.push(this.body.nodes[e].id),e=this.clusteredNodes[e].clusterId,i++;return t.push(this.body.nodes[e].id),t.reverse(),t}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:(e.fromId,e.fromId)}},{key:"_getHubSize",value:function(){for(var e=0,t=0,i=0,o=0,n=0;n<this.body.nodeIndices.length;n++){var s=this.body.nodes[this.body.nodeIndices[n]];s.edges.length>o&&(o=s.edges.length),e+=s.edges.length,t+=Math.pow(s.edges.length,2),i+=1}e/=i;var r=(t/=i)-Math.pow(e,2),a=Math.sqrt(r),h=Math.floor(e+2*a);return o<h&&(h=o),h}}]),a);function a(e){var t=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},I.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){t.clusteredNodes={},t.clusteredEdges={}})}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=s},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e},n=i(1),s=(o(r,null,[{key:"getRange",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=1e9,n=-1e9,s=1e9,r=-1e9;if(0<i.length)for(var a=0;a<i.length;a++)s>(t=e[i[a]]).shape.boundingBox.left&&(s=t.shape.boundingBox.left),r<t.shape.boundingBox.right&&(r=t.shape.boundingBox.right),o>t.shape.boundingBox.top&&(o=t.shape.boundingBox.top),n<t.shape.boundingBox.bottom&&(n=t.shape.boundingBox.bottom);return 1e9===s&&-1e9===r&&1e9===o&&-1e9===n&&(r=s=n=o=0),{minX:s,maxX:r,minY:o,maxY:n}}},{key:"getRangeCore",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=1e9,n=-1e9,s=1e9,r=-1e9;if(0<i.length)for(var a=0;a<i.length;a++)s>(t=e[i[a]]).x&&(s=t.x),r<t.x&&(r=t.x),o>t.y&&(o=t.y),n<t.y&&(n=t.y);return 1e9===s&&-1e9===r&&1e9===o&&-1e9===n&&(r=s=n=o=0),{minX:s,maxX:r,minY:o,maxY:n}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var i={};return void 0===t||"node"===t?(n.deepExtend(i,e.options,!0),i.x=e.x,i.y=e.y,i.amountOfConnections=e.edges.length):n.deepExtend(i,e.options,!0),i}}]),r);function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=s},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(65),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,((o=n)&&o.__esModule?o:{default:o}).default),r);function r(e,t,i,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(r).call(this,e,t,i,o,n));return s.isCluster=!0,s.containedNodes={},s.containedEdges={},s}t.default=s},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e};function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var s=i(1),r=(o(a,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){return e.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){return e._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===e.renderingActive&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){--e.renderRequests,e.renderingActive=0<e.renderRequests,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,(!(e.renderingActive=!1)===e.requiresTimeout?clearTimeout:cancelAnimationFrame)(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(e){void 0!==e&&s.selectiveDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag"],this.options,e)}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(!0===this.requiresTimeout?this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval):this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this)))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(!(this.renderTimer=void 0)===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&((this.redrawRequested=!0)===this.requiresTimeout?window.setTimeout(function(){e._redraw(!1)},0):window.requestAnimationFrame(function(){e._redraw(!1)}))}},{key:"_redraw",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var t=this.canvas.frame.canvas.getContext("2d");0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(t.clearRect(0,0,i,o),0===this.canvas.frame.clientWidth)return;t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale),t.beginPath(),this.body.emitter.emit("beforeDrawing",t),t.closePath(),!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&this._drawEdges(t),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(t,e),t.beginPath(),this.body.emitter.emit("afterDrawing",t),t.closePath(),t.restore(),!0===e&&t.clearRect(0,0,i,o)}}},{key:"_resizeNodes",value:function(){var e=this.canvas.frame.canvas.getContext("2d");void 0===this.pixelRatio&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t=this.body.nodes,i=void 0;for(var o in t)t.hasOwnProperty(o)&&((i=t[o]).resize(e),i.updateBoundingBox(e,i.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.body.nodes,o=this.body.nodeIndices,n=void 0,s=[],r=this.canvas.DOMtoCanvas({x:-20,y:-20}),a=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:r.y,left:r.x,bottom:a.y,right:a.x},l=0;l<o.length;l++)(n=i[o[l]]).isSelected()?s.push(o[l]):!0===t||!0===n.isBoundingBoxOverlappingWith(h)?n.draw(e):n.updateBoundingBox(e,n.selected);for(var d=0;d<s.length;d++)(n=i[s[d]]).draw(e)}},{key:"_drawEdges",value:function(e){for(var t=this.body.edges,i=this.body.edgeIndices,o=void 0,n=0;n<i.length;n++)!0===(o=t[i[n]]).connected&&o.draw(e)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=e.indexOf("msie 9.0")||-1!=e.indexOf("safari")&&e.indexOf("chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),a);function a(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.body=e,this.canvas=t,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.pixelRatio=void 0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},s.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},n=i(20),s=i(28),r=i(1),a=(o(h,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.once("resize",function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()})}},{key:"setOptions",value:function(e){var t=this;void 0!==e&&r.selectiveDeepExtend(["width","height","autoResize"],this.options,e),!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===t.setSize()&&t.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),r.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),r.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.pixelRatio:arguments[0];!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&0<this.cameraState.previousWidth){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=e&&1!=t?i=.5*this.cameraState.scale*(e+t):1!=e?i=this.cameraState.scale*e:1!=t&&(i=this.cameraState.scale*t),this.body.view.scale=i;var o=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n=o.x-this.cameraState.position.x,s=o.y-this.cameraState.position.y;this.body.view.translation.x+=n*this.body.view.scale,this.body.view.translation.y+=s*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if("number"==typeof e)return e+"px";if("string"==typeof e){if(-1!==e.indexOf("%")||-1!==e.indexOf("px"))return e;if(-1===e.indexOf("%"))return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var e=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new n(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_ALL}),s.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new n(this.frame),s.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.options.width:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.options.height:arguments[1];e=this._prepareValue(e),t=this._prepareValue(t);var i=!1,o=this.frame.canvas.width,n=this.frame.canvas.height,s=this.frame.canvas.getContext("2d"),r=this.pixelRatio;return this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t?(this._getCameraState(r),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,i=!0):(this.frame.canvas.width==Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&this.frame.canvas.height==Math.round(this.frame.canvas.clientHeight*this.pixelRatio)||this._getCameraState(r),this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&(this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),i=!0),this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)&&(this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),i=!0)),!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(o/this.pixelRatio),oldHeight:Math.round(n/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),h);function h(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},r.extend(this.options,this.defaultOptions),this.bindEventListeners()}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},s=i(103),c=(o=s)&&o.__esModule?o:{default:o},r=i(1),a=(n(h,[{key:"setOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}},{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{nodes:[]}:arguments[0],t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=void 0,o=void 0;if(void 0!==e.nodes&&0!==e.nodes.length||(e.nodes=this.body.nodeIndices),!0===t){var n=0;for(var s in this.body.nodes)this.body.nodes.hasOwnProperty(s)&&!0===this.body.nodes[s].predefinedPosition&&(n+=1);if(n>.5*this.body.nodeIndices.length)return void this.fit(e,!1);i=c.default.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,o*=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600)}else{this.body.emitter.emit("_resizeNodes"),i=c.default.getRange(this.body.nodes,e.nodes);var r=1.1*Math.abs(i.maxX-i.minX),a=1.1*Math.abs(i.maxY-i.minY),h=this.canvas.frame.canvas.clientWidth/r,l=this.canvas.frame.canvas.clientHeight/a;o=h<=l?h:l}(1<o||0===o)&&(o=1);var d={position:c.default.findCenter(i),scale:o,animation:e.animation};this.moveTo(d)}},{key:"focus",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0!==this.body.nodes[e]){var i={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=i,t.lockedOnNode=e,this.moveTo(t)}else console.log("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){return void 0===e?void(e={}):(void 0===e.offset&&(e.offset={x:0,y:0}),void 0===e.offset.x&&(e.offset.x=0),void 0===e.offset.y&&(e.offset.y=0),void 0===e.scale&&(e.scale=this.body.view.scale),void 0===e.position&&(e.position=this.getViewPosition()),void 0===e.animation&&(e.animation={duration:0}),!1===e.animation&&(e.animation={duration:0}),!0===e.animation&&(e.animation={}),void 0===e.animation.duration&&(e.animation.duration=1e3),void 0===e.animation.easingFunction&&(e.animation.easingFunction="easeInOutQuad"),void this.animateView(e))}},{key:"animateView",value:function(e){if(void 0!==e){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),!0===e.locked&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=t.x-e.position.x,o=t.y-e.position.y;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+e.offset.x,y:this.sourceTranslation.y+o*this.targetScale+e.offset.y},0===e.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var e=this.body.nodes[this.lockedOnNodeId].x,t=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),o=i.x-e,n=i.y-t,s=this.body.view.translation,r={x:s.x+o*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+n*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===e?1:this.easingTime;var t=r.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),h);function h(e,t){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=a},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},s=o(i(109)),v=o(i(110)),r=i(1),a=(n(h,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer})}},{key:"setOptions",value:function(e){void 0!==e&&(r.selectiveNotDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),r.mergeOptions(this.options,e,"keyboard"),e.tooltip&&(r.extend(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=r.parseColor(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-r.getAbsoluteLeft(this.canvas.frame.canvas),y:e.y-r.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){50<(new Date).valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t),this.selectionHandler._generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if(10<(new Date).valueOf()-this.touchTime){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("release",e,t),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler._generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this.selectionHandler._getSelectedEdgeCount(),n=this.selectionHandler._getSelectedNodeCount(),s=this.selectionHandler.getSelection(),r=void 0;r=!0===i?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e);var a=this.selectionHandler._getSelectedEdgeCount(),h=this.selectionHandler._getSelectedNodeCount(),l=this.selectionHandler.getSelection(),d=this._determineIfDifferent(s,l),c=d.nodesChanged,u=d.edgesChanged,p=!1;0<h-n?(this.selectionHandler._generateClickEvent("selectNode",t,e),p=r=!0):!0===c&&0<h?(this.selectionHandler._generateClickEvent("deselectNode",t,e,s),this.selectionHandler._generateClickEvent("selectNode",t,e),r=p=!0):h-n<0&&(this.selectionHandler._generateClickEvent("deselectNode",t,e,s),r=!0),0<a-o&&!1===p?(this.selectionHandler._generateClickEvent("selectEdge",t,e),r=!0):0<a&&!0===u?(this.selectionHandler._generateClickEvent("deselectEdge",t,e,s),this.selectionHandler._generateClickEvent("selectEdge",t,e),r=!0):a-o<0&&(this.selectionHandler._generateClickEvent("deselectEdge",t,e,s),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",t,e)}},{key:"_determineIfDifferent",value:function(e,t){for(var i=!1,o=!1,n=0;n<e.nodes.length;n++)-1===t.nodes.indexOf(e.nodes[n])&&(i=!0);for(var s=0;s<t.nodes.length;s++)-1===e.nodes.indexOf(e.nodes[s])&&(i=!0);for(var r=0;r<e.edges.length;r++)-1===t.edges.indexOf(e.edges[r])&&(o=!0);for(var a=0;a<t.edges.length;a++)-1===e.edges.indexOf(e.edges[a])&&(o=!0);return{nodesChanged:i,edgesChanged:o}}},{key:"onDragStart",value:function(e){void 0===this.drag.pointer&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=r.extend({},this.body.view.translation),(this.drag.nodeId=void 0)!==t&&!0===this.options.dragNodes){this.drag.nodeId=t.id,!1===t.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(t)),this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var o in i)if(i.hasOwnProperty(o)){var n=i[o],s={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(s)}}else this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(e){var n=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var t=this.getPointer(e.center),s=this.drag.selection;if(s&&s.length&&!0===this.options.dragNodes)!function(){n.selectionHandler._generateClickEvent("dragging",e,t);var i=t.x-n.drag.pointer.x,o=t.y-n.drag.pointer.y;s.forEach(function(e){var t=e.node;!1===e.xFixed&&(t.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(e.x)+i)),!1===e.yFixed&&(t.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(e.y)+o))}),n.body.emitter.emit("startSimulation")}();else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",e,t,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);var i=t.x-this.drag.pointer.x,o=t.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+o},this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function(e){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(t.forEach(function(e){e.node.options.fixed.x=e.xFixed,e.node.options.fixed.y=e.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*e.scale;this.zoom(i,t)}},{key:"zoom",value:function(e,t){if(!0===this.options.zoomView){var i=this.body.view.scale;e<1e-5&&(e=1e-5),10<e&&(e=10);var o=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(o=this.canvas.DOMtoCanvas(this.drag.pointer));var n=this.body.view.translation,s=e/i,r=(1-s)*t.x+n.x*s,a=(1-s)*t.y+n.y*s;if(this.body.view.scale=e,this.body.view.translation={x:r,y:a},null!=o){var h=this.canvas.canvasToDOM(o);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),i<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}}},{key:"onMouseWheel",value:function(e){if(!0===this.options.zoomView){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0!==t){var i=this.body.view.scale,o=t/10;t<0&&(o/=1-o),i*=1+o;var n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(i,n)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,i=this.getPointer({x:e.clientX,y:e.clientY}),o=!1;if(void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(o=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===o&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return t._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover){var n=this.selectionHandler.getNodeAt(i);void 0===n&&(n=this.selectionHandler.getEdgeAt(i)),this.selectionHandler.hoverObject(n)}}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),i=this.canvas._YconvertDOMtoCanvas(e.y),o={left:t,top:i,right:t,bottom:i},n=void 0===this.popupObj?void 0:this.popupObj.id,s=!1,r="node";if(void 0===this.popupObj){for(var a=this.body.nodeIndices,h=this.body.nodes,l=void 0,d=[],c=0;c<a.length;c++)!0===(l=h[a[c]]).isOverlappingWith(o)&&void 0!==l.getTitle()&&d.push(a[c]);0<d.length&&(this.popupObj=h[d[d.length-1]],s=!0)}if(void 0===this.popupObj&&!1===s){for(var u=this.body.edgeIndices,p=this.body.edges,f=void 0,m=[],g=0;g<u.length;g++)!0===(f=p[u[g]]).isOverlappingWith(o)&&!0===f.connected&&void 0!==f.getTitle()&&m.push(u[g]);0<m.length&&(this.popupObj=p[m[m.length-1]],r="edge")}void 0!==this.popupObj?this.popupObj.id!==n&&(void 0===this.popup&&(this.popup=new v.default(this.canvas.frame)),this.popup.popupTargetType=r,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),i=!1;"node"===this.popup.popupTargetType?void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t))&&(i=this.selectionHandler.getNodeAt(e).id===this.popup.popupTargetId):void 0===this.selectionHandler.getNodeAt(e)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t)),!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),h);function h(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.canvas=t,this.selectionHandler=i,this.navigationHandler=new s.default(e,t),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},r.extend(this.options,this.defaultOptions),this.bindEventListeners()}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},r=(i(1),i(20)),a=i(28),n=i(23),s=(o(h,[{key:"setOptions",value:function(e){void 0!==e&&(this.options=e,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var o=0;o<t.length;o++){this.navigationDOM[t[o]]=document.createElement("div"),this.navigationDOM[t[o]].className="vis-button vis-"+t[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[o]]);var n=new r(this.navigationDOM[t[o]]);"_fit"===i[o]?a.onTouch(n,this._fit.bind(this)):a.onTouch(n,this.bindToRedraw.bind(this,i[o])),this.navigationHammers.push(n)}var s=new r(this.canvas.frame);a.onRelease(s,function(){e._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){void 0===this.boundFunctions[e]&&(this.boundFunctions[e]=this[e].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){void 0!==this.boundFunctions[e]&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){700<(new Date).valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)this.boundFunctions.hasOwnProperty(e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){this.body.view.scale*=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale})}},{key:"_zoomOut",value:function(){this.body.view.scale/=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}},{key:"configureKeyboardBindings",value:function(){var e=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=n({container:window,preventDefault:!0}):this.keycharm=n({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){e.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){e.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){e.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){e.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){e.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){e.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){e.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){e.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){e.unbindFromRedraw("_zoomOut")},"keyup")))}}]),h);function h(e,t){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){i.activated=!0,i.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){i.activated=!1,i.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==i.keycharm&&i.keycharm.destroy()}),this.options={}}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"setPosition",value:function(e,t){this.x=parseInt(e),this.y=parseInt(t)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e}},{key:"show",value:function(e){if(void 0===e&&(e=!0),!0===e){var t=this.frame.clientHeight,i=this.frame.clientWidth,o=this.frame.parentNode.clientHeight,n=this.frame.parentNode.clientWidth,s=this.y-t;s+t+this.padding>o&&(s=o-t-this.padding),s<this.padding&&(s=this.padding);var r=this.x;r+i+this.padding>n&&(r=n-i-this.padding),r<this.padding&&(r=this.padding),this.frame.style.left=r+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.visibility="hidden"}}]),o);function o(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.container=e,this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-network-tooltip",this.container.appendChild(this.frame)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e},s=o(i(65)),r=o(i(85)),a=i(1),h=(n(l,[{key:"setOptions",value:function(e){void 0!==e&&a.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}},{key:"selectOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var i=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),void 0!==i&&(t=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var i=this.getNodeAt(e)||this.getEdgeAt(e);void 0!==i&&((t=!0)===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_generateClickEvent",value:function(e,t,i,o){var n=void 0;(n=!0===(!(arguments.length<=4||void 0===arguments[4])&&arguments[4])?{nodes:[],edges:[]}:this.getSelection()).pointer={DOM:{x:i.x,y:i.y},canvas:this.canvas.DOMtoCanvas(i)},n.event=t,void 0!==o&&(n.previousSelection=o),this.body.emitter.emit(e,n)}},{key:"selectObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.options.selectConnectedEdges:arguments[1];return void 0!==e&&(e instanceof s.default&&!0===t&&this._selectConnectedEdges(e),e.select(),this._addToSelection(e),!0)}},{key:"deselectObject",value:function(e){!0===e.isSelected()&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],i=this.body.nodes,o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodeIndices[o];i[n].isOverlappingWith(e)&&t.push(n)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],i=this._pointerToPositionObject(e),o=this._getAllNodesOverlappingWith(i);return 0<o.length?!0===t?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var i=this.body.edges,o=0;o<this.body.edgeIndices.length;o++){var n=this.body.edgeIndices[o];i[n].isOverlappingWith(e)&&t.push(n)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],i=this._pointerToPositionObject(e),o=this._getAllEdgesOverlappingWith(i);return 0<o.length?!0===t?this.body.edges[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_addToSelection",value:function(e){e instanceof s.default?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e}},{key:"_addToHover",value:function(e){e instanceof s.default?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){e instanceof s.default?(delete this.selectionObj.nodes[e.id],this._unselectConnectedEdges(e)):delete this.selectionObj.edges[e.id]}},{key:"unselectAll",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&this.selectionObj.edges[t].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedNode",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e]}},{key:"_getSelectedEdge",value:function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e]}},{key:"_getSelectedEdgeCount",value:function(){var e=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedObjectCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(e+=1);return e}},{key:"_selectionIsEmpty",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&1<this.selectionObj.nodes[e].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.unselect(),this._removeFromSelection(i)}}},{key:"blurObject",value:function(e){!0===e.hover&&(e.hover=!1,e instanceof s.default?this.body.emitter.emit("blurNode",{node:e.id}):this.body.emitter.emit("blurEdge",{edge:e.id}))}},{key:"hoverObject",value:function(e){var t=!1;for(var i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(void 0===e||e instanceof s.default&&e.id!=i||e instanceof r.default)&&(this.blurObject(this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],t=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===t?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):void 0===e&&(this.blurObject(this.hoverObj.edges[o]),delete this.hoverObj.edges[o],t=!0));void 0!==e&&(!1===e.hover&&(e.hover=!0,this._addToHover(e),t=!0,e instanceof s.default?this.body.emitter.emit("hoverNode",{node:e.id}):this.body.emitter.emit("hoverEdge",{edge:e.id})),e instanceof s.default&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(e)),!0===t&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&e.push(this.selectionObj.nodes[t].id);return e}},{key:"getSelectedEdges",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&e.push(this.selectionObj.edges[t].id);return e}},{key:"setSelection",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0,o=void 0;if(!e||!e.nodes&&!e.edges)throw"Selection must be an object with nodes and/or edges properties";if(!t.unselectAll&&void 0!==t.unselectAll||this.unselectAll(),e.nodes)for(i=0;i<e.nodes.length;i++){o=e.nodes[i];var n=this.body.nodes[o];if(!n)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(n,t.highlightEdges)}if(e.edges)for(i=0;i<e.edges.length;i++){o=e.edges[i];var s=this.body.edges[o];if(!s)throw new RangeError('Edge with id "'+o+'" not found');this.selectObject(s)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.body.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.body.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}}]),l);function l(e,t){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.body=e,this.canvas=t,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},a.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){i.updateSelection()})}function d(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=h},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,D=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e},r=i(103),a=(o=r)&&o.__esModule?o:{default:o},h=i(1),l=(s(d,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()})}},{key:"setOptions",value:function(e,t){if(void 0!==e){var i=this.options.hierarchical.enabled;if(h.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,e),h.mergeOptions(this.options,e,"hierarchical"),void 0!==e.randomSeed&&(this.initialRandomSeed=e.randomSeed),!0===this.options.hierarchical.enabled)return!0===i&&this.body.emitter.emit("refresh",!0),"RL"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?0<this.options.hierarchical.levelSeparation&&(this.options.hierarchical.levelSeparation*=-1):this.options.hierarchical.levelSeparation<0&&(this.options.hierarchical.levelSeparation*=-1),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(!0===i)return this.body.emitter.emit("refresh"),h.deepExtend(t,this.optionsBackup)}return t}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(!0===this.options.hierarchical.enabled){void 0===e.physics||!0===e.physics?(e.physics={enabled:void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"},this.optionsBackup.physics.enabled=void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"):"object"===n(e.physics)?(this.optionsBackup.physics.enabled=void 0===e.physics.enabled||e.physics.enabled,this.optionsBackup.physics.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):!1!==e.physics&&(this.optionsBackup.physics.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var t="horizontal";"RL"!==this.options.hierarchical.direction&&"LR"!==this.options.hierarchical.direction||(t="vertical"),void 0===e.edges?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1}):void 0===e.edges.smooth?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1):"boolean"==typeof e.edges.smooth?(this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:t}):(void 0!==e.edges.smooth.type&&"dynamic"!==e.edges.smooth.type&&(t=e.edges.smooth.type),this.optionsBackup.edges={smooth:void 0===e.edges.smooth.enabled||e.edges.smooth.enabled,type:void 0===e.edges.smooth.type?"dynamic":e.edges.smooth.type,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0!==e.edges.smooth.forceDirection&&e.edges.smooth.forceDirection},e.edges.smooth={enabled:void 0===e.edges.smooth.enabled||e.edges.smooth.enabled,type:t,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0!==e.edges.smooth.forceDirection&&e.edges.smooth.forceDirection}),this.body.emitter.emit("_forceDisableDynamicCurves",t)}return e}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"positionInitially",value:function(e){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var t=0;t<e.length;t++){var i=e[t],o=+e.length+10,n=2*Math.PI*this.seededRandom();void 0===i.x&&(i.x=o*Math.cos(n)),void 0===i.y&&(i.y=o*Math.sin(n))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var e=0,t=0;t<this.body.nodeIndices.length;t++)!0===this.body.nodes[this.body.nodeIndices[t]].predefinedPosition&&(e+=1);if(e<.5*this.body.nodeIndices.length){var i=0;if(100<this.body.nodeIndices.length){for(var o=this.body.nodeIndices.length;100<this.body.nodeIndices.length;){i+=1;var n=this.body.nodeIndices.length;if(i%3==0?this.body.modules.clustering.clusterBridges():this.body.modules.clustering.clusterOutliers(),n==this.body.nodeIndices.length&&i%3!=0||10<i)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*o)})}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,!0),this._shiftToCenter();for(var s=0;s<this.body.nodeIndices.length;s++)this.body.nodes[this.body.nodeIndices[s]].x+=70*(.5-this.seededRandom()),this.body.nodes[this.body.nodeIndices[s]].y+=70*(.5-this.seededRandom());this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=a.default.getRangeCore(this.body.nodes,this.body.nodeIndices),t=a.default.findCenter(e),i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].x-=t.x,this.body.nodes[this.body.nodeIndices[i]].y-=t.y}},{key:"_declusterAll",value:function(){for(var e=!0;!0===e;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)!0===this.body.nodes[this.body.nodeIndices[t]].isCluster&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));!0===e&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&0<this.body.nodeIndices.length){var e=void 0,t=void 0,i=!1,o=!1;for(t in this.hierarchicalLevels={},this.lastNodeOnLevel={},this.hierarchicalChildrenReference={},this.hierarchicalParentReference={},this.hierarchicalTrees={},this.treeIndex=-1,this.distributionOrdering={},this.distributionIndex={},this.distributionOrderingPresence={},this.body.nodes)this.body.nodes.hasOwnProperty(t)&&(void 0===(e=this.body.nodes[t]).options.x&&e.options.y,void 0!==e.options.level?(i=!0,this.hierarchicalLevels[t]=e.options.level):o=!0);if(!0===o&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");for(var n in!0===o&&("hubsize"===this.options.hierarchical.sortMethod?this._determineLevelsByHubsize():"directed"===this.options.hierarchical.sortMethod?this._determineLevelsDirected():"custom"===this.options.hierarchical.sortMethod&&this._determineLevelsCustomCallback()),this.body.nodes)this.body.nodes.hasOwnProperty(n)&&void 0===this.hierarchicalLevels[n]&&(this.hierarchicalLevels[n]=0);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){function i(e){var t=1e9,i=-1e9;for(var o in O.hierarchicalTrees)if(O.hierarchicalTrees.hasOwnProperty(o)&&O.hierarchicalTrees[o]===e){var n=O._getPositionForHierarchy(O.body.nodes[o]);t=Math.min(n,t),i=Math.max(n,i)}return{min:t,max:i}}function k(e,t){if(t[e.id]=!0,O.hierarchicalChildrenReference[e.id]){var i=O.hierarchicalChildrenReference[e.id];if(0<i.length)for(var o=0;o<i.length;o++)k(O.body.nodes[i[o]],t)}}function S(e){var t=arguments.length<=1||void 0===arguments[1]?1e9:arguments[1],i=1e9,o=1e9,n=1e9,s=-1e9;for(var r in e)if(e.hasOwnProperty(r)){var a=O.body.nodes[r],h=O.hierarchicalLevels[a.id],l=O._getPositionForHierarchy(a),d=O._getSpaceAroundNode(a,e),c=D(d,2),u=c[0],p=c[1];i=Math.min(u,i),o=Math.min(p,o),h<=t&&(n=Math.min(l,n),s=Math.max(l,s))}return[n,s,i,o]}function b(e){var t=O.hierarchicalLevels[e];if(O.hierarchicalChildrenReference[e]){var i=O.hierarchicalChildrenReference[e];if(0<i.length)for(var o=0;o<i.length;o++)t=Math.max(t,b(i[o]))}return t}function a(e,t){var i=O.hierarchicalParentReference[e.id],o=O.hierarchicalParentReference[t.id];if(void 0===i||void 0===o)return!1;for(var n=0;n<i.length;n++)for(var s=0;s<o.length;s++)if(i[n]==o[s])return!0;return!1}function o(e,t,i){for(var o=0;o<t.length;o++){var n=t[o],s=O.distributionOrdering[n];if(1<s.length)for(var r=0;r<s.length-1;r++)!0===a(s[r],s[r+1])&&O.hierarchicalTrees[s[r].id]===O.hierarchicalTrees[s[r+1].id]&&e(s[r],s[r+1],i)}}function n(e,t){var i,o,n,s=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=O._getPositionForHierarchy(e),a=O._getPositionForHierarchy(t);if(Math.abs(a-r)>O.options.hierarchical.nodeSpacing){var h={};h[e.id]=!0;var l={};l[t.id]=!0,k(e,h),k(t,l);var d=(i=t,o=b(e.id),n=b(i.id),Math.min(o,n)),c=S(h,d),u=D(c,4),p=(u[0],u[1]),f=(u[2],u[3],S(l,d)),m=D(f,4),g=m[0],v=(m[1],m[2]);if(m[3],Math.abs(p-g)>O.options.hierarchical.nodeSpacing){var y=p-g+O.options.hierarchical.nodeSpacing;y<-v+O.options.hierarchical.nodeSpacing&&(y=-v+O.options.hierarchical.nodeSpacing),y<0&&(O._shiftBlock(t.id,y),(C=!0)===s&&O._centerParent(t))}}}function h(e,l){for(var t=l.id,i=l.edges,o=O.hierarchicalLevels[l.id],s=O.options.hierarchical.levelSeparation*O.options.hierarchical.levelSeparation,r={},n=[],a=0;a<i.length;a++){var h=i[a];if(h.toId!=h.fromId){var d=h.toId==t?h.from:h.to;r[i[a].id]=d,O.hierarchicalLevels[d.id]<o&&n.push(h)}}function c(e,t){for(var i=0,o=0;o<t.length;o++)if(void 0!==r[t[o].id]){var n=O._getPositionForHierarchy(r[t[o].id])-e;i+=n/Math.sqrt(n*n+s)}return i}function u(e,t){for(var i=0,o=0;o<t.length;o++)if(void 0!==r[t[o].id]){var n=O._getPositionForHierarchy(r[t[o].id])-e;i-=s*Math.pow(n*n+s,-1.5)}return i}function p(e,t){for(var i=O._getPositionForHierarchy(l),o={},n=0;n<e;n++){var s=c(i,t),r=u(i,t);if(void 0!==o[i-=Math.max(-40,Math.min(40,Math.round(s/r)))])break;o[i]=n}return i}var f,m,g,v,y,b,w,_,x=p(e,n);(function(e){var t=O._getPositionForHierarchy(l);if(void 0===M[l.id]){var i={};i[l.id]=!0,k(l,i),M[l.id]=i}var o=S(M[l.id]),n=D(o,4),s=(n[0],n[1],n[2]),r=n[3],a=e-t,h=0;0<a?h=Math.min(a,r-O.options.hierarchical.nodeSpacing):a<0&&(h=-Math.min(-a,s-O.options.hierarchical.nodeSpacing)),0!=h&&(O._shiftBlock(l.id,h),C=!0)})(x),x=p(e,i),f=x,m=O._getPositionForHierarchy(l),g=O._getSpaceAroundNode(l),v=D(g,2),y=v[0],b=v[1],0<(w=f-(_=m))?_=Math.min(m+(b-O.options.hierarchical.nodeSpacing),f):w<0&&(_=Math.max(m-(y-O.options.hierarchical.nodeSpacing),f)),_!==m&&(O._setPositionForHierarchy(l,_,void 0,!0),C=!0)}var O=this,C=!1,M={},s=function(e,t){for(var i in O.hierarchicalTrees)if(O.hierarchicalTrees.hasOwnProperty(i)&&O.hierarchicalTrees[i]===e){var o=O.body.nodes[i],n=O._getPositionForHierarchy(o);O._setPositionForHierarchy(o,n+t,void 0,!0)}},r=function(){for(var e=[],t=0;t<=O.treeIndex;t++)e.push(i(t));return e};!0===this.options.hierarchical.blockShifting&&(function(e){var t=Object.keys(O.distributionOrdering);t=t.reverse();for(var i=0;i<e&&(o(n,t,!(C=!1)),!0===C);i++);}(5),function(){for(var e in O.body.nodes)O.body.nodes.hasOwnProperty(e)&&O._centerParent(O.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(e){var t=Object.keys(O.distributionOrdering);t=t.reverse();for(var i=0;i<e;i++){C=!1;for(var o=0;o<t.length;o++)for(var n=t[o],s=O.distributionOrdering[n],r=0;r<s.length;r++)h(1e3,s[r]);if(!0!==C)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var e=Object.keys(O.distributionOrdering);e=e.reverse();for(var t=0;t<e.length;t++)for(var i=e[t],o=O.distributionOrdering[i],n=0;n<o.length;n++)O._centerParent(o[n])}(),function(){for(var e=r(),t=0;t<e.length-1;t++){var i=e[t].max-e[t+1].min;s(t+1,i+O.options.hierarchical.treeSpacing)}}()}},{key:"_getSpaceAroundNode",value:function(e,t){var i=!0;void 0===t&&(i=!1);var o=this.hierarchicalLevels[e.id];if(void 0===o)return[0,0];var n=this.distributionIndex[e.id],s=this._getPositionForHierarchy(e),r=1e9,a=1e9;if(0!==n){var h=this.distributionOrdering[o][n-1];(!0===i&&void 0===t[h.id]||!1===i)&&(r=s-this._getPositionForHierarchy(h))}if(n!=this.distributionOrdering[o].length-1){var l=this.distributionOrdering[o][n+1];if(!0===i&&void 0===t[l.id]||!1===i){var d=this._getPositionForHierarchy(l);a=Math.min(a,d-s)}}return[r,a]}},{key:"_centerParent",value:function(e){if(this.hierarchicalParentReference[e.id])for(var t=this.hierarchicalParentReference[e.id],i=0;i<t.length;i++){var o=t[i],n=this.body.nodes[o];if(this.hierarchicalChildrenReference[o]){var s=1e9,r=-1e9,a=this.hierarchicalChildrenReference[o];if(0<a.length)for(var h=0;h<a.length;h++){var l=this.body.nodes[a[h]];s=Math.min(s,this._getPositionForHierarchy(l)),r=Math.max(r,this._getPositionForHierarchy(l))}var d=this._getPositionForHierarchy(n),c=this._getSpaceAroundNode(n),u=D(c,2),p=u[0],f=u[1],m=.5*(s+r),g=d-m;(g<0&&Math.abs(g)<f-this.options.hierarchical.nodeSpacing||0<g&&Math.abs(g)<p-this.options.hierarchical.nodeSpacing)&&this._setPositionForHierarchy(n,m,void 0,!0)}}}},{key:"_placeNodesByHierarchy",value:function(e){for(var t in this.positionedNodes={},e)if(e.hasOwnProperty(t)){var i=Object.keys(e[t]);i=this._indexArrayToNodes(i),this._sortNodeArray(i);for(var o=0,n=0;n<i.length;n++){var s=i[n];if(void 0===this.positionedNodes[s.id]){var r=this.options.hierarchical.nodeSpacing*o;0<o&&(r=this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing),this._setPositionForHierarchy(s,r,t),this._validataPositionAndContinue(s,t,r),o++}}}}},{key:"_placeBranchNodes",value:function(e,t){if(void 0!==this.hierarchicalChildrenReference[e]){for(var i=[],o=0;o<this.hierarchicalChildrenReference[e].length;o++)i.push(this.body.nodes[this.hierarchicalChildrenReference[e][o]]);this._sortNodeArray(i);for(var n=0;n<i.length;n++){var s,r=i[n],a=this.hierarchicalLevels[r.id];if(!(t<a&&void 0===this.positionedNodes[r.id]))return;s=0===n?this._getPositionForHierarchy(this.body.nodes[e]):this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing,this._setPositionForHierarchy(r,s,a),this._validataPositionAndContinue(r,a,s)}for(var h=1e9,l=-1e9,d=0;d<i.length;d++){var c=i[d].id;h=Math.min(h,this._getPositionForHierarchy(this.body.nodes[c])),l=Math.max(l,this._getPositionForHierarchy(this.body.nodes[c]))}this._setPositionForHierarchy(this.body.nodes[e],.5*(h+l),t)}}},{key:"_validataPositionAndContinue",value:function(e,t,i){if(void 0!==this.lastNodeOnLevel[t]){var o=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[t]]);if(i-o<this.options.hierarchical.nodeSpacing){var n=o+this.options.hierarchical.nodeSpacing-i,s=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(s.withChild,n)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.body.nodes[e[i]]);return t}},{key:"_getDistribution",value:function(){var e={},t=void 0,i=void 0;for(t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){i=this.body.nodes[t];var o=void 0===this.hierarchicalLevels[t]?0:this.hierarchicalLevels[t];"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?(i.y=this.options.hierarchical.levelSeparation*o,i.options.fixed.y=!0):(i.x=this.options.hierarchical.levelSeparation*o,i.options.fixed.x=!0),void 0===e[o]&&(e[o]={}),e[o][t]=i}return e}},{key:"_getHubSize",value:function(){var e=0;for(var t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){var i=this.body.nodes[t];void 0===this.hierarchicalLevels[t]&&(e=i.edges.length<e?e:i.edges.length)}return e}},{key:"_determineLevelsByHubsize",value:function(){function e(e,t){void 0===i.hierarchicalLevels[t.id]&&(void 0===i.hierarchicalLevels[e.id]&&(i.hierarchicalLevels[e.id]=0),i.hierarchicalLevels[t.id]=i.hierarchicalLevels[e.id]+1)}for(var i=this,t=1;0<t&&0!==(t=this._getHubSize());)for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.body.nodes[o].edges.length===t&&this._crawlNetwork(e,o)}},{key:"_determineLevelsCustomCallback",value:function(){var n=this;this._crawlNetwork(function(e,t,i){void 0===n.hierarchicalLevels[e.id]&&(n.hierarchicalLevels[e.id]=1e5);var o=(a.default.cloneOptions(e,"node"),a.default.cloneOptions(t,"node"),void a.default.cloneOptions(i,"edge"));n.hierarchicalLevels[t.id]=n.hierarchicalLevels[e.id]+o}),this._setMinLevelToZero()}},{key:"_determineLevelsDirected",value:function(){var o=this;this._crawlNetwork(function(e,t,i){void 0===o.hierarchicalLevels[e.id]&&(o.hierarchicalLevels[e.id]=1e4),i.toId==t.id?o.hierarchicalLevels[t.id]=o.hierarchicalLevels[e.id]+1:o.hierarchicalLevels[t.id]=o.hierarchicalLevels[e.id]-1}),this._setMinLevelToZero()}},{key:"_setMinLevelToZero",value:function(){var e=1e9;for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&void 0!==this.hierarchicalLevels[t]&&(e=Math.min(this.hierarchicalLevels[t],e));for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&void 0!==this.hierarchicalLevels[i]&&(this.hierarchicalLevels[i]-=e)}},{key:"_generateMap",value:function(){var n=this;this._crawlNetwork(function(e,t){if(n.hierarchicalLevels[t.id]>n.hierarchicalLevels[e.id]){var i=e.id,o=t.id;void 0===n.hierarchicalChildrenReference[i]&&(n.hierarchicalChildrenReference[i]=[]),n.hierarchicalChildrenReference[i].push(o),void 0===n.hierarchicalParentReference[o]&&(n.hierarchicalParentReference[o]=[]),n.hierarchicalParentReference[o].push(i)}})}},{key:"_crawlNetwork",value:function(){function n(e,t){if(void 0===a[e.id]){void 0===s.hierarchicalTrees[e.id]&&(s.hierarchicalTrees[e.id]=t,s.treeIndex=Math.max(t,s.treeIndex)),a[e.id]=!0;for(var i=void 0,o=0;o<e.edges.length;o++)!0===e.edges[o].connected&&(i=e.edges[o].toId===e.id?e.edges[o].from:e.edges[o].to,e.id!==i.id&&(r(e,i,e.edges[o]),n(i,t)))}}var s=this,r=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],e=arguments[1],a={},t=0;if(void 0===e)for(var i=0;i<this.body.nodeIndices.length;i++){var o=this.body.nodes[this.body.nodeIndices[i]];void 0===a[o.id]&&(n(o,t),t+=1)}else{var h=this.body.nodes[e];if(void 0===h)return void console.error("Node not found:",e);n(h)}}},{key:"_shiftBlock",value:function(e,t){if("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.body.nodes[e].x+=t:this.body.nodes[e].y+=t,void 0!==this.hierarchicalChildrenReference[e])for(var i=0;i<this.hierarchicalChildrenReference[e].length;i++)this._shiftBlock(this.hierarchicalChildrenReference[e][i],t)}},{key:"_findCommonParent",value:function(e,t){var r=this,i={};return function e(t,i){if(void 0!==r.hierarchicalParentReference[i])for(var o=0;o<r.hierarchicalParentReference[i].length;o++){var n=r.hierarchicalParentReference[i][o];t[n]=!0,e(t,n)}}(i,e),function e(t,i){if(void 0!==r.hierarchicalParentReference[i])for(var o=0;o<r.hierarchicalParentReference[i].length;o++){var n=r.hierarchicalParentReference[i][o];if(void 0!==t[n])return{foundParent:n,withChild:i};var s=e(t,n);if(null!==s.foundParent)return s}return{foundParent:null,withChild:i}}(i,t)}},{key:"_setPositionForHierarchy",value:function(e,t,i){!0!==(!(arguments.length<=3||void 0===arguments[3])&&arguments[3])&&(void 0===this.distributionOrdering[i]&&(this.distributionOrdering[i]=[],this.distributionOrderingPresence[i]={}),void 0===this.distributionOrderingPresence[i][e.id]&&(this.distributionOrdering[i].push(e),this.distributionIndex[e.id]=this.distributionOrdering[i].length-1),this.distributionOrderingPresence[i][e.id]=!0),"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x=t:e.y=t}},{key:"_getPositionForHierarchy",value:function(e){return"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x:e.y}},{key:"_sortNodeArray",value:function(e){1<e.length&&("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.sort(function(e,t){return e.x-t.x}):e.sort(function(e,t){return e.y-t.y}))}}]),d);function d(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,d),this.body=e,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},h.extend(this.options,this.defaultOptions),this.bindEventListeners()}function c(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},s=i(1),n=i(20),r=i(28),a=(o(h,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,i){void 0!==t&&(void 0!==t.locale?this.options.locale=t.locale:this.options.locale=i.locale,void 0!==t.locales?this.options.locales=t.locales:this.options.locales=i.locales),void 0!==e&&("boolean"==typeof e?this.options.enabled=e:(this.options.enabled=!0,s.deepExtend(this.options,e)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var e=this.selectionHandler._getSelectedNodeCount(),t=this.selectionHandler._getSelectedEdgeCount(),i=e+t,o=this.options.locales[this.options.locale],n=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),n=!0),!1!==this.options.addEdge&&(!0===n?this._createSeperator(1):n=!0,this._createAddEdgeButton(o)),1===e&&"function"==typeof this.options.editNode?(!0===n?this._createSeperator(2):n=!0,this._createEditNodeButton(o)):1===t&&0===e&&!1!==this.options.editEdge&&(!0===n?this._createSeperator(3):n=!0,this._createEditEdgeButton(o)),0!==i&&(0<e&&!1!==this.options.deleteNode||0===e&&!1!==this.options.deleteEdge)&&(!0===n&&this._createSeperator(4),this._createDeleteButton(o)),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=s.deepExtend({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",function(){}),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){var i,o,n,e=this;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId?(i=e.body.edges[e.edgeBeingEditedId],o=e._getNewTargetNode(i.from.x,i.from.y),n=e._getNewTargetNode(i.to.x,i.to.y),e.temporaryIds.nodes.push(o.id),e.temporaryIds.nodes.push(n.id),e.body.nodes[o.id]=o,e.body.nodeIndices.push(o.id),e.body.nodes[n.id]=n,e.body.nodeIndices.push(n.id),e._temporaryBindUI("onTouch",e._controlNodeTouch.bind(e)),e._temporaryBindUI("onTap",function(){}),e._temporaryBindUI("onHold",function(){}),e._temporaryBindUI("onDragStart",e._controlNodeDragStart.bind(e)),e._temporaryBindUI("onDrag",e._controlNodeDrag.bind(e)),e._temporaryBindUI("onDragEnd",e._controlNodeDragEnd.bind(e)),e._temporaryBindUI("onMouseMove",function(){}),e._temporaryBindEvent("beforeDrawing",function(e){var t=i.edgeType.findBorderPositions(e);!1===o.selected&&(o.x=t.from.x,o.y=t.from.y),!1===n.selected&&(n.x=t.to.x,n.y=t.to.y)}),e.body.emitter.emit("_redraw")):this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),o=void 0;if(0<e.length){for(var n=0;n<e.length;n++)if(!0===this.body.nodes[e[n]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(o=this.options.deleteNode)}else 0<i.length&&"function"==typeof this.options.deleteEdge&&(o=this.options.deleteEdge);if("function"==typeof o){var s={nodes:e,edges:i};if(2!==o.length)throw new Error("The function for delete does not support two arguments (data, callback)");o(s,function(e){null!=e&&"delete"===t.inMode&&(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes)),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,t){var i=s.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+s.randomUUID(),i.hidden=!1,i.physics=!1,i.x=e,i.y=t;var o=this.body.functions.createNode(i);return o.shape.boundingBox={left:e,right:e,top:t,bottom:t},o}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},s.recursiveDOMDelete(this.editModeDiv);var e=this.options.locales[this.options.locale],t=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(t),this._bindHammerToDiv(t,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){!(this.inMode=!1)===this.guiEnabled&&(s.recursiveDOMDelete(this.editModeDiv),s.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var e=0;e<this.manipulationHammers.length;e++)this.manipulationHammers[e].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),s.recursiveDOMDelete(this.manipulationDiv),s.recursiveDOMDelete(this.editModeDiv),s.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t=this._createButton("addNode","vis-button vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(e){var t=this._createButton("addEdge","vis-button vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(e){var t=this._createButton("editNode","vis-button vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(e){var t=this._createButton("editEdge","vis-button vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(e){if(this.options.rtl)var t="vis-button vis-delete-rtl";else t="vis-button vis-delete";var i=this._createButton("delete",t,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(e){var t=this._createButton("back","vis-button vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]?"vis-label":arguments[3];return this.manipulationDOM[e+"Div"]=document.createElement("div"),this.manipulationDOM[e+"Div"].className=t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=o,this.manipulationDOM[e+"Label"].innerHTML=i,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",e))}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(void 0===this.body.eventListeners[e])throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,i=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(e,t){var i=new n(e,{});r.onTouch(i,t),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var t=this.body.edgeIndices.indexOf(this.temporaryIds.edges[e]);-1!==t&&this.body.edgeIndices.splice(t,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var o=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==o&&this.body.nodeIndices.splice(o,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=s.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(e){var t=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(t),o=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var r=o.isOverlappingWith(i),a=n.isOverlappingWith(i);!0===r?(this.selectedControlNode=o,s.edgeType.from=o):!0===a&&(this.selectedControlNode=n,s.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),i=this.canvas.DOMtoCanvas(t);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var o=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+o,y:this.lastTouch.translation.y+n}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),o=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),s=void 0,r=n.length-1;0<=r;r--)if(n[r]!==this.selectedControlNode.id){s=this.body.nodes[n[r]];break}if(void 0!==s&&void 0!==this.selectedControlNode)if(!0===s.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(s.id,o.to.id):this._performEditEdge(o.from.id,s.id)}else o.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if(100<(new Date).valueOf()-this.touchTime){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=s.extend({},this.body.view.translation);var t=this.lastTouch,i=this.selectionHandler.getNodeAt(t);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var o=this._getNewTargetNode(i.x,i.y);this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id);var n=this.body.functions.createEdge({id:"connectionEdge"+s.randomUUID(),from:i.id,to:o.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[n.id]=n,this.body.edgeIndices.push(n.id),this.temporaryIds.nodes.push(o.id),this.temporaryIds.edges.push(n.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(t.x),i.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else{var o=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+o,y:this.lastTouch.translation.y+n}}}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),s=void 0,r=n.length-1;0<=r;r--)if(-1===this.temporaryIds.nodes.indexOf(n[r])){s=this.body.nodes[n[r]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==s&&(!0===s.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[o]&&void 0!==this.body.nodes[s.id]&&this._performAddEdge(o,s.id)),this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function(e){var t=this,i={id:s.randomUUID(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(e){null!=e&&"addNode"===t.inMode&&(t.body.data.nodes.getDataSet().add(e),t.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var i=this,o={from:e,to:t};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(o,function(e){null!=e&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var i=this,o={id:this.edgeBeingEditedId,from:e,to:t};if("function"==typeof this.options.editEdge){if(2!==this.options.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editEdge(o,function(e){null==e||"editEdge"!==i.inMode?(i.body.edges[o.id].updateEdgeType(),i.body.emitter.emit("_redraw")):(i.body.data.edges.getDataSet().update(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),h);function h(e,t,i){var o=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.canvas=t,this.selectionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},s.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){o._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="array",r="object",a={configure:{enabled:{boolean:o},filter:{boolean:o,string:i,array:s,function:"function"},container:{dom:"dom"},showButton:{boolean:o},__type__:{object:r,boolean:o,string:i,array:s,function:"function"}},edges:{arrows:{to:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:r,boolean:o}},middle:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:r,boolean:o}},from:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:r,boolean:o}},__type__:{string:["from","to","middle"],object:r}},arrowStrikethrough:{boolean:o},color:{color:{string:i},highlight:{string:i},hover:{string:i},inherit:{string:["from","to","both"],boolean:o},opacity:{number:n},__type__:{object:r,string:i}},dashes:{boolean:o,array:s},font:{color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},align:{string:["horizontal","top","middle","bottom"]},__type__:{object:r,string:i}},hidden:{boolean:o},hoverWidth:{function:"function",number:n},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:o},length:{number:n,undefined:"undefined"},physics:{boolean:o},scaling:{min:{number:n},max:{number:n},label:{enabled:{boolean:o},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:r,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:r}},selectionWidth:{function:"function",number:n},selfReferenceSize:{number:n},shadow:{enabled:{boolean:o},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:r,boolean:o}},smooth:{enabled:{boolean:o},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:n},forceDirection:{string:["horizontal","vertical","none"],boolean:o},__type__:{object:r,boolean:o}},title:{string:i,undefined:"undefined"},width:{number:n},value:{number:n,undefined:"undefined"},__type__:{object:r}},groups:{useDefaultGroups:{boolean:o},__any__:"get from nodes, will be overwritten below",__type__:{object:r}},interaction:{dragNodes:{boolean:o},dragView:{boolean:o},hideEdgesOnDrag:{boolean:o},hideNodesOnDrag:{boolean:o},hover:{boolean:o},keyboard:{enabled:{boolean:o},speed:{x:{number:n},y:{number:n},zoom:{number:n},__type__:{object:r}},bindToWindow:{boolean:o},__type__:{object:r,boolean:o}},multiselect:{boolean:o},navigationButtons:{boolean:o},selectable:{boolean:o},selectConnectedEdges:{boolean:o},hoverConnectedEdges:{boolean:o},tooltipDelay:{number:n},zoomView:{boolean:o},__type__:{object:r}},layout:{randomSeed:{undefined:"undefined",number:n},improvedLayout:{boolean:o},hierarchical:{enabled:{boolean:o},levelSeparation:{number:n},nodeSpacing:{number:n},treeSpacing:{number:n},blockShifting:{boolean:o},edgeMinimization:{boolean:o},parentCentralization:{boolean:o},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:r,boolean:o}},__type__:{object:r}},manipulation:{enabled:{boolean:o},initiallyActive:{boolean:o},addNode:{boolean:o,function:"function"},addEdge:{boolean:o,function:"function"},editNode:{function:"function"},editEdge:{boolean:o,function:"function"},deleteNode:{boolean:o,function:"function"},deleteEdge:{boolean:o,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:r,boolean:o}},nodes:{borderWidth:{number:n},borderWidthSelected:{number:n,undefined:"undefined"},brokenImage:{string:i,undefined:"undefined"},color:{border:{string:i},background:{string:i},highlight:{border:{string:i},background:{string:i},__type__:{object:r,string:i}},hover:{border:{string:i},background:{string:i},__type__:{object:r,string:i}},__type__:{object:r,string:i}},fixed:{x:{boolean:o},y:{boolean:o},__type__:{object:r,boolean:o}},font:{align:{string:i},color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},__type__:{object:r,string:i}},group:{string:i,number:n,undefined:"undefined"},hidden:{boolean:o},icon:{face:{string:i},code:{string:i},size:{number:n},color:{string:i},__type__:{object:r}},id:{string:i,number:n},image:{string:i,undefined:"undefined"},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:o},level:{number:n,undefined:"undefined"},mass:{number:n},physics:{boolean:o},scaling:{min:{number:n},max:{number:n},label:{enabled:{boolean:o},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:r,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:r}},shadow:{enabled:{boolean:o},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:r,boolean:o}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{boolean:o,array:s},borderRadius:{number:n},interpolation:{boolean:o},useImageSize:{boolean:o},useBorderWithImage:{boolean:o},__type__:{object:r}},size:{number:n},title:{string:i,undefined:"undefined"},value:{number:n,undefined:"undefined"},x:{number:n},y:{number:n},__type__:{object:r}},physics:{enabled:{boolean:o},barnesHut:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:r}},forceAtlas2Based:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:r}},repulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:r}},hierarchicalRepulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:r}},maxVelocity:{number:n},minVelocity:{number:n},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:o},iterations:{number:n},updateInterval:{number:n},onlyDynamicEdges:{boolean:o},fit:{boolean:o},__type__:{object:r,boolean:o}},timestep:{number:n},adaptiveTimestep:{boolean:o},__type__:{object:r,boolean:o}},autoResize:{boolean:o},clickToUse:{boolean:o},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:r}},height:{string:i},width:{string:i},__type__:{object:r}};a.groups.__any__=a.nodes,a.manipulation.controlNodeStyle=a.nodes;t.allOptions=a,t.configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05]},middle:{enabled:!1,scaleFactor:[1,0,3,.05]},from:{enabled:!1,scaleFactor:[1,0,3,.05]}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]},global:{locale:["en","nl"]}}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e},s=i(116),r=(o=s)&&o.__esModule?o:{default:o},a=(n(h,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(o),this._createK_matrix(o);for(var n=0,s=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),r=1e9,a=0,h=0,l=0,d=0,c=0;.01<r&&n<s;){n+=1;var u=this._getHighestEnergyNode(i),p=g(u,4);for(a=p[0],r=p[1],h=p[2],l=p[3],d=r,c=0;1<d&&c<5;){c+=1,this._moveNode(a,h,l);var f=this._getEnergy(a),m=g(f,3);d=m[0],h=m[1],l=m[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,o=0,n=t[0],s=0,r=0,a=0;a<t.length;a++){var h=t[a];if(!1===i[h].predefinedPosition||!0===i[h].isCluster&&!0===e||!0===i[h].options.fixed.x||!0===i[h].options.fixed.y){var l=this._getEnergy(h),d=g(l,3),c=d[0],u=d[1],p=d[2];o<c&&(o=c,n=h,s=u,r=p)}}return[n,o,s,r]}},{key:"_getEnergy",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,o=i[e].x,n=i[e].y,s=0,r=0,a=0;a<t.length;a++){var h=t[a];if(h!==e){var l=i[h].x,d=i[h].y,c=1/Math.sqrt(Math.pow(o-l,2)+Math.pow(n-d,2));s+=this.K_matrix[e][h]*(o-l-this.L_matrix[e][h]*(o-l)*c),r+=this.K_matrix[e][h]*(n-d-this.L_matrix[e][h]*(n-d)*c)}}return[Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),s,r]}},{key:"_moveNode",value:function(e,t,i){for(var o=this.body.nodeIndices,n=this.body.nodes,s=0,r=0,a=0,h=n[e].x,l=n[e].y,d=0;d<o.length;d++){var c=o[d];if(c!==e){var u=n[c].x,p=n[c].y,f=1/Math.pow(Math.pow(h-u,2)+Math.pow(l-p,2),1.5);s+=this.K_matrix[e][c]*(1-this.L_matrix[e][c]*Math.pow(l-p,2)*f),r+=this.K_matrix[e][c]*(this.L_matrix[e][c]*(h-u)*(l-p)*f),a+=this.K_matrix[e][c]*(1-this.L_matrix[e][c]*Math.pow(h-u,2)*f)}}var m=(t/s+i/r)/(r/s-a/r),g=-(r*m+t)/s;n[e].x+=g,n[e].y+=m}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var o=0;o<t.length;o++){this.L_matrix[t[o]]={};for(var n=0;n<t.length;n++)this.L_matrix[t[o]][t[n]]=i*e[t[o]][t[n]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var o=0;o<t.length;o++){this.K_matrix[t[o]]={};for(var n=0;n<t.length;n++)this.K_matrix[t[o]][t[n]]=i*Math.pow(e[t[o]][t[n]],-2)}}}]),h);function h(e,t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),this.body=e,this.springLength=t,this.springConstant=i,this.distanceSolver=new r.default}function l(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(o,[{key:"getDistances",value:function(e,t,i){for(var o={},n=e.edges,s=0;s<t.length;s++){o[t[s]]={},o[t[s]]={};for(var r=0;r<t.length;r++)o[t[s]][t[r]]=s==r?0:1e9,o[t[s]][t[r]]=s==r?0:1e9}for(var a=0;a<i.length;a++){var h=n[i[a]];!0===h.connected&&void 0!==o[h.fromId]&&void 0!==o[h.toId]&&(o[h.fromId][h.toId]=1,o[h.toId][h.fromId]=1)}for(var l=t.length,d=0;d<l;d++)for(var c=0;c<l-1;c++)for(var u=c+1;u<l;u++)o[t[c]][t[u]]=Math.min(o[t[c]][t[u]],o[t[c]][t[d]]+o[t[d]][t[u]]),o[t[u]][t[c]]=o[t[c]][t[u]];return o}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t.default=i},function(e,t){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(e,t,i){this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(e,t,i){this.beginPath(),this.rect(e-i,t-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(e,t,i){this.beginPath(),t+=.275*(i*=1.15);var o=2*i,n=o/2,s=Math.sqrt(3)/6*o,r=Math.sqrt(o*o-n*n);this.moveTo(e,t-(r-s)),this.lineTo(e+n,t+s),this.lineTo(e-n,t+s),this.lineTo(e,t-(r-s)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(e,t,i){this.beginPath(),t-=.275*(i*=1.15);var o=2*i,n=o/2,s=Math.sqrt(3)/6*o,r=Math.sqrt(o*o-n*n);this.moveTo(e,t+(r-s)),this.lineTo(e+n,t-s),this.lineTo(e-n,t-s),this.lineTo(e,t+(r-s)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(e,t,i){this.beginPath(),t+=.1*(i*=.82);for(var o=0;o<10;o++){var n=o%2==0?1.3*i:.5*i;this.lineTo(e+n*Math.sin(2*o*Math.PI/10),t-n*Math.cos(2*o*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(e,t,i){this.beginPath(),this.lineTo(e,t+i),this.lineTo(e+i,t),this.lineTo(e,t-i),this.lineTo(e-i,t),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,o,n){var s=Math.PI/180;i-2*n<0&&(n=i/2),o-2*n<0&&(n=o/2),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,270*s,360*s,!1),this.lineTo(e+i,t+o-n),this.arc(e+i-n,t+o-n,n,0,90*s,!1),this.lineTo(e+n,t+o),this.arc(e+n,t+o-n,n,90*s,180*s,!1),this.lineTo(e,t+n),this.arc(e+n,t+n,n,180*s,270*s,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse=function(e,t,i,o){var n=i/2*.5522848,s=o/2*.5522848,r=e+i,a=t+o,h=e+i/2,l=t+o/2;this.beginPath(),this.moveTo(e,l),this.bezierCurveTo(e,l-s,h-n,t,h,t),this.bezierCurveTo(h+n,t,r,l-s,r,l),this.bezierCurveTo(r,l+s,h+n,a,h,a),this.bezierCurveTo(h-n,a,e,l+s,e,l),this.closePath()},CanvasRenderingContext2D.prototype.database=function(e,t,i,o){var n=o*(1/3),s=i/2*.5522848,r=n/2*.5522848,a=e+i,h=t+n,l=e+i/2,d=t+n/2,c=t+(o-n/2),u=t+o;this.beginPath(),this.moveTo(a,d),this.bezierCurveTo(a,d+r,l+s,h,l,h),this.bezierCurveTo(l-s,h,e,d+r,e,d),this.bezierCurveTo(e,d-r,l-s,t,l,t),this.bezierCurveTo(l+s,t,a,d-r,a,d),this.lineTo(a,c),this.bezierCurveTo(a,c+r,l+s,u,l,u),this.bezierCurveTo(l-s,u,e,c+r,e,c),this.lineTo(e,d)},CanvasRenderingContext2D.prototype.arrow=function(e,t,i,o){var n=e-o*Math.cos(i),s=t-o*Math.sin(i),r=e-.9*o*Math.cos(i),a=t-.9*o*Math.sin(i),h=n+o/3*Math.cos(i+.5*Math.PI),l=s+o/3*Math.sin(i+.5*Math.PI),d=n+o/3*Math.cos(i-.5*Math.PI),c=s+o/3*Math.sin(i-.5*Math.PI);this.beginPath(),this.moveTo(e,t),this.lineTo(h,l),this.lineTo(r,a),this.lineTo(d,c),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(e,t,i,o,n){this.beginPath(),this.moveTo(e,t);for(var s=n.length,r=i-e,a=o-t,h=a/r,l=Math.sqrt(r*r+a*a),d=0,c=!0,u=0,p=n[0];.1<=l;)l<(p=n[d++%s])&&(p=l),u=Math.sqrt(p*p/(1+h*h)),e+=u=r<0?-u:u,t+=h*u,!0===c?this.lineTo(e,t):this.moveTo(e,t),l-=p,c=!c})},function(e,t){function i(e){return O=e,function(){var e={};if(C=0,M=O.charAt(0),c(),"strict"===D&&(e.strict=!0,c()),"graph"!==D&&"digraph"!==D||(e.type=D,c()),E===k.IDENTIFIER&&(e.id=D,c()),"{"!=D)throw v("Angle bracket { expected");if(c(),u(e),"}"!=D)throw v("Angle bracket } expected");if(c(),""!==D)throw v("End of file expected");return c(),delete e.node,delete e.edge,delete e.graph,e}()}function o(){C++,M=O.charAt(C)}function n(){return O.charAt(C+1)}function s(e){return T.test(e)}function h(e,t){if(e=e||{},t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function r(e,t,i){for(var o=t.split("."),n=e;o.length;){var s=o.shift();o.length?(n[s]||(n[s]={}),n=n[s]):n[s]=i}}function l(e,t){for(var i,o,n=null,s=[e],r=e;r.parent;)s.push(r.parent),r=r.parent;if(r.nodes)for(i=0,o=r.nodes.length;i<o;i++)if(t.id===r.nodes[i].id){n=r.nodes[i];break}for(n||(n={id:t.id},e.node&&(n.attr=h(n.attr,e.node))),i=s.length-1;0<=i;i--){var a=s[i];a.nodes||(a.nodes=[]),-1===a.nodes.indexOf(n)&&a.nodes.push(n)}t.attr&&(n.attr=h(n.attr,t.attr))}function a(e,t){if(e.edges||(e.edges=[]),e.edges.push(t),e.edge){var i=h({},e.edge);t.attr=h(i,t.attr)}}function d(e,t,i,o,n){var s={from:t,to:i,type:o};return e.edge&&(s.attr=h({},e.edge)),s.attr=h(s.attr||{},n),s}function c(){for(E=k.NULL,D="";" "===M||"\t"===M||"\n"===M||"\r"===M;)o();do{var e=!1;if("#"===M){for(var t=C-1;" "===O.charAt(t)||"\t"===O.charAt(t);)t--;if("\n"===O.charAt(t)||""===O.charAt(t)){for(;""!=M&&"\n"!=M;)o();e=!0}}if("/"===M&&"/"===n()){for(;""!=M&&"\n"!=M;)o();e=!0}if("/"===M&&"*"===n()){for(;""!=M;){if("*"===M&&"/"===n()){o(),o();break}o()}e=!0}for(;" "===M||"\t"===M||"\n"===M||"\r"===M;)o()}while(e);if(""!==M){var i=M+n();if(S[i])return E=k.DELIMITER,D=i,o(),void o();if(S[M])return E=k.DELIMITER,D=M,void o();if(s(M)||"-"===M){for(D+=M,o();s(M);)D+=M,o();return"false"===D?D=!1:"true"===D?D=!0:isNaN(Number(D))||(D=Number(D)),void(E=k.IDENTIFIER)}if('"'===M){for(o();""!=M&&('"'!=M||'"'===M&&'"'===n());)D+=M,'"'===M&&o(),o();if('"'!=M)throw v('End of string " expected');return o(),void(E=k.IDENTIFIER)}for(E=k.UNKNOWN;""!=M;)D+=M,o();throw new SyntaxError('Syntax error in part "'+y(D,30)+'"')}E=k.DELIMITER}function u(e){for(;""!==D&&"}"!=D;)p(e),";"===D&&c()}function p(e){var t,i,o,n,s,r=f(e);if(r)m(e,r);else if(!(t=e,"node"===D?(c(),t.node=g(),"node"):"edge"===D?(c(),t.edge=g(),"edge"):"graph"===D?(c(),t.graph=g(),"graph"):null)){if(E!=k.IDENTIFIER)throw v("Identifier expected");var a=D;if(c(),"="===D){if(c(),E!=k.IDENTIFIER)throw v("Identifier expected");e[a]=D,c()}else i=e,n={id:o=a},(s=g())&&(n.attr=s),l(i,n),m(i,o)}}function f(e){var t=null;if("subgraph"===D&&((t={}).type="subgraph",c(),E===k.IDENTIFIER&&(t.id=D,c())),"{"===D){if(c(),(t=t||{}).parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,u(t),"}"!=D)throw v("Angle bracket } expected");c(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function m(e,t){for(;"->"===D||"--"===D;){var i,o=D;c();var n=f(e);if(n)i=n;else{if(E!=k.IDENTIFIER)throw v("Identifier or subgraph expected");l(e,{id:i=D}),c()}a(e,d(e,t,i,o,g())),t=i}}function g(){for(var e=null;"["===D;){for(c(),e={};""!==D&&"]"!=D;){if(E!=k.IDENTIFIER)throw v("Attribute name expected");var t=D;if(c(),"="!=D)throw v("Equal sign = expected");if(c(),E!=k.IDENTIFIER)throw v("Attribute value expected");r(e,t,D),c(),","==D&&c()}if("]"!=D)throw v("Bracket ] expected");c()}return e}function v(e){return new SyntaxError(e+', got "'+y(D,30)+'" (char '+C+")")}function y(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function b(e,t,i){for(var o=t.split("."),n=o.pop(),s=e,r=0;r<o.length;r++){var a=o[r];a in s||(s[a]={}),s=s[a]}return s[n]=i,e}function w(t,e){var i={};for(var o in t)if(t.hasOwnProperty(o)){var n=e[o];Array.isArray(n)?n.forEach(function(e){b(i,e,t[o])}):b(i,"string"==typeof n?n:o,t[o])}return i}var _={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},x=Object.create(_);x.color="color.color";var k={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},S={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},O="",C=0,M="",D="",E=k.NULL,T=/[a-zA-Z_0-9.:#]/;t.parseDOT=i,t.DOTToGraph=function(e){var t=i(e),r={nodes:[],edges:[],options:{}};if(t.nodes&&t.nodes.forEach(function(e){var t={id:e.id,label:String(e.label||e.id)};h(t,w(e.attr,_)),t.image&&(t.shape="image"),r.nodes.push(t)}),t.edges){function a(e){var t={from:e.from,to:e.to};return h(t,w(e.attr,x)),t.arrows="->"===e.type?"to":void 0,t}t.edges.forEach(function(n){var e,t,i,o,s;e=n.from instanceof Object?n.from.nodes:{id:n.from},t=n.to instanceof Object?n.to.nodes:{id:n.to},n.from instanceof Object&&n.from.edges&&n.from.edges.forEach(function(e){var t=a(e);r.edges.push(t)}),i=e,o=t,s=function(e,t){var i=d(r,e.id,t.id,n.type,n.attr),o=a(i);r.edges.push(o)},Array.isArray(i)?i.forEach(function(t){Array.isArray(o)?o.forEach(function(e){s(t,e)}):s(t,o)}):Array.isArray(o)?o.forEach(function(e){s(i,e)}):s(i,o),n.to instanceof Object&&n.to.edges&&n.to.edges.forEach(function(e){var t=a(e);r.edges.push(t)})})}return t.attr&&(r.options=t.attr),r}},function(e,t){t.parseGephi=function(e,t){var i=[],o=[],n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==t&&(void 0!==t.fixed&&(n.nodes.fixed=t.fixed),void 0!==t.parseColor&&(n.nodes.parseColor=t.parseColor),void 0!==t.inheritColor&&(n.edges.inheritColor=t.inheritColor));for(var s=e.edges,r=e.nodes,a=0;a<s.length;a++){var h={},l=s[a];h.id=l.id,h.from=l.source,h.to=l.target,h.attributes=l.attributes,h.label=l.label,h.title=void 0!==l.attributes?l.attributes.title:void 0,"Directed"===l.type&&(h.arrows="to"),l.color&&!1===n.inheritColor&&(h.color=l.color),i.push(h)}for(a=0;a<r.length;a++){var d={},c=r[a];d.id=c.id,d.attributes=c.attributes,d.title=c.title,d.x=c.x,d.y=c.y,d.label=c.label,d.title=void 0!==c.attributes?c.attributes.title:void 0,!0===n.nodes.parseColor?d.color=c.color:d.color=void 0!==c.color?{background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}:void 0,d.size=c.size,d.fixed=n.nodes.fixed&&void 0!==c.x&&void 0!==c.y,o.push(d)}return{nodes:o,edges:i}}},function(e,t){t.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},t.en_EN=t.en,t.en_US=t.en,t.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},t.de_DE=t.de,t.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},t.es_ES=t.es,t.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},t.nl_NL=t.nl,t.nl_BE=t.nl}],i.c=n,i.p="",i(0);function i(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return o[e].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var o,n}),angular.module("timelineApp").config(["$routeProvider",function(e){"use strict";e.when("/screen-timeline",{controller:"TimelineScreenController",templateUrl:"bundles/os2displayadmin/apps/timelineApp/timeline-page.html?"+window.config.version}).when("/channel-timeline",{controller:"TimelineChannelController",templateUrl:"bundles/os2displayadmin/apps/timelineApp/timeline-page.html?"+window.config.version})}]),angular.module("timelineApp").service("timelineAppSetup",["busService",function(i){"use strict";i.$on("menuApp.requestSubMenuItems",function(e,t){i.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"screen",items:[{title:"Timeline",path:"/#/screen-timeline",classes:"screen-timeline",group:"right",icon:"event-note",weight:4,activeFilter:"/screen-timeline"}]},{mainMenuItem:"channel",items:[{title:"Timeline",path:"/#/channel-timeline",classes:"channel-timeline",group:"right",icon:"event-note",weight:4,activeFilter:"/channel-timeline"}]}])})}]),angular.module("timelineApp").run(["timelineAppSetup",angular.noop]),angular.module("timelineApp").directive("timeline",["busService","$timeout","$location",function(e,t,u){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/timelineApp/directive/timeline.html?"+window.config.version,scope:{tid:"@",data:"="},link:function(a){var n,s,r,i;a.start=null,a.end=null;function o(e){var t=e.getTime(),i=(t=t-(t%864e5-60*e.getTimezoneOffset()*1e3)-(e.getDay()+6)%7*24*60*60*1e3)+6048e5;n.setWindow({start:t,end:i,animation:!1})}function h(){for(var e=[],t=0;t<a.data.items.length;t++){var i=angular.copy(a.data.items[t]);if((!i.start||i.start<a.end.getTime())&&(!i.end||i.end>a.start.getTime()))if(i.start||(i.start=a.start.getTime()),i.end||(i.end=a.end.getTime()),i.schedule_repeat){if(i.schedule_repeat_days)for(var o=new Date(a.start),n=0;o<a.end;){for(var s=0;s<i.schedule_repeat_days.length;s++)if(o.getDay()===i.schedule_repeat_days[s].id){var r=angular.copy(i);if(r.start=new Date(o),r.start.setHours(i.schedule_repeat_from?i.schedule_repeat_from:0),r.start.setMinutes(0),r.start.setSeconds(0),r.start=r.start.getTime(),r.end=new Date(o),r.end.setHours(i.schedule_repeat_to?i.schedule_repeat_to:23),r.end.setMinutes(i.schedule_repeat_to?0:59),r.end.setSeconds(i.schedule_repeat_to?0:59),r.end=r.end.getTime(),r.end<i.start)continue;if(r.start>i.end)continue;r.start<i.start&&(r.start=i.start),r.end>i.end&&(r.end=i.end),r.id=i.id+"_"+n,e.push(r)}o.setDate(o.getDate()+1),n++}}else e.push(i)}return e}function l(e){var t=[];for(var i in e)i=e[i],-1==t.indexOf(i.group)&&t.push(i.group);var o=[];for(var n in a.data.groups)n=a.data.groups[n],-1!==t.indexOf(n.id)&&o.push(n);return o}function d(e){t(function(){a.start=new Date(e.start),a.end=new Date(e.end),s=h(),r=l(s),n.setData({items:s,groups:r})})}var c={locales:{da:{current:"nuværende",time:"tid"}},locale:"da",editable:!1,snap:function(e){return 36e5*Math.round(e/36e5)},min:new Date(2016,0,1),zoomMin:864e5,zoomMax:26784e5,stack:!1,zoomable:!1};a.$watch("data",function(e,t){if(null!==t){var i=document.getElementById("timeline_"+a.data.id);n=new vis.Timeline(i,[],[],c),a.today();var o=n.getWindow();a.start=new Date(o.start),a.end=new Date(o.end),s=h(),r=l(s),n.on("rangechanged",d),n.on("click",function(e){for(var t in s)if((t=s[t]).id==e.item)return void a.$apply(function(){u.path(t.redirect_url)})}),n.setData({items:s,groups:r})}}),a.moveDays=function(e){var t=24*e*60*60*1e3;i=new Date(i.getTime()+t),o(i)},a.today=function(){i=new Date,o(i)},a.zoom=function(e){var t=n.getWindow(),i=t.end-t.start;n.setWindow({start:t.start.valueOf()-i*e,end:t.end.valueOf()+i*e,animation:!1})},a.$on("$destroy",function(){n&&n.off()})}}}]),angular.module("timelineApp").service("timelineService",["busService","$q","$http",function(e,o,n){"use strict";this.fetchData=function(e,t){var c=o.defer();if(!e)return c.resolve([]),c.promise;var i="?ids[]="+e.join("&ids[]=");switch(t){case"Os2Display\\CoreBundle\\Entity\\Channel":n.get("/api/bulk/channel/timeline-channel"+i).then(function(e){var t=[];for(var i in e.data){var o=[],n=e.data[i];for(var s in n.slides){var r=n.slides[s];o.push({id:r.id,content:r.title,className:r.published?null:"is-not-published",group:n.id,subgroup:r.id,start:1e3*r.schedule_from,end:1e3*r.schedule_to,redirect_url:"/slide/"+r.id})}t.push({id:n.id,title:n.title,items:o,groups:[{id:n.id,content:""}]})}c.resolve(t)},function(e){c.reject(e.status)});break;case"Os2Display\\CoreBundle\\Entity\\Screen":n.get("/api/bulk/screen/timeline-screen"+i).then(function(e){var t=[];for(var i in e.data){var o=[],n=[],s=e.data[i];for(var r in s.channel_screen_regions){var a=s.channel_screen_regions[r];if(a.channel){var h=a.channel;o.push({id:a.id+"_"+h.id,content:h.title,group:a.region,subgroup:a.id+"_"+h.id,start:1e3*h.publish_from,end:1e3*h.publish_to,schedule_repeat:h.schedule_repeat,schedule_repeat_days:h.schedule_repeat_days,schedule_repeat_from:h.schedule_repeat_from,schedule_repeat_to:h.schedule_repeat_to,redirect_url:"/channel/"+h.id})}else if(a.shared_channel){h=angular.fromJson(a.shared_channel.content);o.push({id:a.shared_channel.index+"_"+a.id+"_"+h.id,content:h.title+" (delt kanal fra: "+a.shared_channel.index+")",group:a.region,subgroup:a.id+"_"+h.id,start:1e3*h.publish_from,end:1e3*h.publish_to,schedule_repeat:h.schedule_repeat,schedule_repeat_days:h.schedule_repeat_days,schedule_repeat_from:h.schedule_repeat_from,schedule_repeat_to:h.schedule_repeat_to,redirect_url:"/shared-channel/"+a.shared_channel.unique_id+"/"+a.shared_channel.index})}-1===n.indexOf(a.region)&&n.push(a.region)}for(var l=[],d=0;d<n.length;d++)l.push({id:n[d],content:"Region "+n[d]});t.push({id:s.id,title:s.title,items:o,groups:l})}c.resolve(t)},function(e){c.reject(e.status)});break;default:c.reject("Unrecognized searchType")}return c.promise}}]),angular.module("timelineApp").controller("TimelineBaseController",["busService","timelineService","$scope",function(n,s,r){"use strict";r.loading=!1,r.sort={created_at:"desc"},r.showFromUser=localStorage.getItem("overview.timeline.search_filter_default")?localStorage.getItem("overview.timeline.search_filter_default"):"all",r.pager={size:6,page:0},r.hits=0;var i={type:r.searchType,fields:["title"],text:"",sort:{created_at:{order:"desc"}},pager:r.pager,callbacks:{hits:"",error:""}};r.updateSearch=function(){i.text=r.search_text,r.loading=!0;var e=CryptoJS.MD5(JSON.stringify(i)).toString();i.callbacks.hits="searchService.hits-"+e,i.callbacks.error="searchService.error-"+e,n.$once(i.callbacks.hits,function(e,t){r.hits=t.hits;for(var i=[],o=0;o<t.results.length;o++)i.push(t.results[o].id);s.fetchData(i,r.searchType).then(function(e){r.data=e,r.loading=!1},function(e){n.$emit("log.error",{cause:e,msg:"Kunne ikke load skærme fra databasen."}),r.loading=!1})}),n.$once(i.callbacks.error,function(e,t){n.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."})}),n.$emit("searchService.request",i)},r.search=function(){r.pager.page=0,r.updateSearch()},r.setUser=function(e){localStorage.setItem("overview.timeline.search_filter_default",e),r.showFromUser!==e&&(r.showFromUser=e,r.setSearchFilters())},r.setSearchFilters=function(){if(delete i.filter,"all"!==r.showFromUser&&(i.filter={bool:{must:[]}}),"all"!==r.showFromUser){var e={};e.term={user:r.currentUser.id},i.filter.bool.must.push(e)}r.search()},r.setSort=function(e,t){void 0!==r.sort[e]&&r.sort[e]===t||(r.sort={},r.sort[e]=t,i.sort={},i.sort[e]={order:t},r.updateSearch())},r.changePage=function(e){r.pager.page=e,r.updateSearch()};var e=n.$on("userService.returnCurrentUser",function(e,t){r.currentUser=t,r.setSearchFilters()});n.$emit("userService.getCurrentUser"),r.$on("$destroy",function(){e()})}]),angular.module("timelineApp").controller("TimelineScreenController",["busService","$scope","$controller",function(e,t,i){"use strict";t.searchType="Os2Display\\CoreBundle\\Entity\\Screen",i("TimelineBaseController",{$scope:t})}]),angular.module("timelineApp").controller("TimelineChannelController",["busService","$scope","$controller",function(e,t,i){"use strict";t.searchType="Os2Display\\CoreBundle\\Entity\\Channel",i("TimelineBaseController",{$scope:t})}]),angular.module("adminApp").config(["$routeProvider","$translateProvider",function(e,t){"use strict";t.useSanitizeValueStrategy("escape").useStaticFilesLoader({prefix:"bundles/os2displayadmin/apps/adminApp/translations/locale-",suffix:".json"}).preferredLanguage("da").fallbackLanguage("da").forceAsyncReload(!0),e.when("/admin",{controller:"AdminDashboardController",templateUrl:"bundles/os2displayadmin/apps/adminApp/dashboard/admin-dashboard.html?"+window.config.version}).when("/user",{controller:"AdminUserController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-user.html?"+window.config.version}).when("/admin/users",{controller:"AdminUsersController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-users.html?"+window.config.version}).when("/admin/user/:id",{controller:"AdminUserController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-user.html?"+window.config.version}).when("/admin/groups",{controller:"AdminGroupsController",templateUrl:"bundles/os2displayadmin/apps/adminApp/group/admin-groups.html?"+window.config.version}).when("/admin/group/:id",{controller:"AdminGroupController",templateUrl:"bundles/os2displayadmin/apps/adminApp/group/admin-group.html?"+window.config.version})}]),angular.module("adminApp").service("adminAppSetup",["busService","userService",function(o,n){"use strict";o.$on("menuApp.requestMainMenuItems",function(){(n.hasRole("ROLE_USER_ADMIN")||n.hasRole("ROLE_GROUP_ADMIN"))&&o.$emit("menuApp.returnMainMenuItems",[{title:"Admin",route:"/#/admin",activeFilter:"/admin",icon:"picture_in_picture",weight:5}])}),o.$on("menuApp.requestSubMenuItems",function(e,t){var i=[];n.hasRole("ROLE_USER_ADMIN")&&n.hasRole("ROLE_GROUP_ADMIN")&&i.push({title:"Oversigt",path:"#/admin",classes:"overview-right",activeFilter:"/admin",group:"left",weight:1}),n.hasRole("ROLE_USER_ADMIN")&&i.push({title:"Brugere",path:"#/admin/users",classes:"admin-users",activeFilter:"/admin/users",group:"left",weight:2}),n.hasRole("ROLE_GROUP_ADMIN")&&i.push({title:"Grupper",path:"#/admin/groups",classes:"overview-right",activeFilter:"/admin/groups",group:"left",weight:3}),o.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"admin",items:i}])})}]),angular.module("adminApp").run(["adminAppSetup",angular.noop]),angular.module("adminApp").controller("AdminDashboardController",["busService","$scope","$controller","$location","$filter",function(e,t,i,o,n){"use strict";i("BaseController",{$scope:t});var s=n("translate"),r=t.requireRole("ROLE_GROUP_ADMIN"),a=t.requireRole("ROLE_USER_ADMIN");if(!r||!a)return e.$emit("log.error",{timeout:5e3,cause:403,msg:s("common.error.forbidden")}),void(r?o.path("/admin/groups"):a?o.path("/admin/users"):o.path("/"));i("AdminUsersController",{$scope:t}),i("AdminGroupsController",{$scope:t}),t.max=5,t.allLinks=!0}]),angular.module("adminApp").controller("AdminGroupsController",["busService","$scope","$timeout","ModalService","$controller","$filter","$location",function(t,i,o,n,e,s,r){"use strict";e("BaseApiController",{$scope:i});var a=s("translate");if(!i.requireRole("ROLE_GROUP_ADMIN"))return t.$emit("log.error",{timeout:5e3,cause:403,msg:a("common.error.forbidden")}),void r.path("/");function h(e){var t=[];i.baseCanRead(e)&&t.push({url:"#/admin/group/"+e.id,title:a("group.action.view")}),i.baseCanUpdate(e)&&t.push({url:"#/admin/group/"+e.id,title:a("group.action.edit")}),i.baseCanDelete(e)&&t.push({click:i.deleteGroup,entity:e,title:a("group.action.delete")}),i.groups.push({id:e.id,url:"#/admin/group/"+e.id,title:e.displayName,actions:t})}i.groupsLoading=!0,i.groups=null,i.max=null,i.getEntities("group").then(function(e){for(var t in i.groups=[],e)e.hasOwnProperty(t)&&h(e[t])},function(e){t.$emit("log.error",{timeout:5e3,cause:e.code,msg:a("group.messages.groups_not_found")})}).then(function(){i.groupsLoading=!1}),i.createGroup=function(){n.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-create-group.html",controller:"PopupCreateGroup"}).then(function(e){e.close.then(function(e){e&&h(e)})})},i.deleteGroup=function(e){n.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-delete-group.html",controller:"PopupDeleteGroup",inputs:{group:e}}).then(function(e){e.close.then(function(e){var t;e&&(t=e,o(function(){i.baseRemoveElementFromList(i.groups,t,"id")}))})})}}]),angular.module("adminApp").controller("AdminGroupController",["busService","$scope","$timeout","ModalService","$routeParams","$location","$controller","$filter","userService",function(i,a,t,e,o,n,s,r,h){"use strict";s("BaseApiController",{$scope:a});var l=r("translate");if(!a.requireRole("ROLE_GROUP_ADMIN"))return i.$emit("log.error",{timeout:5e3,cause:403,msg:l("common.error.forbidden")}),void n.path("/");a.group=null,a.loading=!0;var d=a.users=null;function c(s){var r=[];a.baseApiRequest("get","/api/user/"+s.id+"/group/"+a.group.id).then(function(e){if(a.baseCanUpdate(a.group)){for(var t in d)if(-1===e.roles.indexOf(t)){var i=d[t];r.push({title:l("group.action.set_group_role",{roleName:i}),click:a.setRoleToUser,entity:{user:s,roles:[t]}})}r.push({title:l("group.action.remove_user"),click:a.removeUserFromGroup,entity:s})}var o="";for(var n in e.roles)n=e.roles[n],o=o+"("+(d[n]?d[n]:n)+") ";a.users.push({id:s.id,url:"#/admin/user/"+s.id,title:s.displayName,actions:r,text:o})},function(e){console.error(e)})}a.setRoleToUser=function(t){a.baseApiRequest("put","/api/user/"+t.user.id+"/group/"+a.group.id,{roles:t.roles}).then(function(e){i.$emit("log.info",{timeout:2e3,msg:l("group.messages.user_role_set")}),t.user.roles=e.roles,a.baseRemoveElementFromList(a.users,t.user,"id"),c(t.user)},function(e){i.$emit("log.error",{cause:e.code,msg:l("group.messages.user_role_not_set")})})},a.removeUserFromGroup=function(e){a.baseApiRequest("delete","/api/user/"+e.id+"/group/"+a.group.id).then(function(){t(function(){i.$emit("log.info",{timeout:2e3,msg:l("group.messages.user_removed_from_group")}),e.id===h.getCurrentUser().id&&h.updateCurrentUser(),a.baseRemoveElementFromList(a.users,e,"id")})},function(e){i.$emit("log.error",{timeout:5e3,cause:e.code,msg:l("group.messages.user_not_removed_from_group")})})},a.baseApiRequest("get","/api/group/roles").then(function(e){d=e}).then(function(){a.getEntity("group",{id:o.id}).then(function(e){for(var t in a.group=e,a.users=[],a.group.users)c(a.group.users[t]);a.loading=!1},function(e){i.$emit("log.error",{timeout:5e3,cause:e.code,msg:l("group.messages.group_not_found")}),n.path("/admin")})}),a.showAddUserModal=function(){e.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-add-user.html",controller:"PopupAddUser",inputs:{group:a.group,groupUsers:a.users,addedUserCallback:c}}).then(function(e){e.close.then(function(){})})},a.submitForm=function(e){a.loading||(e.$invalid?i.$emit("log.error",{timeout:5e3,cause:err.code,msg:l("group.messages.form_invalid")}):(a.loading=!0,a.updateEntity("group",a.group).then(function(e){a.group=e,a.loading=!1,i.$emit("log.info",{timeout:3e3,msg:l("group.messages.group_updated")})},function(e){i.$emit("log.error",{cause:e.code,msg:l("group.messages.group_not_updated")})})))}}]),angular.module("adminApp").controller("PopupCreateGroup",["busService","$scope","$timeout","close","$controller","$filter",function(t,i,e,o,n,s){"use strict";n("BaseApiController",{$scope:i});var r=s("translate");i.group={title:""},i.loading=!1,i.errors=[],i.forms={},i.closeModal=function(){o(null)},i.submitForm=function(e){i.loading||(i.errors=[],e.$invalid?i.errors.push(r("group.texts.error_form_invalid")):(i.loading=!0,i.createEntity("group",i.group).then(function(e){t.$emit("log.info",{timeout:5e3,msg:r("group.messages.group_created")}),o(e)},function(e){409===e.code?i.errors.push(r("group.texts.error_group_already_exists")):i.errors.push(r("group.texts.error_could_not_create_group"))}).then(function(){i.loading=!1})))}}]),angular.module("adminApp").controller("PopupDeleteGroup",["busService","$scope","$timeout","close","$controller","group","$filter","userService",function(t,i,e,o,n,s,r,a){"use strict";n("BaseApiController",{$scope:i});var h=r("translate");i.group=s,i.loading=!1,i.errors=[],i.forms={},i.closeModal=function(){o(null)},i.submitForm=function(e){i.loading||(i.errors=[],i.loading=!0,i.deleteEntity("group",i.group).then(function(){t.$emit("log.info",{timeout:5e3,msg:h("group.messages.group_deleted")}),a.updateCurrentUser(),o(i.group)},function(){i.errors.push(h("group.texts.error_could_not_delete_group"))}).then(function(){i.loading=!1}))}}]),angular.module("adminApp").controller("PopupAddUser",["busService","$scope","$timeout","close","$controller","group","groupUsers","addedUserCallback","$filter","userService",function(t,i,e,o,n,s,r,a,h,l){"use strict";n("BaseApiController",{$scope:i});var d=h("translate");function c(t){r.find(function(e){return e.id===t.id})||i.users.push({id:t.id,title:t.displayName,entity:t,click:i.addUser})}i.loading=!1,i.errors=[],i.forms={},i.users=[],i.addUser=function(t){i.errors=[],i.baseApiRequest("post","/api/user/"+t.id+"/group/"+s.id,{roles:["ROLE_GROUP_ROLE_USER"]}).then(function(e){e.user.id===l.getCurrentUser().id&&l.updateCurrentUser(),a(t),i.baseRemoveElementFromList(i.users,t,"id")},function(){i.errors.push(d("group.texts.error_adding_user"))})},i.users=[],i.getEntities("user").then(function(e){for(var t in e)c(e[t])},function(e){t.$emit("log.error",{timeout:5e3,cause:e.code,msg:d("group.messages.unable_to_load_users")}),$location.path("/admin")}).then(function(){i.loading=!1}),i.closeModal=function(){o(null)}}]),angular.module("adminApp").controller("AdminUsersController",["busService","$scope","$timeout","ModalService","$controller","$filter","$location",function(t,i,o,n,e,s,r){"use strict";e("BaseApiController",{$scope:i});var a=s("translate");if(!i.requireRole("ROLE_USER_ADMIN"))return t.$emit("log.error",{timeout:5e3,cause:403,msg:a("common.error.forbidden")}),void r.path("/");function h(e){var t=[];i.baseCanRead(e)&&t.push({url:"#/admin/user/"+e.id,title:a("user.action.view")}),i.baseCanUpdate(e)&&t.push({url:"#/admin/user/"+e.id,title:a("user.action.edit")}),i.baseCanDelete(e)&&t.push({click:i.deleteUser,entity:e,title:a("user.action.delete")}),i.users.push({id:e.id,url:"#/admin/user/"+e.id,title:e.displayName,actions:t})}i.usersLoading=!0,i.users=null,i.max=null,i.getEntities("user").then(function(e){for(var t in i.users=[],e)e.hasOwnProperty(t)&&h(e[t])},function(e){t.$emit("log.error",{cause:e.code,msg:a("user.messages.users_not_found")})}).then(function(){i.usersLoading=!1}),i.createUser=function(){n.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-create-user.html",controller:"PopupCreateUser"}).then(function(e){e.close.then(function(e){e&&h(e)})})},i.deleteUser=function(e){n.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-delete-user.html",controller:"PopupDeleteUser",inputs:{user:e}}).then(function(e){e.close.then(function(e){var t;e&&(t=e,o(function(){i.baseRemoveElementFromList(i.users,t,"id")}))})})}}]),angular.module("adminApp").controller("AdminUserController",["busService","$scope","$timeout","ModalService","$routeParams","$location","$controller","$filter","userService",function(i,n,o,e,t,s,r,a,h){"use strict";r("BaseApiController",{$scope:n});var l=a("translate");n.user=null,n.userRoles=[],n.userGroups=[],n.loading=!0,n.forms={};function d(e,t){var i=[];n.baseCanUpdateRoles(n.baseCurrentUser)&&i.push({title:l("user.action.remove_role"),click:n.removeRoleFromUser,entity:e});var o={id:e,title:t};0<i.length&&(o.actions=i),n.userRoles.push(o)}function c(e){n.loading=!0;var t=angular.copy(n.user);t.roles[e.id]=e.title,n.baseApiRequest("put","/api/user/"+n.user.id,t).then(function(e){o(function(){u(e)})},function(e){i.$emit("log.error",{cause:e.code,msg:l("user.messages.could_not_add_role_to_user")})}).then(function(){n.loading=!1})}function u(e){for(var t in n.user=e,n.userRoles=[],n.userGroups=[],n.user.roles)d(t,n.user.roles[t]);for(var i in n.user.groups){i=n.user.groups[i];n.userGroups.push({id:i.id,title:i.displayName,url:"#/admin/group/"+i.id})}}if(t.id){if(!n.requireRole("ROLE_USER_ADMIN"))return i.$emit("log.error",{timeout:5e3,cause:403,msg:l("common.error.forbidden")}),void s.path("/");n.getEntity("user",{id:t.id}).then(function(e){o(function(){u(e)})},function(e){i.$emit("log.error",{timeout:5e3,cause:e.code,msg:l("user.messages.user_not_found")}),s.path("/admin")}).then(function(){n.loading=!1})}else n.loading=!1,u(n.baseCurrentUser);n.removeRoleFromUser=function(e){n.loading=!0;var t=angular.copy(n.user);delete t.roles[e],n.baseApiRequest("put","/api/user/"+n.user.id,t).then(function(e){e.id===h.getCurrentUser().id&&h.updateCurrentUser(),o(function(){u(e)})},function(e){i.$emit("log.error",{cause:e.code,msg:l("user.messages.could_not_remove_role_from_user")})}).then(function(){n.loading=!1})},n.showAddRoleModal=function(){e.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-add-role-to-user.html",controller:"PopupAddRoleToUser",inputs:{options:{type:"user/roles",list:n.userRoles,heading:l("user.action.search_for_role"),searchPlaceholder:"",clickCallback:c}}}).then(function(e){e.close.then(function(){})})},n.submitForm=function(e){n.loading||(e.$invalid?i.$emit("log.error",{timeout:5e3,cause:err.code,msg:l("common.form.invalid")}):(n.loading=!0,n.updateEntity("user",n.user).then(function(e){e.id===h.getCurrentUser().id&&h.updateCurrentUser(),u(e),i.$emit("log.info",{timeout:3e3,msg:l("user.messages.user_updated")})},function(e){409===e.code?i.$emit("log.error",{cause:e.code,msg:l("user.messages.user_not_updated_conflict")}):i.$emit("log.error",{cause:e.code,msg:l("user.messages.user_not_updated")})}).then(function(){n.loading=!1})))}}]),angular.module("adminApp").controller("PopupCreateUser",["busService","$scope","$timeout","close","$controller","$filter",function(t,i,e,o,n,s){"use strict";n("BaseApiController",{$scope:i});var r=s("translate");i.user={email:""},i.loading=!1,i.errors=[],i.forms={},i.closeModal=function(){o(null)},i.submitForm=function(e){i.loading||(i.errors=[],e.emailInput.$invalid?i.errors.push(r("user.texts.error_email_not_valid")):(i.loading=!0,i.createEntity("user",i.user).then(function(e){t.$emit("log.info",{timeout:5e3,msg:r("user.messages.user_created")}),o(e)},function(e){400===e.code?i.errors.push(r("common.form.invalid")):409===e.code?i.errors.push(r("user.texts.user_not_created_conflict")):i.errors.push(r("user.texts.user_not_created"))}).then(function(){i.loading=!1})))}}]),angular.module("adminApp").controller("PopupDeleteUser",["busService","$scope","$timeout","close","$controller","user","$filter",function(t,i,e,o,n,s,r){"use strict";n("BaseApiController",{$scope:i});var a=r("translate");i.user=s,i.loading=!1,i.closeModal=function(){o(null)},i.submitForm=function(e){i.loading||(i.loading=!0,i.deleteEntity("user",i.user).then(function(){t.$emit("log.info",{timeout:5e3,msg:a("user.messages.user_deleted")}),o(i.user)},function(e){t.$emit("log.error",{cause:e.code,timeout:5e3,msg:a("user.messages.user_not_deleted")})}).then(function(){i.loading=!1}))}}]),angular.module("adminApp").controller("PopupAddRoleToUser",["busService","$scope","$timeout","$controller","close","options","$filter",function(t,e,i,o,n,s,r){"use strict";o("BaseApiController",{$scope:e});var a=r("translate");function h(t){s.list.find(function(e){return e.id===t.id})||e.elements.push({id:t.id,title:t.title,entity:t,click:e.clickCallback})}e.loading=!1,e.clickCallback=s.clickCallback,e.heading=s.heading,e.searchPlaceholder=s.searchPlaceholder,e.elements=[],e.getEntities(s.type).then(function(e){for(var t in e)h({id:t,title:e[t]})},function(e){t.$emit("log.error",{cause:e.code,msg:a("user.messages.roles_not_found")})}).then(function(){e.loading=!1}),e.closeModal=function(){n(null)}}]);